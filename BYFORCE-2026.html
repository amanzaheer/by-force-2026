<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loading Screen Example</title>
  <style>
    /* Preloader styles */
    #preloader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: white;
      z-index: 9999;
      /* Ensure it stays on top */
    }

    body.loading #preloader {
      display: block;
    }

    body:not(.loading) #preloader {
      display: none;
    }
  </style>
</head>

<body class="loading">
  <div id="preloader"></div>

  <div id="content">

    <html lang="en">

    <head>
      <!-- Required meta tags -->
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <!-- <meta http-equiv="X-UA-Compatible" content="ie=edge"> -->
      <script crossorigin="anonymous"
        src="//assets.squarespace.com/universal/scripts-compressed/commerce-product-reviews-ce4fb4aa89fdf1efae06-min.en-US.js"
        defer=""></script>
      <!-- Bootstrap CSS -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
      <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&amp;display=swap" rel="stylesheet">
      <!-- Bootstrap Icons -->
      <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css"
        rel="stylesheet">
      <!-- External CSS File -->
      <link rel="stylesheet" href="Gaming-UI.css">
      <!-- External JavaScript File -->
      <script src="GAMING-UI.js" defer></script>

      <title>By force</title>

      <script>
        // CORS Proxy Fix for Local Development and Vercel
        // Automatically routes API calls through proxy when needed
        (function () {
          const isLocalhost = window.location.hostname === 'localhost' ||
            window.location.hostname === '127.0.0.1' ||
            window.location.protocol === 'file:';

          const isVercel = window.location.hostname.includes('vercel.app') ||
            window.location.hostname.includes('vercel.com');

          // Use proxy for localhost or Vercel
          if (isLocalhost || isVercel) {
            // Intercept fetch calls to rxid.co.uk and route through proxy
            const originalFetch = window.fetch;
            window.fetch = function (url, options) {
              if (typeof url === 'string' && url.includes('rxid.co.uk')) {
                // Extract the API endpoint
                const apiPath = url.replace('https://rxid.co.uk/', '');
                // Route through proxy (works for both localhost and Vercel)
                const proxyUrl = `/api/${apiPath}`;
                const env = isLocalhost ? 'DEV' : 'VERCEL';
                console.log(`[${env}] Proxying API call: ${url} -> ${proxyUrl}`);
                return originalFetch(proxyUrl, options);
              }
              // For all other URLs, use original fetch
              return originalFetch(url, options);
            };
            const env = isLocalhost ? 'DEV' : 'VERCEL';
            console.log(`[${env}] CORS proxy enabled`);
          }
        })();
      </script>

      <script>
        const style = document.createElement('style');
        style.textContent = '.pdp-selection { display: none !important; }';
        document.head.appendChild(style);
      </script>


      <script>
        document.addEventListener("DOMContentLoaded", () => {
          // Save the active tab ID in a cookie
          function saveLastTab(tabId) {
            document.cookie = `lastTab=${encodeURIComponent(tabId)}; path=/; max-age=900`; // 15 minutes
          }

          // Get the last active tab ID from the cookie
          function getLastTab() {
            const cookies = document.cookie.split("; ");
            const lastTabCookie = cookies.find((row) => row.startsWith("lastTab="));
            return lastTabCookie ? decodeURIComponent(lastTabCookie.split("=")[1]) : null;
          }

          // Restore the last active tab on page load
          const lastTab = getLastTab();
          if (lastTab) {
            const tabTrigger = document.querySelector(`[data-bs-target="#${lastTab}"]`);
            if (tabTrigger) {
              const bootstrapTab = new bootstrap.Tab(tabTrigger);
              bootstrapTab.show(); // Activate the tab
            }
          }

          // Add event listeners to save the active tab when the user switches tabs
          const tabTriggers = document.querySelectorAll('[data-bs-toggle="tab"]');
          tabTriggers.forEach((tab) => {
            tab.addEventListener("shown.bs.tab", (event) => {
              const tabId = event.target.getAttribute("data-bs-target").replace("#", ""); // Extract tab ID
              saveLastTab(tabId); // Save to cookie
            });
          });
        });
      </script>


    </head>

    <body>



      <!-- navbar -->
      <div class="backgroun_clr">
        <div class="container-fluid">
          <div class="home-button-container">
            <a href="https://byforce.uk/">
              <img
                src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/4d4249fd-4f27-4b40-84be-2e7a89c6b195/g836.png?content-type=image%2Fpng"
                alt="Home">
            </a>
          </div>
          <div class="nav" role="tablist">
            <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button"
              role="tab" aria-controls="home" aria-selected="true">
              HOME
            </button>
            <button class="nav-link" id="services-tab" data-bs-toggle="tab" data-bs-target="#services" type="button"
              role="tab" aria-controls="services" aria-selected="false">
              SHOP
            </button>
            <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button"
              role="tab" aria-controls="contact" aria-selected="false">
              GAMES
            </button>

            <button class="nav-link" id="about-tab" data-bs-toggle="tab" data-bs-target="#about" type="button"
              role="tab" aria-controls="about" aria-selected="false">
              ABOUT
            </button>
          </div>
          <!-- Tabs Content -->
          <div class="container home-container">
            <div class="tab-content" id="myTabContent" style="width: 100%">
              <div class="tab-pane fade active show" id="home" role="tabpanel" aria-labelledby="home-tab">
                <!-- Professional Home Page Layout -->

                <div class="d-flex flex-column flex-md-row" style="
                margin-top: 0px;
                margin-right: 0px;
                margin-left: 0px;
                width: 100%;
            ">
                  <!-- Left Content Section -->
                  <div class="home-content">
                    <div class="content-section">
                      <div class="section-content">
                        <div class="section-text">
                          <h3 class="content_heading1" id="typingHeading">Last Call on Iconic All-White AF1s — Half the
                            Price!</h3>
                        </div>
                        <div class="section-image">
                          <img
                            src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/8334c70f-bc8e-41ee-a17d-0e7b2ff8abc9/AIR%2BFORCE%2B1%2B%2707+1.png?content-type=image%2Fpng"
                            alt="AF1s Icon" class="section-icon">
                        </div>
                      </div>
                    </div>

                    <div class="pricing-section">
                      <div class="section-content">
                        <div class="section-text">
                          <h6 class="content_heading2">Limited outlet stock. Authentic. 50% off retail.</h6>
                        </div>
                        <div class="section-image">
                          <img
                            src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/66c05e15-3687-45cb-8ea3-8998eb023792/IMG_4429.PNG?content-type=image%2Fpng"
                            alt="50% OFF Icon" class="section-icon">
                        </div>
                      </div>
                    </div>

                    <div class="section-divider"></div>

                    <div class="urgency-section">
                      <div class="section-content">
                        <div class="section-text">
                          <h6 class="content_heading4">200+ sneakerheads already copped theirs. Sizes are going fast.
                          </h6>
                        </div>
                        <div class="section-image">
                          <img
                            src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/dd955fbb-a93f-4948-94cb-ea6d04dfb3b3/bitmap3.png?content-type=image%2Fpng"
                            alt="Hurry Icon" class="section-icon">
                        </div>
                      </div>
                    </div>

                    <div class="section-divider"></div>

                    <div class="trust-section">
                      <div class="section-content">
                        <div class="section-text">
                          <h6 class="content_heading4">Trusted by over 200 customers so far.</h6>
                          <h6 class="content_heading4">Order yours today to join us on our journey reshaping value for
                            money through quality, style and price.</h6>
                        </div>
                        <div class="section-image">
                          <img
                            src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/e7123f0d-169d-4d29-b3e2-bfa3a2911d04/IMG_4426.PNG?content-type=image%2Fpng"
                            alt="Trust Icon" class="section-icon">
                        </div>
                      </div>
                    </div>

                    <div class="section-divider"></div>

                    <!-- New Section 5: Product Benefits -->
                    <div class="benefits-section">
                      <div class="section-content">
                        <div class="section-text">
                          <h6 class="content_heading4">Premium comfort, classic style, built to last. Your perfect
                            everyday sneaker.</h6>
                        </div>
                        <div class="section-image">
                          <img
                            src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/bf8e750f-1106-425f-9a1a-2ec5dae426ba/IMG_4427.PNG?content-type=image%2Fpng"
                            alt="Premium Icon" class="section-icon">
                        </div>
                      </div>
                    </div>

                    <div class="section-divider"></div>

                    <!-- New Section 6: Shipping & Delivery -->
                    <div class="shipping-section">
                      <div class="section-content">
                        <div class="section-text">
                          <h6 class="content_heading4">Free UK delivery within 3-5 days. International shipping
                            available.</h6>
                        </div>
                        <div class="section-image">
                          <img
                            src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/8a36b303-694b-4acb-af57-1b411c3ec783/image1382.png?content-type=image%2Fpng"
                            alt="Shipping Icon" class="section-icon">
                        </div>
                      </div>
                    </div>

                    <div class="section-divider"></div>
                    <!-- New Section 7: Limited Time Offer -->
                    <div class="urgency-section">
                      <div class="section-content">
                        <div class="section-text">
                          <h6 class="content_heading4">Limited stock available. Don't miss out on these incredible
                            prices!</h6>
                        </div>
                        <div class="section-image">
                          <img
                            src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/737da395-5fc9-467a-b4c3-ed1d126bbdd4/bitmap_g1120.png?content-type=image%2Fpng"
                            alt="Limited Stock Icon" class="section-icon">
                        </div>
                      </div>
                    </div>

                    <div class="cta-section">
                      <button class="btn btn-light btn_class home-cta-btn" type="button" id="buyNowBtn">
                        <span>Shop & Save Now</span>
                      </button>
                    </div>
                  </div>

                  <!-- Right Image Section -->
                  <div class="home-image">
                    <div class="image-container">
                      <img
                        src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/737da395-5fc9-467a-b4c3-ed1d126bbdd4/bitmap_g1120.png?content-type=image%2Fpng"
                        alt="All-White AF1s Sneakers" class="responsive-image">
                      <div class="image-overlay"></div>
                    </div>


                  </div>
                </div>

                <script>
                  document.addEventListener('DOMContentLoaded', () => {
                    const buyBtn = document.getElementById('buyNowBtn');
                    const shopTab = document.getElementById('services-tab');   // the real tab

                    if (buyBtn && shopTab) {
                      buyBtn.addEventListener('click', () => shopTab.click());  // ← simulate click
                    }
                  });
                </script>

              </div>
              <div class="tab-pane fade" id="services" role="tabpanel" aria-labelledby="services-tab">
                <div class="deals-section-container d-flex justify-content-center flex-column align-items-center">
                  <h3 class=" content_heading1 deals-heading">Deals That Move: Single Pairs, Multipacks, Big Savings
                  </h3>
                  <div class="trust-reminder professional-trust-box">
                    <h6 class="content_heading4 trust-heading-text">All sizes stocked, authentic, and
                      shipped directly from outlet—no markups, just value.</h6>
                  </div>
                </div>

                <div class="paynowButtons">

                  <script>
                    const bundleToButtonMapping = {
                      'bundle-12-selectedSizes': 'updateOptionsButton12',
                      'bundle-12-selectedSizesB': 'updateOptionsButton12B',
                      'bundle-7-selectedSizes': 'updateOptionsButton7',
                      'bundle-7-selectedSizesB': 'updateOptionsButton7B',
                      'bundle-3-selectedSizes': 'updateOptionsButton3',
                      'bundle-3-selectedSizesB': 'updateOptionsButton3B',
                      'bundle-selectedSizes': 'updateOptionsButton1',
                      'bundle-selectedSizesB': 'updateOptionsButton1B',
                    };

                    function updatePayNowButtonsVisibility() {
                      console.log('updatePayNowButtonsVisibility called');

                      // Don't hide all buttons - only hide those without selections
                      // This prevents hiding buttons that already have selections

                      // Check each button and show if there's a valid selection
                      Object.keys(bundleToButtonMapping).forEach(containerId => {
                        const container = document.getElementById(containerId);
                        if (container) {
                          const additionalContent = container.closest('.additionalContent');
                          const btnId = bundleToButtonMapping[containerId];
                          const btn = document.getElementById(btnId);

                          if (!btn) return;

                          // Check if there's a valid selection
                          let hasSelection = false;
                          if (container.dataset.selectedSizeData) {
                            try {
                              const data = JSON.parse(container.dataset.selectedSizeData);
                              hasSelection = Array.isArray(data) && data.length > 0;
                              console.log(`Container ${containerId}: hasSelection=${hasSelection}, data:`, data);
                            } catch (e) {
                              hasSelection = false;
                              console.log(`Container ${containerId}: parse error`, e);
                            }
                          }

                          // Check if overlay is open
                          const isOpen = additionalContent && additionalContent.classList.contains('open');
                          console.log(`Container ${containerId}: isOpen=${isOpen}, hasSelection=${hasSelection}`);

                          // Show button if there's a valid selection AND overlay is open
                          // Once shown, button stays visible forever (we never set display to none)
                          if (isOpen && hasSelection) {
                            console.log(`Showing button: ${btnId} - will stay visible permanently`);
                            btn.style.setProperty('display', 'flex', 'important');
                            btn.style.setProperty('justify-content', 'center', 'important');
                            btn.style.setProperty('align-items', 'center', 'important');
                            // Mark button as permanently visible
                            btn.setAttribute('data-permanently-visible', 'true');
                          }

                          // If button was already shown before, keep it visible
                          if (btn.getAttribute('data-permanently-visible') === 'true') {
                            btn.style.setProperty('display', 'flex', 'important');
                            btn.style.setProperty('justify-content', 'center', 'important');
                            btn.style.setProperty('align-items', 'center', 'important');
                          }
                        }
                      });
                    }

                    // Initialize button visibility on page load
                    document.addEventListener('DOMContentLoaded', function () {
                      console.log('Initializing button visibility');
                      updatePayNowButtonsVisibility();
                    });
                  </script>


                </div>

                <!-- Email Capture JavaScript -->
                <script>
                  class EmailCaptureSystem {
                    constructor() {
                      this.overlay = document.getElementById('emailCaptureOverlay');
                      this.emailInput = document.getElementById('captureEmailInput');
                      this.sendCodeBtn = document.getElementById('sendCodeBtn');
                      this.verifyCodeBtn = document.getElementById('verifyCodeBtn');
                      this.resendCodeBtn = document.getElementById('resendCodeBtn');
                      this.codeInputs = document.querySelectorAll('.code-digit');

                      this.emailStage = document.getElementById('emailStage');
                      this.codeStage = document.getElementById('codeStage');
                      this.loadingStage = document.getElementById('loadingStage');

                      this.currentEmail = '';
                      this.isVerified = false;

                      this.init();
                    }

                    init() {
                      // Check if user is already verified
                      if (localStorage.getItem('emailVerified') === 'true') {
                        this.hideOverlay();
                        return;
                      }

                      this.setupEventListeners();
                      this.setupCodeInputs();

                      // Only show overlay if we're on the SHOP tab
                      const servicesTab = document.getElementById('services');
                      const isServicesTabActive = servicesTab && servicesTab.classList.contains('active') && servicesTab.classList.contains('show');

                      if (isServicesTabActive) {
                        this.showOverlay();
                      }
                    }

                    setupEventListeners() {
                      // Send code button
                      this.sendCodeBtn.addEventListener('click', () => this.sendCode());

                      // Email input enter key
                      this.emailInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                          this.sendCode();
                        }
                      });

                      // Verify code button
                      this.verifyCodeBtn.addEventListener('click', () => this.verifyCode());

                      // Resend code button
                      this.resendCodeBtn.addEventListener('click', () => this.resendCode());

                      // Close button
                      const closeBtn = document.getElementById('closeEmailCaptureBtn');
                      if (closeBtn) {
                        closeBtn.addEventListener('click', () => this.closeAndRedirect());
                      }
                    }

                    setupCodeInputs() {
                      this.codeInputs.forEach((input, index) => {
                        // Only allow numbers
                        input.addEventListener('input', (e) => {
                          const value = e.target.value.replace(/[^0-9]/g, '');
                          e.target.value = value;

                          // Auto-advance to next input
                          if (value.length === 1 && index < this.codeInputs.length - 1) {
                            this.codeInputs[index + 1].focus();
                          }

                          // Auto-verify when all digits filled
                          if (index === this.codeInputs.length - 1 && value.length === 1) {
                            setTimeout(() => this.verifyCode(), 300);
                          }
                        });

                        // Handle backspace
                        input.addEventListener('keydown', (e) => {
                          if (e.key === 'Backspace' && !e.target.value && index > 0) {
                            this.codeInputs[index - 1].focus();
                          }
                        });

                        // Handle paste
                        input.addEventListener('paste', (e) => {
                          e.preventDefault();
                          const paste = (e.clipboardData || window.clipboardData).getData('text');
                          const numbers = paste.replace(/[^0-9]/g, '').slice(0, 6);

                          numbers.split('').forEach((digit, i) => {
                            if (this.codeInputs[i]) {
                              this.codeInputs[i].value = digit;
                            }
                          });

                          if (numbers.length === 6) {
                            setTimeout(() => this.verifyCode(), 300);
                          }
                        });
                      });
                    }

                    async sendCode() {
                      const email = this.emailInput.value.trim();

                      if (!email || !this.isValidEmail(email)) {
                        this.showError('Please enter a valid email address');
                        return;
                      }

                      this.currentEmail = email;
                      this.showLoading('Sending verification code...');

                      try {
                        const response = await fetch('https://rxid.co.uk/generate_login_code', {
                          method: 'POST',
                          headers: {
                            'Content-Type': 'application/json',
                          },
                          body: JSON.stringify({ email: email })
                        });

                        const data = await response.json();

                        if (data.status === 'success') {
                          this.showCodeStage();
                          this.showSuccess('Verification code sent to your email!');
                        } else {
                          this.showEmailStage();
                          this.showError(data.message || 'Failed to send verification code');
                        }
                      } catch (error) {
                        this.showEmailStage();
                        this.showError('Network error. Please try again.');
                        console.error('Error sending code:', error);
                      }
                    }

                    async verifyCode() {
                      const code = Array.from(this.codeInputs).map(input => input.value).join('');

                      if (code.length !== 6) {
                        this.showError('Please enter all 6 digits');
                        return;
                      }

                      this.showLoading('Verifying code...');

                      try {
                        const response = await fetch('https://rxid.co.uk/verify_login_code', {
                          method: 'POST',
                          headers: {
                            'Content-Type': 'application/json',
                          },
                          body: JSON.stringify({
                            email: this.currentEmail,
                            code: code
                          })
                        });

                        const data = await response.json();

                        if (data.status === 'success') {
                          this.isVerified = true;
                          localStorage.setItem('emailVerified', 'true');
                          localStorage.setItem('userEmail', this.currentEmail);
                          this.showSuccess('Access granted! Welcome to our exclusive offer!');

                          setTimeout(() => {
                            this.hideOverlay();
                          }, 1500);
                        } else {
                          this.showCodeStage();
                          this.showError(data.message || 'Invalid verification code');
                          // Don't clear code inputs on error - let user try again
                        }
                      } catch (error) {
                        this.showCodeStage();
                        this.showError('Network error. Please try again.');
                        console.error('Error verifying code:', error);
                      }
                    }

                    async resendCode() {
                      if (!this.currentEmail) return;

                      this.showLoading('Resending code...');

                      try {
                        const response = await fetch('https://rxid.co.uk/generate_login_code', {
                          method: 'POST',
                          headers: {
                            'Content-Type': 'application/json',
                          },
                          body: JSON.stringify({ email: this.currentEmail })
                        });

                        const data = await response.json();

                        if (data.status === 'success') {
                          this.showCodeStage();
                          this.showSuccess('New verification code sent!');
                          // Don't clear code inputs - user might want to see what they entered
                        } else {
                          this.showCodeStage();
                          this.showError('Failed to resend code. Please try again.');
                        }
                      } catch (error) {
                        this.showCodeStage();
                        this.showError('Network error. Please try again.');
                        console.error('Error resending code:', error);
                      }
                    }

                    showEmailStage() {
                      this.hideAllStages();
                      this.emailStage.style.display = 'block';
                    }

                    showCodeStage() {
                      this.hideAllStages();
                      this.codeStage.style.display = 'block';
                      // Focus first code input
                      setTimeout(() => {
                        this.codeInputs[0].focus();
                      }, 100);
                    }

                    showLoading(message) {
                      this.hideAllStages();
                      this.loadingStage.style.display = 'block';
                      this.loadingStage.querySelector('.loading-text').textContent = message;
                    }

                    hideAllStages() {
                      this.emailStage.style.display = 'none';
                      this.codeStage.style.display = 'none';
                      this.loadingStage.style.display = 'none';
                    }

                    showOverlay() {
                      this.overlay.style.display = 'flex';
                      // Prevent body scrolling when overlay is open
                      document.body.style.overflow = 'hidden';
                    }

                    hideOverlay() {
                      this.overlay.style.display = 'none';
                      this.overlay.classList.add('verified');
                      // Restore body scrolling when overlay is closed
                      document.body.style.overflow = '';

                      // Enable shopping functionality
                      const carouselContainer = document.querySelector('.carousel-container');
                      if (carouselContainer) {
                        carouselContainer.style.filter = 'none';
                        carouselContainer.style.opacity = '1';
                        carouselContainer.style.pointerEvents = 'auto';
                      }
                    }

                    clearCodeInputs() {
                      this.codeInputs.forEach(input => input.value = '');
                      this.codeInputs[0].focus();
                    }

                    isValidEmail(email) {
                      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                      return emailRegex.test(email);
                    }

                    showError(message) {
                      // Create temporary error message
                      const errorDiv = document.createElement('div');
                      errorDiv.style.cssText = `
                            position: fixed;
                            top: 20px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: #ff4757;
                            color: white;
                            padding: 15px 25px;
                            border-radius: 8px;
                            font-family: "Press Start 2P", system-ui;
                            font-size: 10px;
                            z-index: 10002;
                            animation: slideDown 0.3s ease-out;
                        `;
                      errorDiv.textContent = message;
                      document.body.appendChild(errorDiv);

                      setTimeout(() => {
                        errorDiv.style.animation = 'fadeOut 0.3s ease-out';
                        setTimeout(() => errorDiv.remove(), 300);
                      }, 3000);
                    }

                    showSuccess(message) {
                      // Create temporary success message
                      const successDiv = document.createElement('div');
                      successDiv.style.cssText = `
                            position: fixed;
                            top: 20px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: #2ed573;
                            color: white;
                            padding: 15px 25px;
                            border-radius: 8px;
                            font-family: "Press Start 2P", system-ui;
                            font-size: 10px;
                            z-index: 10002;
                            animation: slideDown 0.3s ease-out;
                        `;
                      successDiv.textContent = message;
                      document.body.appendChild(successDiv);

                      setTimeout(() => {
                        successDiv.style.animation = 'fadeOut 0.3s ease-out';
                        setTimeout(() => successDiv.remove(), 300);
                      }, 3000);
                    }

                    closeAndRedirect() {
                      // Hide the email capture overlay
                      this.hideOverlay();

                      // Redirect to home page
                      const homeTab = document.getElementById('home-tab');
                      if (homeTab) {
                        homeTab.click();
                      }
                    }
                  }

                  // Initialize email capture system only once
                  let emailCaptureInstance = null;

                  document.addEventListener('DOMContentLoaded', () => {
                    // Ensure body scrolling is enabled by default on page load
                    document.body.style.overflow = '';

                    // Function to restore body scrolling
                    function restoreBodyScroll() {
                      document.body.style.overflow = '';
                    }

                    // Initialize email capture system only once
                    const servicesTab = document.getElementById('services');
                    if (servicesTab && !emailCaptureInstance) {
                      emailCaptureInstance = new EmailCaptureSystem();
                    }

                    // Handle services tab (SHOP tab) switching
                    const servicesTabButton = document.getElementById('services-tab');
                    if (servicesTabButton) {
                      servicesTabButton.addEventListener('shown.bs.tab', () => {
                        // Only show overlay if not verified and system is initialized
                        if (localStorage.getItem('emailVerified') !== 'true' && emailCaptureInstance) {
                          emailCaptureInstance.showOverlay();
                        } else {
                          // Hide overlay if already verified
                          const overlay = document.getElementById('emailCaptureOverlay');
                          if (overlay) {
                            overlay.style.display = 'none';
                            overlay.classList.add('verified');
                            restoreBodyScroll();
                          }
                        }
                      });
                    }

                    // Handle all other tabs - restore scrolling when switching away from services
                    const allTabButtons = document.querySelectorAll('[data-bs-toggle="tab"]');
                    allTabButtons.forEach((tabButton) => {
                      tabButton.addEventListener('shown.bs.tab', (event) => {
                        const targetTab = event.target.getAttribute('data-bs-target');
                        // If switching to any tab other than services, restore scrolling
                        if (targetTab !== '#services') {
                          restoreBodyScroll();
                          // Also hide overlay if it's open
                          const overlay = document.getElementById('emailCaptureOverlay');
                          if (overlay) {
                            overlay.style.display = 'none';
                          }
                        }
                      });
                    });

                    // Ensure scrolling is restored on initial page load if not on services tab
                    const activeTab = document.querySelector('.nav-link.active');
                    if (activeTab) {
                      const activeTabTarget = activeTab.getAttribute('data-bs-target');
                      if (activeTabTarget !== '#services') {
                        restoreBodyScroll();
                      } else {
                        // If on services tab, check overlay visibility
                        manageScrollForOverlay();
                      }
                    } else {
                      // Default: allow scrolling on page load
                      restoreBodyScroll();
                    }
                  });

                  // Add reset function for testing
                  window.resetEmailVerification = function () {
                    localStorage.removeItem('emailVerified');
                    localStorage.removeItem('userEmail');
                    location.reload();
                  };
                </script>
                <style>
                  /* Responsive fix for Email Capture Overlay on small screens */
                  @media (max-width: 600px) {
                    #emailCaptureOverlay {
                      height: 100vh !important;
                      min-height: 100vh;
                      padding: 0;
                      top: 0;
                      left: 0;
                      align-items: center !important;
                      justify-content: center !important;
                      background: none !important;
                      overflow: visible !important;
                      /* Ensure popup can overflow the overlay */
                    }

                    .email-capture-modal {
                      width: 94vw !important;
                      max-width: 97vw;
                      min-width: unset;
                      /* Center the modal */
                      margin: 0 auto !important;
                      border-radius: 14px;
                      padding: 22px 15px 30px 15px !important;
                      position: relative;
                    }

                    .padlock-container {
                      gap: 8px;
                      margin-bottom: 6px !important;
                    }

                    .padlock-icon,
                    .email-icon {
                      font-size: 22px !important;
                    }

                    .capture-title {
                      font-size: 1.0rem !important;
                      letter-spacing: 0 !important;
                    }

                    .capture-subtitle {
                      font-size: 0.71rem !important;
                      margin-bottom: 10px !important;
                    }

                    .email-input-container {
                      flex-direction: column;
                      gap: 7px !important;
                    }

                    #captureEmailInput {
                      font-size: 0.92rem !important;
                      padding: 10px 11px;
                      border-radius: 7px;
                    }

                    #sendCodeBtn {
                      width: 100%;
                      font-size: 0.95rem !important;
                      padding: 11px 0 !important;
                    }

                    .code-input-container {
                      gap: 8px !important;
                      justify-content: center;
                      margin-bottom: 12px;
                    }

                    .code-digit {
                      width: 29px !important;
                      height: 36px !important;
                      font-size: 1.1rem !important;
                      border-radius: 7px !important;
                    }

                    .email-capture-close-btn {
                      font-size: 1.5rem !important;
                      top: 12px !important;
                      right: 10px !important;
                    }

                    .email-capture-modal {
                      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.22);
                      /* Keep modal centered */
                      transform: none;
                    }
                  }

                  /* General fix to ensure highest z-index on overlay elements in mobile */
                  #emailCaptureOverlay,
                  .email-capture-modal {
                    z-index: 99999 !important;
                  }
                </style>


                <div class="carousel-container">
                  <div class="products and order">
                    <!-- Cart‑loading spinner -->
                    <div id="cartSpinner" aria-hidden="true">
                      <div class="spinner"></div>
                    </div>

                    <style>
                      /* --- cart‑loading spinner --- */
                      #cartSpinner {
                        display: none;
                        /* toggled with JS  */
                        position: fixed;
                        inset: 0;
                        /* full‑screen overlay              */
                        background: rgba(255 255 255 / .6);
                        /* translucent white “wash”         */
                        z-index: 10000;
                        /* above everything but modals      */
                        backdrop-filter: blur(2px);
                        /* optional: soft blur of page      */
                      }

                      /* the actual spinner glyph */
                      #cartSpinner .spinner {
                        width: 3rem;
                        height: 3rem;
                        border: .4rem solid #b5c7ff;
                        border-top-color: #3053ff;
                        border-radius: 50%;
                        animation: spin .8s linear infinite;
                        /* centre in the viewport */
                        position: absolute;
                        left: 50%;
                        top: 50%;
                        transform: translate(-50%, -50%);
                      }

                      @keyframes spin {
                        to {
                          transform: rotate(360deg);
                        }
                      }

                      /* optional visual cue on the disabled buttons */
                      .buynow:disabled {
                        opacity: .5;
                        cursor: not-allowed;
                      }

                      /* Email Capture Overlay Styles */
                      .email-capture-overlay {
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: linear-gradient(135deg, rgba(28, 154, 201, 0.95) 0%, rgba(128, 221, 184, 0.95) 100%);
                        backdrop-filter: blur(8px);
                        -webkit-backdrop-filter: blur(8px);
                        z-index: 10001;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        animation: modalFadeIn 0.4s ease;
                        overflow: hidden;
                      }

                      /* Removed animated particles background - using gradient only for better performance */



                      /* Removed animated cursor elements for better performance */

                      .email-capture-modal {
                        background: linear-gradient(180deg, #5BC8C8, #80DDB8);
                        border: 5px solid rgba(255, 255, 255, 0.4);
                        border-radius: 25px;
                        padding: 40px;
                        max-width: 500px;
                        width: 90%;
                        margin: 0 auto;
                        text-align: center;
                        color: white;
                        font-family: "Press Start 2P", system-ui;
                        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4), 0 0 100px rgba(91, 200, 200, 0.3);
                        position: relative;
                        z-index: 1;
                        animation: modalPop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                        overflow: hidden;
                      }

                      .email-capture-modal::before {
                        content: '';
                        position: absolute;
                        top: -50%;
                        left: -50%;
                        width: 200%;
                        height: 200%;
                        background: linear-gradient(45deg, transparent 40%, rgba(255, 255, 255, 0.2) 50%, transparent 60%);
                        animation: sparkleMove 3s linear infinite;
                        pointer-events: none;
                      }

                      /* Close Button Styles */
                      .email-capture-close-btn {
                        position: absolute;
                        top: 15px;
                        right: 20px;
                        background: rgba(255, 255, 255, 0.2);
                        border: 2px solid rgba(255, 255, 255, 0.3);
                        color: white;
                        font-size: 24px;
                        font-weight: bold;
                        width: 40px;
                        height: 40px;
                        border-radius: 50%;
                        cursor: pointer;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        transition: all 0.3s ease;
                        z-index: 10003;
                        font-family: Arial, sans-serif;
                      }

                      .email-capture-close-btn:hover {
                        background: rgba(255, 255, 255, 0.3);
                        border-color: rgba(255, 255, 255, 0.5);
                        transform: scale(1.1);
                      }

                      .email-capture-close-btn:active {
                        transform: scale(0.95);
                      }

                      /* Mobile Responsive Close Button */
                      @media (max-width: 768px) {
                        .email-capture-close-btn {
                          top: 10px;
                          right: 15px;
                          width: 35px;
                          height: 35px;
                          font-size: 20px;
                        }
                      }

                      @media (max-width: 480px) {
                        .email-capture-close-btn {
                          top: 8px;
                          right: 12px;
                          width: 30px;
                          height: 30px;
                          font-size: 18px;
                        }
                      }

                      .padlock-container {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        gap: 10px;
                        margin-bottom: 25px;
                        animation: bounce 0.6s ease-in-out;
                        position: relative;
                        z-index: 1;
                      }

                      .padlock-icon,
                      .email-icon {
                        font-size: 40px;
                        filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
                      }

                      .capture-title {
                        font-size: 16px;
                        color: white;
                        margin-bottom: 15px;
                        text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.2);
                        line-height: 22px;
                        position: relative;
                        z-index: 1;
                        animation: headingBounce 2s ease-in-out infinite;
                        display: inline-block;
                      }

                      .capture-subtitle {
                        font-size: 10px;
                        color: rgba(255, 255, 255, 0.9);
                        margin-bottom: 30px;
                        line-height: 16px;
                        position: relative;
                        z-index: 1;
                      }

                      .capture-stage {
                        min-height: 120px;
                        position: relative;
                        z-index: 1;
                      }

                      .email-input-container {
                        display: flex;
                        flex-direction: column;
                        gap: 15px;
                        align-items: center;
                      }

                      #captureEmailInput {
                        width: 100%;
                        max-width: 350px;
                        padding: 15px;
                        border: 2px solid #047098;
                        border-radius: 8px;
                        font-size: 14px;
                        font-family: "Press Start 2P", system-ui;
                        background: white;
                        color: #047098;
                        text-align: center;
                      }

                      #captureEmailInput::placeholder {
                        color: #047098;
                        opacity: 0.7;
                        font-size: 10px;
                      }

                      #captureEmailInput:focus {
                        outline: none;
                        border-color: #36c1f5;
                        box-shadow: 0 0 10px rgba(54, 193, 245, 0.5);
                      }

                      .capture-btn {
                        font-family: 'Press Start 2P', system-ui, sans-serif;
                        font-size: 11px;
                        padding: 15px 40px;
                        background: linear-gradient(180deg, #fff, #f0f0f0);
                        color: #333;
                        border: 3px solid #ddd;
                        border-radius: 10px;
                        cursor: pointer;
                        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                        box-shadow:
                          0 6px 0 #bbb,
                          0 10px 25px rgba(0, 0, 0, 0.2),
                          inset 0 1px 0 rgba(255, 255, 255, 1);
                        position: relative;
                        overflow: hidden;
                        animation: tutorialBtnPulse 2s ease-in-out infinite;
                      }

                      .audio-button {
                        background: linear-gradient(180deg,
                            rgba(215, 249, 248, 0.95) 0%,
                            rgba(215, 249, 248, 0.95) 50%,
                            rgba(215, 249, 248, 0.95) 100%);
                        border-radius: 18px;
                        padding: 30px;
                        margin-left: auto;
                        margin-right: auto;
                        max-width: 1200px;
                        width: 100%;
                        box-shadow:
                          0 20px 60px rgba(0, 0, 0, 0.18),
                          0 0 80px rgba(91, 200, 200, 0.15),
                          inset 0 2px 0 rgba(255, 255, 255, 0.9),
                          inset 0 -2px 0 rgba(0, 0, 0, 0.05);
                        border: 4px solid rgba(100, 200, 180, 0.5);
                        position: relative;
                        z-index: 1;
                        animation: cardEntry 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
                        overflow: hidden;
                        display: flex;
                        flex-direction: row;
                        gap: 40px;
                        color: #26706f;
                        align-items: center;
                        justify-content: center;
                      }

                      .capture-btn::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: -100%;
                        width: 100%;
                        height: 100%;
                        background: linear-gradient(90deg, transparent, rgba(91, 200, 200, 0.3), transparent);
                        transition: left 0.5s ease;
                      }

                      .capture-btn:hover::before {
                        left: 100%;
                      }

                      .capture-btn:hover {
                        transform: translateY(-5px) scale(1.05);
                        box-shadow:
                          0 12px 0 #bbb,
                          0 18px 35px rgba(0, 0, 0, 0.25),
                          0 0 30px rgba(91, 200, 200, 0.4);
                        color: #222;
                        background: linear-gradient(180deg, #fff 0%, #fff 50%, #f0f0f0 100%);
                      }

                      .capture-btn:active {
                        transform: translateY(4px) scale(0.98);
                        box-shadow: 0 2px 0 #bbb;
                      }

                      .capture-btn-secondary {
                        font-family: 'Press Start 2P', system-ui, sans-serif;
                        font-size: 11px;
                        padding: 15px 40px;
                        background: linear-gradient(180deg, #fff, #f0f0f0);
                        color: #333;
                        border: 3px solid #ddd;
                        border-radius: 10px;
                        cursor: pointer;
                        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                        box-shadow:
                          0 6px 0 #bbb,
                          0 10px 25px rgba(0, 0, 0, 0.2),
                          inset 0 1px 0 rgba(255, 255, 255, 1);
                        position: relative;
                        overflow: hidden;
                        animation: tutorialBtnPulse 2s ease-in-out infinite;
                        margin-top: 10px;
                        text-transform: none;
                        letter-spacing: normal;
                        width: auto;
                        max-width: none;
                      }

                      .capture-btn-secondary::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: -100%;
                        width: 100%;
                        height: 100%;
                        background: linear-gradient(90deg, transparent, rgba(91, 200, 200, 0.3), transparent);
                        transition: left 0.5s ease;
                      }

                      .capture-btn-secondary:hover::before {
                        left: 100%;
                      }

                      .capture-btn-secondary:hover {
                        transform: translateY(-5px) scale(1.05);
                        box-shadow:
                          0 12px 0 #bbb,
                          0 18px 35px rgba(0, 0, 0, 0.25),
                          0 0 30px rgba(91, 200, 200, 0.4);
                        color: #222;
                        background: linear-gradient(180deg, #fff 0%, #fff 50%, #f0f0f0 100%);
                      }

                      .capture-btn-secondary:active {
                        transform: translateY(4px) scale(0.98);
                        box-shadow: 0 2px 0 #bbb;
                      }

                      .code-instruction {
                        font-size: 10px;
                        color: rgba(255, 255, 255, 0.9);
                        margin-bottom: 20px;
                        line-height: 16px;
                      }

                      .code-input-container {
                        display: flex;
                        justify-content: center;
                        gap: 10px;
                        margin-bottom: 20px;
                      }

                      .code-digit {
                        width: 45px;
                        height: 45px;
                        border: 2px solid white;
                        border-radius: 8px;
                        background: rgba(255, 255, 255, 0.1);
                        color: white;
                        font-family: "Press Start 2P", system-ui;
                        font-size: 18px;
                        text-align: center;
                        backdrop-filter: blur(10px);
                        -webkit-backdrop-filter: blur(10px);
                        transition: all 0.3s ease;
                      }

                      .code-digit:focus {
                        outline: none;
                        border-color: #FFD700;
                        background: rgba(255, 255, 255, 0.2);
                        box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
                        transform: scale(1.1);
                      }

                      .loading-spinner {
                        width: 40px;
                        height: 40px;
                        border: 4px solid rgba(255, 255, 255, 0.3);
                        border-top: 4px solid white;
                        border-radius: 50%;
                        animation: spin 1s linear infinite;
                        margin: 0 auto 20px;
                      }

                      .loading-text {
                        font-size: 10px;
                        color: rgba(255, 255, 255, 0.9);
                        line-height: 16px;
                      }

                      @keyframes fadeIn {
                        from {
                          opacity: 0;
                        }

                        to {
                          opacity: 1;
                        }
                      }

                      @keyframes slideUp {
                        from {
                          opacity: 0;
                          transform: translateY(50px) scale(0.9);
                        }

                        to {
                          opacity: 1;
                          transform: translateY(0) scale(1);
                        }
                      }

                      @keyframes bounce {

                        0%,
                        20%,
                        50%,
                        80%,
                        100% {
                          transform: translateY(0);
                        }

                        40% {
                          transform: translateY(-10px);
                        }

                        60% {
                          transform: translateY(-5px);
                        }
                      }

                      @keyframes spin {
                        0% {
                          transform: rotate(0deg);
                        }

                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes slideDown {
                        from {
                          opacity: 0;
                          transform: translateX(-50%) translateY(-20px);
                        }

                        to {
                          opacity: 1;
                          transform: translateX(-50%) translateY(0);
                        }
                      }

                      @keyframes fadeOut {
                        from {
                          opacity: 1;
                        }

                        to {
                          opacity: 0;
                        }
                      }

                      /* Hide products initially */
                      .email-capture-overlay~.carousel-container {
                        filter: blur(3px);
                        opacity: 0.3;
                        pointer-events: none;
                      }

                      .email-capture-overlay.verified~.carousel-container {
                        filter: none;
                        opacity: 1;
                        pointer-events: auto;
                        transition: all 0.5s ease;
                      }

                      /* ALL-WHITES and ALL-BLACKS Heading Styles */
                      .section-heading.all-whites-heading,
                      .section-heading.all-blacks-heading {
                        font-family: "Press Start 2P", system-ui !important;
                        font-size: 28px !important;
                        color: #FFFFFF !important;
                        margin: 30px 0 15px 0 !important;
                        padding: 0 !important;
                        text-shadow:
                          2px 2px 4px rgba(0, 0, 0, 0.6),
                          0 0 10px rgba(255, 255, 255, 0.4),
                          0 0 20px rgba(54, 193, 245, 0.5) !important;
                        position: relative;
                        display: inline-block;
                        animation: headingBounce 2s ease-in-out infinite !important;
                        letter-spacing: 2px !important;
                        line-height: 1.5 !important;
                      }

                      .section-heading.all-whites-heading::after,
                      .section-heading.all-blacks-heading::after {
                        content: '';
                        position: absolute;
                        bottom: -12px;
                        left: 0;
                        width: 100%;
                        height: 4px;
                        background: linear-gradient(90deg,
                            rgba(54, 193, 245, 0.8) 0%,
                            rgba(4, 112, 152, 0.9) 25%,
                            rgba(54, 193, 245, 0.8) 50%,
                            rgba(4, 112, 152, 0.9) 75%,
                            rgba(54, 193, 245, 0.8) 100%);
                        background-size: 200% 100%;
                        border-radius: 2px;
                        animation: gradientShine 3s ease-in-out infinite, gradientMove 4s linear infinite !important;
                        box-shadow:
                          0 0 10px rgba(54, 193, 245, 0.6),
                          0 0 20px rgba(54, 193, 245, 0.4) !important;
                      }

                      .section-heading.all-whites-heading::before,
                      .section-heading.all-blacks-heading::before {
                        content: '';
                        position: absolute;
                        bottom: -12px;
                        left: -100%;
                        width: 50%;
                        height: 4px;
                        background: linear-gradient(90deg,
                            transparent,
                            rgba(255, 255, 255, 0.8),
                            transparent);
                        border-radius: 2px;
                        animation: shinySweep 3s ease-in-out infinite !important;
                        z-index: 1;
                      }

                      @keyframes headingBounce {

                        0%,
                        100% {
                          transform: translateY(0);
                        }

                        25% {
                          transform: translateY(-4px);
                        }

                        50% {
                          transform: translateY(0);
                        }

                        75% {
                          transform: translateY(-2px);
                        }
                      }

                      @keyframes gradientShine {

                        0%,
                        100% {
                          box-shadow:
                            0 0 10px rgba(54, 193, 245, 0.6),
                            0 0 20px rgba(54, 193, 245, 0.4);
                        }

                        50% {
                          box-shadow:
                            0 0 20px rgba(54, 193, 245, 0.9),
                            0 0 40px rgba(54, 193, 245, 0.7),
                            0 0 60px rgba(54, 193, 245, 0.5);
                        }
                      }

                      @keyframes gradientMove {
                        0% {
                          background-position: 0% 50%;
                        }

                        100% {
                          background-position: 200% 50%;
                        }
                      }

                      @keyframes shinySweep {
                        0% {
                          left: -100%;
                          opacity: 0;
                        }

                        50% {
                          left: 100%;
                          opacity: 1;
                        }

                        100% {
                          left: 100%;
                          opacity: 0;
                        }
                      }

                      .section-heading.all-whites-heading:hover,
                      .section-heading.all-blacks-heading:hover {
                        animation: headingBounce 1s ease-in-out infinite !important;
                        text-shadow:
                          2px 2px 4px rgba(0, 0, 0, 0.7),
                          0 0 15px rgba(255, 255, 255, 0.6),
                          0 0 30px rgba(54, 193, 245, 0.7),
                          0 0 45px rgba(54, 193, 245, 0.5) !important;
                      }

                      .section-heading.all-whites-heading:hover::after,
                      .section-heading.all-blacks-heading:hover::after {
                        animation: gradientShine 1.5s ease-in-out infinite, gradientMove 2s linear infinite !important;
                        height: 5px;
                      }

                      .section-heading.all-whites-heading:hover::before,
                      .section-heading.all-blacks-heading:hover::before {
                        animation-duration: 1.5s;
                        width: 60%;
                      }

                      /* Navigation Controls Container */
                      .section-nav-controls {
                        display: flex;
                        align-items: center;
                        justify-content: flex-start;
                        gap: 20px;
                        margin: 20px 0 10px 0;
                        position: relative;
                        width: 100%;
                      }

                      /* Buttons Group */
                      .nav-buttons-group {
                        display: flex;
                        align-items: center;
                        gap: 10px;
                        margin-left: auto;
                      }

                      /* Gaming Style Navigation Buttons */
                      .nav-btn {
                        font-family: "Press Start 2P", system-ui !important;
                        color: #FFFFFF !important;
                        background: linear-gradient(135deg,
                            rgba(4, 112, 152, 0.9) 0%,
                            rgba(54, 193, 245, 0.8) 50%,
                            rgba(4, 112, 152, 0.9) 100%);
                        border: 3px solid rgba(149, 222, 167, 0.8);
                        border-radius: 8px;
                        padding: 12px 16px;
                        cursor: pointer;
                        position: relative;
                        overflow: hidden;
                        box-shadow:
                          0 4px 8px rgba(0, 0, 0, 0.4),
                          0 0 15px rgba(54, 193, 245, 0.5),
                          inset 0 1px 0 rgba(255, 255, 255, 0.3);
                        transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        width: 50px;
                        height: 50px;
                        z-index: 10;
                        text-shadow:
                          2px 2px 4px rgba(0, 0, 0, 0.8),
                          0 0 8px rgba(255, 255, 255, 0.5);
                        will-change: transform, box-shadow;
                        transform: translateZ(0);
                      }

                      .nav-btn::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: -100%;
                        width: 100%;
                        height: 100%;
                        background: linear-gradient(90deg,
                            transparent,
                            rgba(255, 255, 255, 0.3),
                            transparent);
                        transition: left 0.5s ease;
                      }

                      .nav-btn:hover {
                        transform: translateY(-3px) translateZ(0) scale(1.05);
                        box-shadow:
                          0 8px 16px rgba(0, 0, 0, 0.5),
                          0 0 25px rgba(54, 193, 245, 0.8),
                          0 0 40px rgba(149, 222, 167, 0.6),
                          inset 0 1px 0 rgba(255, 255, 255, 0.4);
                        border-color: rgba(149, 222, 167, 1);
                        background: linear-gradient(135deg,
                            rgba(54, 193, 245, 0.95) 0%,
                            rgba(149, 222, 167, 0.9) 50%,
                            rgba(54, 193, 245, 0.95) 100%);
                      }

                      .nav-btn:hover::before {
                        left: 100%;
                      }

                      .nav-btn:active,
                      .nav-btn.clicked {
                        transform: translateY(-1px) translateZ(0) scale(0.95);
                        box-shadow:
                          0 2px 4px rgba(0, 0, 0, 0.4),
                          0 0 20px rgba(149, 222, 167, 0.9),
                          0 0 40px rgba(54, 193, 245, 0.7),
                          inset 0 2px 4px rgba(0, 0, 0, 0.3);
                        animation: buttonClickPulse 0.3s ease;
                        border-color: rgba(255, 255, 255, 1);
                      }

                      .nav-btn-icon {
                        font-size: 18px;
                        line-height: 1;
                        display: inline-block;
                        transition: transform 0.3s ease;
                        font-weight: bold;
                      }

                      .nav-btn:hover .nav-btn-icon {
                        transform: scale(1.3);
                      }

                      .nav-btn:active .nav-btn-icon {
                        transform: scale(0.9);
                      }

                      /* Click Animation */
                      @keyframes buttonClickPulse {
                        0% {
                          box-shadow:
                            0 4px 8px rgba(0, 0, 0, 0.4),
                            0 0 15px rgba(54, 193, 245, 0.5);
                        }

                        50% {
                          box-shadow:
                            0 2px 4px rgba(0, 0, 0, 0.4),
                            0 0 30px rgba(149, 222, 167, 0.9),
                            0 0 50px rgba(54, 193, 245, 0.7);
                        }

                        100% {
                          box-shadow:
                            0 4px 8px rgba(0, 0, 0, 0.4),
                            0 0 15px rgba(54, 193, 245, 0.5);
                        }
                      }

                      /* Section heading in nav controls */
                      .section-nav-controls .section-heading {
                        margin: 0 !important;
                        flex: 0 0 auto;
                        text-align: left;
                      }

                      /* Responsive adjustments */
                      @media (max-width: 768px) {
                        .section-nav-controls {
                          gap: 12px;
                          flex-wrap: nowrap;
                          /* Keep in flex, no wrapping */
                          align-items: center;
                          justify-content: space-between;
                        }

                        .section-heading.all-whites-heading,
                        .section-heading.all-blacks-heading {
                          font-size: 18px !important;
                          /* Smaller heading */
                          margin: 15px 0 10px 0 !important;
                        }

                        .section-heading.all-whites-heading::after,
                        .section-heading.all-blacks-heading::after {
                          height: 2px;
                          /* Thinner border */
                          bottom: -8px;
                        }

                        .section-heading.all-whites-heading::before,
                        .section-heading.all-blacks-heading::before {
                          height: 2px;
                          /* Thinner animated border */
                          bottom: -8px;
                        }

                        .section-nav-controls .section-heading {
                          flex: 1 1 auto;
                          margin: 0 !important;
                          text-align: left;
                        }

                        .nav-buttons-group {
                          margin-left: auto;
                          flex: 0 0 auto;
                          gap: 8px;
                        }

                        .nav-btn {
                          width: 40px;
                          height: 40px;
                          padding: 8px;
                          border-width: 2px;
                          /* Thinner border */
                        }

                        .nav-btn-icon {
                          font-size: 14px;
                        }
                      }

                      @media (max-width: 480px) {
                        .section-nav-controls {
                          gap: 8px;
                        }

                        .section-heading.all-whites-heading,
                        .section-heading.all-blacks-heading {
                          font-size: 14px !important;
                          /* Even smaller on mobile */
                          margin: 10px 0 8px 0 !important;
                        }

                        .section-heading.all-whites-heading::after,
                        .section-heading.all-blacks-heading::after {
                          height: 2px;
                          bottom: -6px;
                        }

                        .section-heading.all-whites-heading::before,
                        .section-heading.all-blacks-heading::before {
                          height: 2px;
                          bottom: -6px;
                        }

                        .nav-btn {
                          width: 36px;
                          height: 36px;
                          padding: 6px;
                          border-width: 2px;
                        }

                        .nav-btn-icon {
                          font-size: 12px;
                        }
                      }
                    </style>

                    <!-- Navigation Buttons for ALL-WHITES -->
                    <div class="section-nav-controls">
                      <p class="section-heading all-whites-heading">ALL-WHITES.</p>
                      <div class="nav-buttons-group">
                        <button class="nav-btn nav-btn-prev" data-section="all-white" aria-label="Previous">
                          <span class="nav-btn-icon">◄</span>
                        </button>
                        <button class="nav-btn nav-btn-next" data-section="all-white" aria-label="Next">
                          <span class="nav-btn-icon">►</span>
                        </button>
                      </div>
                    </div>
                    <div class="all-white product cards" id="all-white-cards">

                      <div class="bundle12">
                        <div class="col-md-6">
                          <div class="card" role="button">

                            <div class="card-body text-center"
                              style="justify-content: flex-start; flex-direction: row; position: relative; display: block;">
                              <h5 class="cardimage_heading ai-style-change-1"
                                style="/* -webkit-text-stroke: 5px black; */">12 Pairs</h5>
                              <img class="product card_image_class" id="product.card"
                                src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/737da395-5fc9-467a-b4c3-ed1d126bbdd4/bitmap_g1120.png?content-type=image%2Fpng"
                                alt="Card Image">
                              <div class="price"
                                style="display: flex;flex-Direction: column;justify-Content: center;align-Items: center;position: relative;height: auto;width: 100%;bottom: 75px;">


                                <h5 class="card-title"
                                  style="position: absolute;-webkit-text-stroke: 9px black;right: -18px;width: auto;left: auto;/* max-width: 100%; */display: inline-block;font-size: clamp(2.25rem, 5vw, 23rem);">
                                  £689.99
                                </h5>
                                <h5 class="card-title"
                                  style="position: absolute;/* -webkit-text-stroke: 9px black; */right: -18px;width: auto;left: auto;/* max-width: 100%; */display: inline-block;font-size: clamp(2.25rem, 5vw, 13rem);">
                                  £689.99</h5>

                              </div>
                            </div>
                            <!-- Additional Content -->
                            <div class="additionalContent">
                              <h5 class="additionalContenth5">12 Pairs</h5>
                              <h5 class="additionalContenth5">£689.99</h5>

                              <div class="slider12" id="slider-section">
                                <h1>"BIG BALLER"<br><u>DELUXE</u></h1>

                                <!-- Bundle Selection -->
                                <div class="bundle-selection" style="display: none;">
                                  <label for="bundle-12-bundleSize">Select Bundle Size:</label>
                                  <select id="bundle-12-bundleSize">
                                    <option value="12">12 Pairs</option>
                                  </select>
                                </div>

                                <!-- Size Selection -->
                                <div class="size-selection">
                                  <label for="sizes">Sizes:</label>
                                  <select id="bundle-12-sizes" multiple="" fdprocessedid="rjl6oh">
                                    <option value="3">Size 3</option>
                                    <option value="3.5">Size 3.5</option>
                                    <option value="4">Size 4</option>
                                    <option value="4.5">Size 4.5</option>
                                    <option value="5">Size 5</option>
                                    <option value="5.5">Size 5.5</option>
                                    <option value="6">Size 6</option>
                                    <option value="6.5">Size 6.5</option>
                                    <option value="7">Size 7</option>
                                    <option value="7.5">Size 7.5</option>
                                    <option value="8">Size 8</option>
                                    <option value="8.5">Size 8.5</option>
                                    <option value="9">Size 9</option>
                                    <option value="9.5">Size 9.5</option>
                                    <option value="10">Size 10</option>
                                    <option value="11">Size 11</option>
                                    <option value="11.5">Size 11.5</option>
                                    <option value="12">Size 12</option>
                                    <option value="13">Size 13</option>
                                  </select>
                                </div>

                                <!-- Selected Sizes -->
                                <div id="bundle-12-selectedSizes" class="selected-sizes" data-selected-size-data="[]">
                                </div>


                                <!-- Slider Section -->
                                <div id="bundle-12-sliderSection" class="slider-section" style="display: none;">
                                  <div class="slider-container"
                                    style="position: relative; height: 50px; width: 100%; background-color: #f0f0f0; border: 1px solid #ccc;">
                                    <div id="bundle-12-slider" class="slider"
                                      style="position: relative; height: 100%; width: 100%;"></div>
                                  </div>
                                  <div id="bundle-12-sizeLabels" class="size-labels"></div>
                                </div>

                                <script class="SLIDER-12">
                                  document.addEventListener("DOMContentLoaded", function () {
                                    const bundleSize = 12; // Fixed bundle size of 12 pairs
                                    const sizesElement = document.getElementById('bundle-12-sizes');
                                    const sliderSection = document.getElementById('bundle-12-sliderSection');
                                    const selectedSizesContainer = document.getElementById('bundle-12-selectedSizes');
                                    const sizeLabels = document.getElementById('bundle-12-sizeLabels');
                                    let selectedSizes = [];
                                    let distribution = [];
                                    let selectedSizeData = [];
                                    let dots = [];

                                    // Initialize the grid
                                    function initializeGrid() {
                                      console.log('initializeGrid called');
                                      sliderSection.innerHTML = '';
                                      sliderSection.classList.add('grid-container');
                                      const cell = document.createElement('div');
                                      cell.classList.add('grid-cell');
                                      cell.dataset.column = 0;
                                      sliderSection.appendChild(cell);
                                    }

                                    // Create draggable dots
                                    function createDots() {
                                      console.log('createDots called');
                                      dots = [];
                                      let numDots = selectedSizes.length - 1; // For N sizes, create N-1 dots.
                                      for (let i = 0; i < numDots; i++) {
                                        let dot = document.createElement('div');
                                        dot.classList.add('draggable-dot');
                                        // We still store the intended segment info, but the key is the initial even placement.
                                        dot.dataset.position = `${i}-${i + 1}`;
                                        dots.push(dot);
                                      }
                                      dots.forEach(dot => sliderSection.appendChild(dot));
                                      return dots;
                                    }

                                    // Position the dots evenly along the slider on initialization.
                                    // Also integrate the snapping-to-grid (using cellWidth) and edge-buffer logic.
                                    function positionDots(dots) {
                                      console.log('positionDots called');
                                      const sliderWidth = sliderSection.offsetWidth;
                                      const cellWidth = sliderWidth / bundleSize;
                                      const buffer = cellWidth; // Buffer: one cell width at each end

                                      // For N selected sizes, evenly divide the slider so that each dot falls at ((i+1)/N) of the total width.
                                      dots.forEach((dot, index) => {
                                        // Calculate the default position (in pixels) as a fraction of slider width.
                                        let defaultLeft = ((index + 1) / selectedSizes.length) * sliderWidth;
                                        // Snap this default value to the nearest grid boundary (cellWidth).
                                        defaultLeft = Math.round(defaultLeft / cellWidth) * cellWidth;
                                        // Clamp the default position so that it is never closer than the buffer to either edge.
                                        defaultLeft = Math.max(buffer, Math.min(defaultLeft, sliderWidth - buffer));
                                        // Account for the dot’s own width offset and convert to a percentage.
                                        const dotOffset = dot.offsetWidth / 2;
                                        const percentagePosition = ((defaultLeft - dotOffset) / sliderWidth) * 100;
                                        dot.style.left = `${percentagePosition}%`;
                                        dot.style.top = `${sliderSection.offsetHeight / 2 - dot.offsetHeight / 2}px`;
                                      });

                                      calculateDistribution();
                                    }

                                    // Make dots draggable
                                    function makeDotsDraggable(dots) {
                                      dots.forEach((dot, index) => {
                                        let startX, initialLeft, originalCell, minBoundary, maxBoundary;
                                        let isDragging = false;

                                        // Calculate movement boundaries with buffer at the edges.
                                        function calculateBoundaries() {
                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          const buffer = cellWidth; // Buffer prevents dot from reaching extreme edges

                                          if (dots.length === 1) {
                                            // Allow full movement but not past the buffer boundaries
                                            minBoundary = buffer;
                                            maxBoundary = sliderWidth - buffer;
                                          } else {
                                            // For first dot, ensure it does not go past the left edge buffer.
                                            minBoundary = index === 0 ? buffer : (parseFloat(dots[index - 1].style.left) / 100) * sliderWidth + cellWidth;
                                            // For last dot, ensure it does not exceed sliderWidth - buffer.
                                            maxBoundary = index === dots.length - 1 ? sliderWidth - buffer : (parseFloat(dots[index + 1].style.left) / 100) * sliderWidth - cellWidth;
                                          }
                                        }

                                        function onMouseMove(e) {
                                          if (!isDragging) return;
                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                                          const deltaX = clientX - startX;

                                          // Compute the new position and clamp it to the boundaries
                                          let newLeft = initialLeft + deltaX;
                                          newLeft = Math.max(minBoundary, Math.min(newLeft, maxBoundary)); // Prevents dot from moving past allowed boundaries

                                          // Update the dot's position in percentage terms
                                          const newLeftPercentage = (newLeft / sliderWidth) * 100;
                                          dot.style.left = `${newLeftPercentage}%`;

                                          calculateDistribution();
                                        }

                                        function onMouseUp() {
                                          isDragging = false;
                                          document.removeEventListener('mousemove', onMouseMove);
                                          document.removeEventListener('touchmove', onMouseMove);

                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          let currentLeft = (parseFloat(dot.style.left) / 100) * sliderWidth;

                                          // Find the closest grid boundary
                                          let snappedLeft = Math.round(currentLeft / cellWidth) * cellWidth;

                                          // Prevent snapping onto an occupied boundary if multiple dots exist
                                          if (dots.length > 1) {
                                            dots.forEach((otherDot, otherIndex) => {
                                              if (otherIndex !== index) {
                                                let otherLeft = (parseFloat(otherDot.style.left) / 100) * sliderWidth;
                                                if (Math.abs(snappedLeft - otherLeft) < cellWidth) {
                                                  snappedLeft = snappedLeft > otherLeft ? otherLeft + cellWidth : otherLeft - cellWidth;
                                                }
                                              }
                                            });
                                          }

                                          // Apply the buffer at the edges so dots do not reach 0% or 100%
                                          const buffer = cellWidth; // Buffer equal to one cell width
                                          snappedLeft = Math.max(buffer, Math.min(snappedLeft, sliderWidth - buffer));

                                          // Apply smooth transition for snapping back into position
                                          dot.style.transition = 'left 0.3s ease-out';
                                          const snappedLeftPercentage = (snappedLeft / sliderWidth) * 100;
                                          dot.style.left = `${snappedLeftPercentage}%`;

                                          calculateDistribution();

                                          document.removeEventListener('mouseup', onMouseUp);
                                          document.removeEventListener('touchend', onMouseUp);
                                        }

                                        function onMouseDown(e) {
                                          if (selectedSizes.length === bundleSize) return;
                                          isDragging = true;
                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          startX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                                          initialLeft = dot.offsetLeft;
                                          originalCell = Math.round(initialLeft / cellWidth);
                                          calculateBoundaries(); // Update boundaries with the buffer in place

                                          dot.style.transition = 'none'; // Disable transition during drag

                                          document.addEventListener('mousemove', onMouseMove);
                                          document.addEventListener('touchmove', onMouseMove, { passive: true });
                                          document.addEventListener('mouseup', onMouseUp);
                                          document.addEventListener('touchend', onMouseUp);
                                        }

                                        dot.addEventListener('mousedown', onMouseDown);
                                        dot.addEventListener('touchstart', onMouseDown, { passive: true });
                                      });
                                    }

                                    // Calculate distribution
                                    function calculateDistribution() {
                                      console.log('calculateDistribution called');
                                      const numSizes = selectedSizes.length;
                                      const sliderWidth = sliderSection.offsetWidth;
                                      const cellWidth = sliderWidth / bundleSize;

                                      // Get each dot's left position in pixels
                                      const dots = Array.from(sliderSection.querySelectorAll('.draggable-dot'));
                                      const dotPositions = dots.map(dot => {
                                        const dotLeftPercentage = parseFloat(dot.style.left);
                                        return (dotLeftPercentage / 100) * sliderWidth;
                                      });

                                      // When only one size is selected, the entire bundle goes to it.
                                      if (numSizes === 1) {
                                        distribution = [bundleSize];
                                      } else {
                                        distribution = [];

                                        // First segment: from left edge (0) to the first dot.
                                        distribution.push(Math.round(dotPositions[0] / cellWidth));

                                        // Intermediate segments: for each gap between successive dots.
                                        for (let i = 1; i < dotPositions.length; i++) {
                                          distribution.push(Math.round((dotPositions[i] - dotPositions[i - 1]) / cellWidth));
                                        }

                                        // Last segment: from the last dot to the right edge.
                                        distribution.push(bundleSize - Math.round(dotPositions[dotPositions.length - 1] / cellWidth));
                                      }

                                      // Ensure that each quantity is at least 1 (or adjust to 0 if that’s acceptable).
                                      distribution = distribution.map(d => Math.max(1, d));

                                      // Adjust the distribution so that the total sums to bundleSize.
                                      const currentTotal = distribution.reduce((a, b) => a + b, 0);
                                      const diff = bundleSize - currentTotal;
                                      let iterationCount = 0;
                                      const maxIterations = bundleSize * 2;

                                      if (diff !== 0) {
                                        // Distribute the difference (which might be positive or negative) evenly.
                                        for (let i = 0; i < Math.abs(diff); i++) {
                                          iterationCount++;
                                          if (iterationCount > maxIterations) {
                                            console.error('Max iterations reached in calculateDistribution for loop');
                                            break;
                                          }
                                          // If diff is positive, add 1 to one segment; if negative, subtract 1.
                                          const indexToAdjust = diff > 0 ? i % distribution.length : distribution.length - 1 - (i % distribution.length);
                                          distribution[indexToAdjust] += diff > 0 ? 1 : -1;
                                        }
                                      }

                                      // Ensure no segment falls below 1 after adjustment.
                                      distribution = distribution.map(d => Math.max(1, d));
                                      console.log('calculateDistribution - distribution:', distribution);

                                      updateUI();
                                    }


                                    // Update the UI
                                    function updateUI() {
                                      console.log('updateUI called');
                                      sizeLabels.innerHTML = '';
                                      selectedSizes.forEach((size, index) => {
                                        const label = document.createElement('div');
                                        label.textContent = `Size ${size}: ${distribution[index]} ${formatQuantity(distribution[index])}`;
                                        label.id = `bundle-12-sizeLabel-${size}`;
                                        sizeLabels.appendChild(label);
                                      });
                                      updateselectedSizeData();
                                    }

                                    // Update Selected Sizes
                                    function updateselectedSizes() {
                                      console.log('updateselectedSizes called');
                                      console.log('updateselectedSizes - selectedSizes:', selectedSizes);
                                      selectedSizesContainer.innerHTML = '';
                                      initializeGrid();
                                      // Calculate distribution before updating the slider
                                      calculateDistribution();
                                      updateSlider();
                                      selectedSizeData = selectedSizes.map((size, index) => ({
                                        size: parseFloat(size),
                                        quantity: distribution[index] || 1,
                                      }));
                                      console.log('updateselectedSizes - selectedSizeData:', selectedSizeData);
                                      // Toggle sliderSection visibility based on selectedSizes length
                                      if (selectedSizes.length > 1) {
                                        sliderSection.style.display = 'block';
                                        calculateDistribution();
                                        updateSlider();
                                      } else {
                                        sliderSection.style.display = 'none';
                                      }

                                      updatePayNowButtonsVisibility()
                                    }

                                    // Update Slider for Selected Sizes
                                    function updateSlider() {
                                      console.log('updateSlider called');
                                      // Remove existing dots
                                      const existingDots = sliderSection.querySelectorAll('.draggable-dot');
                                      existingDots.forEach(dot => dot.remove());
                                      const dots = createDots(); // Dots are created first
                                      positionDots(dots); // Then they are positioned
                                      makeDotsDraggable(dots);
                                    }

                                    function formatQuantity(quantity) {
                                      return quantity === 1 ? '1X' : `${quantity}X`;
                                    }

                                    function updateselectedSizeData() {
                                      console.log('updateselectedSizeData called');
                                      console.log('updateselectedSizeData - distribution:', distribution);
                                      selectedSizeData = selectedSizes.map((size, index) => ({
                                        size: parseFloat(size),
                                        quantity: distribution[index],
                                      }));
                                      console.log('updateselectedSizeData - selectedSizeData:', selectedSizeData);
                                      selectedSizesContainer.dataset.selectedSizeData = JSON.stringify(selectedSizeData); // Moved here


                                      // Display the strictly formatted quantities for selected sizes
                                      selectedSizesContainer.innerHTML = '';
                                      selectedSizeData.forEach((data) => {
                                        const sizeTag = document.createElement('div');
                                        sizeTag.classList.add('selected-size');

                                        const sizeSpan = document.createElement('span');
                                        sizeSpan.textContent = `${formatQuantity(data.quantity)}Size ${data.size}`;

                                        const clearBtn = document.createElement('button');
                                        clearBtn.classList.add('clear-btn');
                                        clearBtn.textContent = 'X';

                                        // Define a handler function that clears the option from both UI and data
                                        const clearHandler = () => {
                                          // Remove from our selectedSizes array:
                                          selectedSizes = selectedSizes.filter(s => s !== String(data.size));
                                          // Also update the <select> element to unselect this option:
                                          Array.from(sizesElement.options).forEach(option => {
                                            if (option.value === String(data.size)) {
                                              option.selected = false;
                                            }
                                          });
                                          // Finally update the UI / re-calculate distribution:
                                          updateselectedSizes();
                                        };

                                        // **Inject drag detection event listeners here for the clear button:**
                                        // Define a drag threshold in pixels.
                                        const DRAG_THRESHOLD = 5;

                                        clearBtn.addEventListener('pointerdown', function (e) {
                                          // Record the starting pointer coordinates and reset the dragging flag.
                                          this._dragStartX = e.clientX;
                                          this._dragStartY = e.clientY;
                                          this._isDragging = false;
                                        });

                                        clearBtn.addEventListener('pointermove', function (e) {
                                          // Calculate how far the pointer has moved from the starting position.
                                          const dx = e.clientX - this._dragStartX;
                                          const dy = e.clientY - this._dragStartY;
                                          if (Math.sqrt(dx * dx + dy * dy) > DRAG_THRESHOLD) {
                                            // If movement exceeds the threshold, mark as dragging.
                                            this._isDragging = true;
                                          }
                                        });

                                        clearBtn.addEventListener('pointerup', function (e) {
                                          // Only execute the clear action if the pointer did not move too far.
                                          if (!this._isDragging) {
                                            clearHandler();
                                          }
                                          // Clean up.
                                          delete this._dragStartX;
                                          delete this._dragStartY;
                                          delete this._isDragging;
                                        });

                                        // Also, for good measure, cancel the action on pointercancel.
                                        clearBtn.addEventListener('pointercancel', function (e) {
                                          delete this._dragStartX;
                                          delete this._dragStartY;
                                          delete this._isDragging;
                                        });

                                        sizeTag.appendChild(sizeSpan);
                                        sizeTag.appendChild(clearBtn);
                                        selectedSizesContainer.appendChild(sizeTag);
                                      });
                                    };

                                    // Assume bundleSize is already defined (e.g., 12)
                                    let previousSelections = []; // global variable to hold the last valid selection

                                    sizesElement.addEventListener('change', (e) => {
                                      // Get the current list of selected option values
                                      const currentSelections = Array.from(e.target.selectedOptions).map(option => option.value);
                                      console.log('Current selections:', currentSelections);

                                      // If the new count exceeds the allowed limit...
                                      if (currentSelections.length > bundleSize) {
                                        // Determine the newly added options by comparing with the previousSelections.
                                        const newlyAdded = currentSelections.filter(val => !previousSelections.includes(val));
                                        // Alert the user
                                        alert(`You can only select up to ${bundleSize} sizes. Please deselect an option before adding ${newlyAdded.join(', ')}`);

                                        // For each newly added option, set its "selected" property to false.
                                        newlyAdded.forEach(val => {
                                          const option = e.target.querySelector(`option[value="${val}"]`);
                                          if (option) {
                                            option.selected = false;
                                          }
                                        });
                                        // After unselecting the newly added options, update currentSelections
                                        currentSelections.length = 0;
                                        Array.from(e.target.selectedOptions).forEach(option => currentSelections.push(option.value));
                                      }

                                      // Save the valid selections for next time
                                      previousSelections = currentSelections.slice(); // copy the array
                                      selectedSizes = currentSelections;
                                      console.log('Final selected sizes:', selectedSizes);

                                      // Call your update function with the valid selections
                                      updateselectedSizes();
                                    });

                                    window.addEventListener('resize', () => {
                                      updateSlider();
                                    });
                                  });
                                </script>

                                <div id="buttonContainer">
                                  <button class="buynow" id="updateOptionsButton12">Add To Cart</button>
                                </div>


                              </div>

                            </div>
                          </div>




                        </div>
                      </div>

                      <div class="bundle7">
                        <div class="col-md-6">
                          <div class="card" role="button">

                            <div class="card-body text-center"
                              style="justify-content: flex-start; flex-direction: row; position: relative; display: block;">
                              <h5 class="cardimage_heading ai-style-change-1"
                                style="/* -webkit-text-stroke: 5px black; */">7 Pairs</h5>
                              <img class="product card_image_class" id="product.card"
                                src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/90355dcc-2336-4d27-b9a6-364c8b9a8211/bitmap_g1109.png?content-type=image%2Fpng"
                                alt="Card Image" style="left: -80px;">
                              <div class="price"
                                style="display: flex;flex-Direction: column;justify-Content: center;align-Items: center;position: relative;height: auto;width: 100%;bottom: 75px;">


                                <h5 class="card-title"
                                  style="position: absolute;-webkit-text-stroke: 9px black;right: -18px;width: auto;left: auto;/* max-width: 100%; */display: inline-block;font-size: clamp(2.25rem, 5vw, 23rem);">
                                  £399.99
                                </h5>
                                <h5 class="card-title"
                                  style="position: absolute;/* -webkit-text-stroke: 9px black; */right: -18px;width: auto;left: auto;/* max-width: 100%; */display: inline-block;font-size: clamp(2.25rem, 5vw, 13rem);">
                                  £399.99</h5>

                              </div>
                            </div>
                            <!-- Additional Content -->
                            <div class="additionalContent">
                              <h5 class="additionalContenth5">7 Pairs</h5>
                              <h5 class="additionalContenth5">£399.99</h5>

                              <div class="slider7" id="slider-section">
                                <h1>"BIG BALLER"</h1>

                                <!-- Bundle Selection -->
                                <div class="bundle-selection" style="display: none;">
                                  <label for="bundle-size">Select Bundle Size:</label>
                                  <select id="bundle-7-bundleSize" fdprocessedid="htbaup">
                                    <option value="7">7 Pairs</option>
                                  </select>
                                </div>

                                <!-- Size Selection -->
                                <div class="size-selection">
                                  <label for="sizes">Sizes:</label>
                                  <select id="bundle-7-sizes" multiple="" fdprocessedid="rjl6oh">
                                    <option value="3">Size 3</option>
                                    <option value="3.5">Size 3.5</option>
                                    <option value="4">Size 4</option>
                                    <option value="4.5">Size 4.5</option>
                                    <option value="5">Size 5</option>
                                    <option value="5.5">Size 5.5</option>
                                    <option value="6">Size 6</option>
                                    <option value="6.5">Size 6.5</option>
                                    <option value="7">Size 7</option>
                                    <option value="7.5">Size 7.5</option>
                                    <option value="8">Size 8</option>
                                    <option value="8.5">Size 8.5</option>
                                    <option value="9">Size 9</option>
                                    <option value="9.5">Size 9.5</option>
                                    <option value="10">Size 10</option>
                                    <option value="11">Size 11</option>
                                    <option value="11.5">Size 11.5</option>
                                    <option value="12">Size 12</option>
                                    <option value="13">Size 13</option>
                                  </select>
                                </div>

                                <!-- Selected Sizes -->
                                <div id="bundle-7-selectedSizes" class="selected-sizes" data-selected-size-data="[]">
                                </div>

                                <!-- Slider Section -->
                                <div id="bundle-7-sliderSection" class="slider-section" style="display: none;">
                                  <div class="slider-container"
                                    style="position: relative; height: 50px; width: 100%; background-color: #f0f0f0; border: 1px solid #ccc;">
                                    <div id="bundle-7-slider" class="slider"
                                      style="position: relative; height: 100%; width: 100%;"></div>
                                  </div>
                                  <div id="bundle-7-sizeLabels" class="size-labels"></div>
                                </div>



                                <script class="SLIDER-7">
                                  document.addEventListener("DOMContentLoaded", function () {
                                    const bundleSize = 7; // Fixed bundle size of 7 pairs
                                    const sizesElement = document.getElementById('bundle-7-sizes');
                                    const sliderSection = document.getElementById('bundle-7-sliderSection');
                                    const selectedSizesContainer = document.getElementById('bundle-7-selectedSizes');
                                    const sizeLabels = document.getElementById('bundle-7-sizeLabels');
                                    let selectedSizes = [];
                                    let distribution = [];
                                    let selectedSizeData = [];
                                    let dots = [];

                                    // Initialize the grid
                                    function initializeGrid() {
                                      console.log('initializeGrid called');
                                      sliderSection.innerHTML = '';
                                      sliderSection.classList.add('grid-container');
                                      const cell = document.createElement('div');
                                      cell.classList.add('grid-cell');
                                      cell.dataset.column = 0;
                                      sliderSection.appendChild(cell);
                                    }

                                    // Create draggable dots
                                    function createDots() {
                                      console.log('createDots called');
                                      dots = [];
                                      let numDots = selectedSizes.length - 1; // For N sizes, create N-1 dots.
                                      for (let i = 0; i < numDots; i++) {
                                        let dot = document.createElement('div');
                                        dot.classList.add('draggable-dot');
                                        // We still store the intended segment info, but the key is the initial even placement.
                                        dot.dataset.position = `${i}-${i + 1}`;
                                        dots.push(dot);
                                      }
                                      dots.forEach(dot => sliderSection.appendChild(dot));
                                      return dots;
                                    }

                                    // Position the dots evenly along the slider on initialization.
                                    // Also integrate the snapping-to-grid (using cellWidth) and edge-buffer logic.
                                    function positionDots(dots) {
                                      console.log('positionDots called');
                                      const sliderWidth = sliderSection.offsetWidth;
                                      const cellWidth = sliderWidth / bundleSize;
                                      const buffer = cellWidth; // Buffer: one cell width at each end

                                      // For N selected sizes, evenly divide the slider so that each dot falls at ((i+1)/N) of the total width.
                                      dots.forEach((dot, index) => {
                                        // Calculate the default position (in pixels) as a fraction of slider width.
                                        let defaultLeft = ((index + 1) / selectedSizes.length) * sliderWidth;
                                        // Snap this default value to the nearest grid boundary (cellWidth).
                                        defaultLeft = Math.round(defaultLeft / cellWidth) * cellWidth;
                                        // Clamp the default position so that it is never closer than the buffer to either edge.
                                        defaultLeft = Math.max(buffer, Math.min(defaultLeft, sliderWidth - buffer));
                                        // Account for the dot’s own width offset and convert to a percentage.
                                        const dotOffset = dot.offsetWidth / 2;
                                        const percentagePosition = ((defaultLeft - dotOffset) / sliderWidth) * 100;
                                        dot.style.left = `${percentagePosition}%`;
                                        dot.style.top = `${sliderSection.offsetHeight / 2 - dot.offsetHeight / 2}px`;
                                      });

                                      calculateDistribution();
                                    }

                                    // Make dots draggable
                                    function makeDotsDraggable(dots) {
                                      dots.forEach((dot, index) => {
                                        let startX, initialLeft, originalCell, minBoundary, maxBoundary;
                                        let isDragging = false;

                                        // Calculate movement boundaries with buffer at the edges.
                                        function calculateBoundaries() {
                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          const buffer = cellWidth; // Buffer prevents dot from reaching extreme edges

                                          if (dots.length === 1) {
                                            // Allow full movement but not past the buffer boundaries
                                            minBoundary = buffer;
                                            maxBoundary = sliderWidth - buffer;
                                          } else {
                                            // For first dot, ensure it does not go past the left edge buffer.
                                            minBoundary = index === 0 ? buffer : (parseFloat(dots[index - 1].style.left) / 100) * sliderWidth + cellWidth;
                                            // For last dot, ensure it does not exceed sliderWidth - buffer.
                                            maxBoundary = index === dots.length - 1 ? sliderWidth - buffer : (parseFloat(dots[index + 1].style.left) / 100) * sliderWidth - cellWidth;
                                          }
                                        }

                                        function onMouseMove(e) {
                                          if (!isDragging) return;
                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                                          const deltaX = clientX - startX;

                                          // Compute the new position and clamp it to the boundaries
                                          let newLeft = initialLeft + deltaX;
                                          newLeft = Math.max(minBoundary, Math.min(newLeft, maxBoundary)); // Prevents dot from moving past allowed boundaries

                                          // Update the dot's position in percentage terms
                                          const newLeftPercentage = (newLeft / sliderWidth) * 100;
                                          dot.style.left = `${newLeftPercentage}%`;

                                          calculateDistribution();
                                        }

                                        function onMouseUp() {
                                          isDragging = false;
                                          document.removeEventListener('mousemove', onMouseMove);
                                          document.removeEventListener('touchmove', onMouseMove);

                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          let currentLeft = (parseFloat(dot.style.left) / 100) * sliderWidth;

                                          // Find the closest grid boundary
                                          let snappedLeft = Math.round(currentLeft / cellWidth) * cellWidth;

                                          // Prevent snapping onto an occupied boundary if multiple dots exist
                                          if (dots.length > 1) {
                                            dots.forEach((otherDot, otherIndex) => {
                                              if (otherIndex !== index) {
                                                let otherLeft = (parseFloat(otherDot.style.left) / 100) * sliderWidth;
                                                if (Math.abs(snappedLeft - otherLeft) < cellWidth) {
                                                  snappedLeft = snappedLeft > otherLeft ? otherLeft + cellWidth : otherLeft - cellWidth;
                                                }
                                              }
                                            });
                                          }

                                          // Apply the buffer at the edges so dots do not reach 0% or 100%
                                          const buffer = cellWidth; // Buffer equal to one cell width
                                          snappedLeft = Math.max(buffer, Math.min(snappedLeft, sliderWidth - buffer));

                                          // Apply smooth transition for snapping back into position
                                          dot.style.transition = 'left 0.3s ease-out';
                                          const snappedLeftPercentage = (snappedLeft / sliderWidth) * 100;
                                          dot.style.left = `${snappedLeftPercentage}%`;

                                          calculateDistribution();

                                          document.removeEventListener('mouseup', onMouseUp);
                                          document.removeEventListener('touchend', onMouseUp);
                                        }

                                        function onMouseDown(e) {
                                          if (selectedSizes.length === bundleSize) return;
                                          isDragging = true;
                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          startX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                                          initialLeft = dot.offsetLeft;
                                          originalCell = Math.round(initialLeft / cellWidth);
                                          calculateBoundaries(); // Update boundaries with the buffer in place

                                          dot.style.transition = 'none'; // Disable transition during drag

                                          document.addEventListener('mousemove', onMouseMove);
                                          document.addEventListener('touchmove', onMouseMove, { passive: true });
                                          document.addEventListener('mouseup', onMouseUp);
                                          document.addEventListener('touchend', onMouseUp);
                                        }

                                        dot.addEventListener('mousedown', onMouseDown);
                                        dot.addEventListener('touchstart', onMouseDown, { passive: true });
                                      });
                                    }

                                    // Calculate distribution
                                    function calculateDistribution() {
                                      console.log('calculateDistribution called');
                                      const numSizes = selectedSizes.length;
                                      const sliderWidth = sliderSection.offsetWidth;
                                      const cellWidth = sliderWidth / bundleSize;

                                      // Get each dot's left position in pixels
                                      const dots = Array.from(sliderSection.querySelectorAll('.draggable-dot'));
                                      const dotPositions = dots.map(dot => {
                                        const dotLeftPercentage = parseFloat(dot.style.left);
                                        return (dotLeftPercentage / 100) * sliderWidth;
                                      });

                                      // When only one size is selected, the entire bundle goes to it.
                                      if (numSizes === 1) {
                                        distribution = [bundleSize];
                                      } else {
                                        distribution = [];

                                        // First segment: from left edge (0) to the first dot.
                                        distribution.push(Math.round(dotPositions[0] / cellWidth));

                                        // Intermediate segments: for each gap between successive dots.
                                        for (let i = 1; i < dotPositions.length; i++) {
                                          distribution.push(Math.round((dotPositions[i] - dotPositions[i - 1]) / cellWidth));
                                        }

                                        // Last segment: from the last dot to the right edge.
                                        distribution.push(bundleSize - Math.round(dotPositions[dotPositions.length - 1] / cellWidth));
                                      }

                                      // Ensure that each quantity is at least 1 (or adjust to 0 if that’s acceptable).
                                      distribution = distribution.map(d => Math.max(1, d));

                                      // Adjust the distribution so that the total sums to bundleSize.
                                      const currentTotal = distribution.reduce((a, b) => a + b, 0);
                                      const diff = bundleSize - currentTotal;
                                      let iterationCount = 0;
                                      const maxIterations = bundleSize * 2;

                                      if (diff !== 0) {
                                        // Distribute the difference (which might be positive or negative) evenly.
                                        for (let i = 0; i < Math.abs(diff); i++) {
                                          iterationCount++;
                                          if (iterationCount > maxIterations) {
                                            console.error('Max iterations reached in calculateDistribution for loop');
                                            break;
                                          }
                                          // If diff is positive, add 1 to one segment; if negative, subtract 1.
                                          const indexToAdjust = diff > 0 ? i % distribution.length : distribution.length - 1 - (i % distribution.length);
                                          distribution[indexToAdjust] += diff > 0 ? 1 : -1;
                                        }
                                      }

                                      // Ensure no segment falls below 1 after adjustment.
                                      distribution = distribution.map(d => Math.max(1, d));
                                      console.log('calculateDistribution - distribution:', distribution);

                                      updateUI();
                                    }


                                    // Update the UI
                                    function updateUI() {
                                      console.log('updateUI called');
                                      sizeLabels.innerHTML = '';
                                      selectedSizes.forEach((size, index) => {
                                        const label = document.createElement('div');
                                        label.textContent = `Size ${size}: ${distribution[index]} ${formatQuantity(distribution[index])}`;
                                        label.id = `bundle-12-sizeLabel-${size}`;
                                        sizeLabels.appendChild(label);
                                      });
                                      updateselectedSizeData();
                                    }

                                    // Update Selected Sizes
                                    function updateselectedSizes() {
                                      console.log('updateselectedSizes called');
                                      console.log('updateselectedSizes - selectedSizes:', selectedSizes);
                                      selectedSizesContainer.innerHTML = '';
                                      initializeGrid();
                                      // Calculate distribution before updating the slider
                                      calculateDistribution();
                                      updateSlider();
                                      selectedSizeData = selectedSizes.map((size, index) => ({
                                        size: parseFloat(size),
                                        quantity: distribution[index] || 1,
                                      }));
                                      console.log('updateselectedSizes - selectedSizeData:', selectedSizeData);
                                      // Toggle sliderSection visibility based on selectedSizes length
                                      if (selectedSizes.length > 1) {
                                        sliderSection.style.display = 'block';
                                        calculateDistribution();
                                        updateSlider();
                                      } else {
                                        sliderSection.style.display = 'none';
                                      }
                                      updatePayNowButtonsVisibility()
                                    }

                                    // Update Slider for Selected Sizes
                                    function updateSlider() {
                                      console.log('updateSlider called');
                                      // Remove existing dots
                                      const existingDots = sliderSection.querySelectorAll('.draggable-dot');
                                      existingDots.forEach(dot => dot.remove());
                                      const dots = createDots(); // Dots are created first
                                      positionDots(dots); // Then they are positioned
                                      makeDotsDraggable(dots);
                                    }

                                    function formatQuantity(quantity) {
                                      return quantity === 1 ? '1X' : `${quantity}X`;
                                    }

                                    function updateselectedSizeData() {
                                      console.log('updateselectedSizeData called');
                                      console.log('updateselectedSizeData - distribution:', distribution);
                                      selectedSizeData = selectedSizes.map((size, index) => ({
                                        size: parseFloat(size),
                                        quantity: distribution[index],
                                      }));
                                      console.log('updateselectedSizeData - selectedSizeData:', selectedSizeData);
                                      selectedSizesContainer.dataset.selectedSizeData = JSON.stringify(selectedSizeData); // Moved here


                                      // Display the strictly formatted quantities for selected sizes
                                      selectedSizesContainer.innerHTML = '';
                                      selectedSizeData.forEach((data) => {
                                        const sizeTag = document.createElement('div');
                                        sizeTag.classList.add('selected-size');

                                        const sizeSpan = document.createElement('span');
                                        sizeSpan.textContent = `${formatQuantity(data.quantity)}Size ${data.size}`;

                                        const clearBtn = document.createElement('button');
                                        clearBtn.classList.add('clear-btn');
                                        clearBtn.textContent = 'X';

                                        // Define a handler function that clears the option from both UI and data
                                        const clearHandler = () => {
                                          // Remove from our selectedSizes array:
                                          selectedSizes = selectedSizes.filter(s => s !== String(data.size));
                                          // Also update the <select> element to unselect this option:
                                          Array.from(sizesElement.options).forEach(option => {
                                            if (option.value === String(data.size)) {
                                              option.selected = false;
                                            }
                                          });
                                          // Finally update the UI / re-calculate distribution:
                                          updateselectedSizes();
                                        };

                                        // **Inject drag detection event listeners here for the clear button:**
                                        // Define a drag threshold in pixels.
                                        const DRAG_THRESHOLD = 5;

                                        clearBtn.addEventListener('pointerdown', function (e) {
                                          // Record the starting pointer coordinates and reset the dragging flag.
                                          this._dragStartX = e.clientX;
                                          this._dragStartY = e.clientY;
                                          this._isDragging = false;
                                        });

                                        clearBtn.addEventListener('pointermove', function (e) {
                                          // Calculate how far the pointer has moved from the starting position.
                                          const dx = e.clientX - this._dragStartX;
                                          const dy = e.clientY - this._dragStartY;
                                          if (Math.sqrt(dx * dx + dy * dy) > DRAG_THRESHOLD) {
                                            // If movement exceeds the threshold, mark as dragging.
                                            this._isDragging = true;
                                          }
                                        });

                                        clearBtn.addEventListener('pointerup', function (e) {
                                          // Only execute the clear action if the pointer did not move too far.
                                          if (!this._isDragging) {
                                            clearHandler();
                                          }
                                          // Clean up.
                                          delete this._dragStartX;
                                          delete this._dragStartY;
                                          delete this._isDragging;
                                        });

                                        // Also, for good measure, cancel the action on pointercancel.
                                        clearBtn.addEventListener('pointercancel', function (e) {
                                          delete this._dragStartX;
                                          delete this._dragStartY;
                                          delete this._isDragging;
                                        });

                                        sizeTag.appendChild(sizeSpan);
                                        sizeTag.appendChild(clearBtn);
                                        selectedSizesContainer.appendChild(sizeTag);
                                      });
                                    };

                                    // Assume bundleSize is already defined (e.g., 12)
                                    let previousSelections = []; // global variable to hold the last valid selection

                                    sizesElement.addEventListener('change', (e) => {
                                      // Get the current list of selected option values
                                      const currentSelections = Array.from(e.target.selectedOptions).map(option => option.value);
                                      console.log('Current selections:', currentSelections);

                                      // If the new count exceeds the allowed limit...
                                      if (currentSelections.length > bundleSize) {
                                        // Determine the newly added options by comparing with the previousSelections.
                                        const newlyAdded = currentSelections.filter(val => !previousSelections.includes(val));
                                        // Alert the user
                                        alert(`You can only select up to ${bundleSize} sizes. Please deselect an option before adding ${newlyAdded.join(', ')}`);

                                        // For each newly added option, set its "selected" property to false.
                                        newlyAdded.forEach(val => {
                                          const option = e.target.querySelector(`option[value="${val}"]`);
                                          if (option) {
                                            option.selected = false;
                                          }
                                        });
                                        // After unselecting the newly added options, update currentSelections
                                        currentSelections.length = 0;
                                        Array.from(e.target.selectedOptions).forEach(option => currentSelections.push(option.value));
                                      }

                                      // Save the valid selections for next time
                                      previousSelections = currentSelections.slice(); // copy the array
                                      selectedSizes = currentSelections;
                                      console.log('Final selected sizes:', selectedSizes);

                                      // Call your update function with the valid selections
                                      updateselectedSizes();
                                    });
                                    window.addEventListener('resize', () => {
                                      updateSlider();
                                    });
                                  });
                                </script>

                                <div id="buttonContainer">
                                  <button class="buynow" id="updateOptionsButton7">Add To Cart</button>
                                </div>


                              </div>

                            </div>
                          </div>


                        </div>
                      </div>

                      <div class="bundle3">
                        <div class="col-md-6">
                          <div class="card" role="button">
                            <div class="card-body text-center"
                              style="justify-content: flex-start; flex-direction: row; position: relative; display: block;">

                              <h5 class="cardimage_heading ai-style-change-1"
                                style="/* -webkit-text-stroke: 5px black; */">3 Pairs</h5>
                              <img class="product card_image_class" id="product.card"
                                src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/b4841124-5355-446a-9fa2-fc83ba27ff6b/bitmap_g1121.png?content-type=image%2Fpng"
                                alt="Card Image">
                              <div class="price"
                                style="display: flex;flex-Direction: column;justify-Content: center;align-Items: center;position: relative;height: auto;width: 100%;bottom: 75px;">


                                <h5 class="card-title"
                                  style="position: absolute;-webkit-text-stroke: 9px black;right: -18px;width: auto;left: auto;/* max-width: 100%; */display: inline-block;font-size: clamp(2.25rem, 5vw, 23rem);">
                                  £175.99
                                </h5>
                                <h5 class="card-title"
                                  style="position: absolute;/* -webkit-text-stroke: 9px black; */right: -18px;width: auto;left: auto;/* max-width: 100%; */display: inline-block;font-size: clamp(2.25rem, 5vw, 13rem);">
                                  £175.99</h5>

                              </div>

                            </div>
                            <!-- Additional Content -->
                            <div class="additionalContent">
                              <h5 class="additionalContenth5">3 Pairs</h5>
                              <h5 class="additionalContenth5">£175.99</h5>

                              <div class="slider3" id="slider-section">
                                <h1>"BALLER"</h1>

                                <!-- Bundle Selection -->
                                <div class="bundle-selection" style="display: none;">
                                  <label for="bundle-size">Select Bundle Size:</label>
                                  <select id="bundle-3-bundleSize">
                                    <option value="3">3 Pairs</option>
                                  </select>
                                </div>

                                <!-- Size Selection -->
                                <div class="size-selection">
                                  <label for="sizes">Sizes:</label>
                                  <select id="bundle-3-sizes" multiple="">
                                    <option value="3">Size 3</option>
                                    <option value="3.5">Size 3.5</option>
                                    <option value="4">Size 4</option>
                                    <option value="4.5">Size 4.5</option>
                                    <option value="5">Size 5</option>
                                    <option value="5.5">Size 5.5</option>
                                    <option value="6">Size 6</option>
                                    <option value="6.5">Size 6.5</option>
                                    <option value="7">Size 7</option>
                                    <option value="7.5">Size 7.5</option>
                                    <option value="8">Size 8</option>
                                    <option value="8.5">Size 8.5</option>
                                    <option value="9">Size 9</option>
                                    <option value="9.5">Size 9.5</option>
                                    <option value="10">Size 10</option>
                                    <option value="11">Size 11</option>
                                    <option value="11.5">Size 11.5</option>
                                    <option value="12">Size 12</option>
                                    <option value="13">Size 13</option>
                                  </select>
                                </div>

                                <!-- Selected Sizes -->
                                <div id="bundle-3-selectedSizes" class="selected-sizes" data-selected-size-data="[]">
                                </div>

                                <!-- Slider Section -->
                                <div id="bundle-3-sliderSection" class="slider-section" style="display: none;">
                                  <div class="slider-container"
                                    style="position: relative; height: 50px; width: 100%; background-color: #f0f0f0; border: 1px solid #ccc;">
                                    <div id="bundle-3-slider" class="slider"
                                      style="position: relative; height: 100%; width: 100%;"></div>
                                  </div>
                                  <div id="bundle-3-sizeLabels" class="size-labels"></div>
                                </div>



                                <script>
                                  document.addEventListener("DOMContentLoaded", function () {
                                    const bundleSize = 3; // Fixed bundle size of 3 pairs
                                    const sizesElement = document.getElementById('bundle-3-sizes');
                                    const sliderSection = document.getElementById('bundle-3-sliderSection');
                                    const selectedSizesContainer = document.getElementById('bundle-3-selectedSizes');
                                    const sizeLabels = document.getElementById('bundle-3-sizeLabels');
                                    let selectedSizes = [];
                                    let distribution = [];
                                    let selectedSizeData = [];
                                    let dots = [];

                                    // Initialize the grid
                                    function initializeGrid() {
                                      console.log('initializeGrid called');
                                      sliderSection.innerHTML = '';
                                      sliderSection.classList.add('grid-container');
                                      const cell = document.createElement('div');
                                      cell.classList.add('grid-cell');
                                      cell.dataset.column = 0;
                                      sliderSection.appendChild(cell);
                                    }

                                    // Create draggable dots
                                    function createDots() {
                                      console.log('createDots called');
                                      dots = [];
                                      let numDots = selectedSizes.length - 1; // For N sizes, create N-1 dots.
                                      for (let i = 0; i < numDots; i++) {
                                        let dot = document.createElement('div');
                                        dot.classList.add('draggable-dot');
                                        // We still store the intended segment info, but the key is the initial even placement.
                                        dot.dataset.position = `${i}-${i + 1}`;
                                        dots.push(dot);
                                      }
                                      dots.forEach(dot => sliderSection.appendChild(dot));
                                      return dots;
                                    }

                                    // Position the dots evenly along the slider on initialization.
                                    // Also integrate the snapping-to-grid (using cellWidth) and edge-buffer logic.
                                    function positionDots(dots) {
                                      console.log('positionDots called');
                                      const sliderWidth = sliderSection.offsetWidth;
                                      const cellWidth = sliderWidth / bundleSize;
                                      const buffer = cellWidth; // Buffer: one cell width at each end

                                      // For N selected sizes, evenly divide the slider so that each dot falls at ((i+1)/N) of the total width.
                                      dots.forEach((dot, index) => {
                                        // Calculate the default position (in pixels) as a fraction of slider width.
                                        let defaultLeft = ((index + 1) / selectedSizes.length) * sliderWidth;
                                        // Snap this default value to the nearest grid boundary (cellWidth).
                                        defaultLeft = Math.round(defaultLeft / cellWidth) * cellWidth;
                                        // Clamp the default position so that it is never closer than the buffer to either edge.
                                        defaultLeft = Math.max(buffer, Math.min(defaultLeft, sliderWidth - buffer));
                                        // Account for the dot’s own width offset and convert to a percentage.
                                        const dotOffset = dot.offsetWidth / 2;
                                        const percentagePosition = ((defaultLeft - dotOffset) / sliderWidth) * 100;
                                        dot.style.left = `${percentagePosition}%`;
                                        dot.style.top = `${sliderSection.offsetHeight / 2 - dot.offsetHeight / 2}px`;
                                      });

                                      calculateDistribution();
                                    }

                                    // Make dots draggable
                                    function makeDotsDraggable(dots) {
                                      dots.forEach((dot, index) => {
                                        let startX, initialLeft, originalCell, minBoundary, maxBoundary;
                                        let isDragging = false;

                                        // Calculate movement boundaries with buffer at the edges.
                                        function calculateBoundaries() {
                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          const buffer = cellWidth; // Buffer prevents dot from reaching extreme edges

                                          if (dots.length === 1) {
                                            // Allow full movement but not past the buffer boundaries
                                            minBoundary = buffer;
                                            maxBoundary = sliderWidth - buffer;
                                          } else {
                                            // For first dot, ensure it does not go past the left edge buffer.
                                            minBoundary = index === 0 ? buffer : (parseFloat(dots[index - 1].style.left) / 100) * sliderWidth + cellWidth;
                                            // For last dot, ensure it does not exceed sliderWidth - buffer.
                                            maxBoundary = index === dots.length - 1 ? sliderWidth - buffer : (parseFloat(dots[index + 1].style.left) / 100) * sliderWidth - cellWidth;
                                          }
                                        }

                                        function onMouseMove(e) {
                                          if (!isDragging) return;
                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                                          const deltaX = clientX - startX;

                                          // Compute the new position and clamp it to the boundaries
                                          let newLeft = initialLeft + deltaX;
                                          newLeft = Math.max(minBoundary, Math.min(newLeft, maxBoundary)); // Prevents dot from moving past allowed boundaries

                                          // Update the dot's position in percentage terms
                                          const newLeftPercentage = (newLeft / sliderWidth) * 100;
                                          dot.style.left = `${newLeftPercentage}%`;

                                          calculateDistribution();
                                        }

                                        function onMouseUp() {
                                          isDragging = false;
                                          document.removeEventListener('mousemove', onMouseMove);
                                          document.removeEventListener('touchmove', onMouseMove);

                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          let currentLeft = (parseFloat(dot.style.left) / 100) * sliderWidth;

                                          // Find the closest grid boundary
                                          let snappedLeft = Math.round(currentLeft / cellWidth) * cellWidth;

                                          // Prevent snapping onto an occupied boundary if multiple dots exist
                                          if (dots.length > 1) {
                                            dots.forEach((otherDot, otherIndex) => {
                                              if (otherIndex !== index) {
                                                let otherLeft = (parseFloat(otherDot.style.left) / 100) * sliderWidth;
                                                if (Math.abs(snappedLeft - otherLeft) < cellWidth) {
                                                  snappedLeft = snappedLeft > otherLeft ? otherLeft + cellWidth : otherLeft - cellWidth;
                                                }
                                              }
                                            });
                                          }

                                          // Apply the buffer at the edges so dots do not reach 0% or 100%
                                          const buffer = cellWidth; // Buffer equal to one cell width
                                          snappedLeft = Math.max(buffer, Math.min(snappedLeft, sliderWidth - buffer));

                                          // Apply smooth transition for snapping back into position
                                          dot.style.transition = 'left 0.3s ease-out';
                                          const snappedLeftPercentage = (snappedLeft / sliderWidth) * 100;
                                          dot.style.left = `${snappedLeftPercentage}%`;

                                          calculateDistribution();

                                          document.removeEventListener('mouseup', onMouseUp);
                                          document.removeEventListener('touchend', onMouseUp);
                                        }

                                        function onMouseDown(e) {
                                          if (selectedSizes.length === bundleSize) return;
                                          isDragging = true;
                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          startX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                                          initialLeft = dot.offsetLeft;
                                          originalCell = Math.round(initialLeft / cellWidth);
                                          calculateBoundaries(); // Update boundaries with the buffer in place

                                          dot.style.transition = 'none'; // Disable transition during drag

                                          document.addEventListener('mousemove', onMouseMove);
                                          document.addEventListener('touchmove', onMouseMove, { passive: true });
                                          document.addEventListener('mouseup', onMouseUp);
                                          document.addEventListener('touchend', onMouseUp);
                                        }

                                        dot.addEventListener('mousedown', onMouseDown);
                                        dot.addEventListener('touchstart', onMouseDown, { passive: true });
                                      });
                                    }

                                    // Calculate distribution
                                    function calculateDistribution() {
                                      console.log('calculateDistribution called');
                                      const numSizes = selectedSizes.length;
                                      const sliderWidth = sliderSection.offsetWidth;
                                      const cellWidth = sliderWidth / bundleSize;

                                      // Get each dot's left position in pixels
                                      const dots = Array.from(sliderSection.querySelectorAll('.draggable-dot'));
                                      const dotPositions = dots.map(dot => {
                                        const dotLeftPercentage = parseFloat(dot.style.left);
                                        return (dotLeftPercentage / 100) * sliderWidth;
                                      });

                                      // When only one size is selected, the entire bundle goes to it.
                                      if (numSizes === 1) {
                                        distribution = [bundleSize];
                                      } else {
                                        distribution = [];

                                        // First segment: from left edge (0) to the first dot.
                                        distribution.push(Math.round(dotPositions[0] / cellWidth));

                                        // Intermediate segments: for each gap between successive dots.
                                        for (let i = 1; i < dotPositions.length; i++) {
                                          distribution.push(Math.round((dotPositions[i] - dotPositions[i - 1]) / cellWidth));
                                        }

                                        // Last segment: from the last dot to the right edge.
                                        distribution.push(bundleSize - Math.round(dotPositions[dotPositions.length - 1] / cellWidth));
                                      }

                                      // Ensure that each quantity is at least 1 (or adjust to 0 if that’s acceptable).
                                      distribution = distribution.map(d => Math.max(1, d));

                                      // Adjust the distribution so that the total sums to bundleSize.
                                      const currentTotal = distribution.reduce((a, b) => a + b, 0);
                                      const diff = bundleSize - currentTotal;
                                      let iterationCount = 0;
                                      const maxIterations = bundleSize * 2;

                                      if (diff !== 0) {
                                        // Distribute the difference (which might be positive or negative) evenly.
                                        for (let i = 0; i < Math.abs(diff); i++) {
                                          iterationCount++;
                                          if (iterationCount > maxIterations) {
                                            console.error('Max iterations reached in calculateDistribution for loop');
                                            break;
                                          }
                                          // If diff is positive, add 1 to one segment; if negative, subtract 1.
                                          const indexToAdjust = diff > 0 ? i % distribution.length : distribution.length - 1 - (i % distribution.length);
                                          distribution[indexToAdjust] += diff > 0 ? 1 : -1;
                                        }
                                      }

                                      // Ensure no segment falls below 1 after adjustment.
                                      distribution = distribution.map(d => Math.max(1, d));
                                      console.log('calculateDistribution - distribution:', distribution);

                                      updateUI();
                                    }


                                    // Update the UI
                                    function updateUI() {
                                      console.log('updateUI called');
                                      sizeLabels.innerHTML = '';
                                      selectedSizes.forEach((size, index) => {
                                        const label = document.createElement('div');
                                        label.textContent = `Size ${size}: ${distribution[index]} ${formatQuantity(distribution[index])}`;
                                        label.id = `bundle-12-sizeLabel-${size}`;
                                        sizeLabels.appendChild(label);
                                      });
                                      updateselectedSizeData();
                                    }

                                    // Update Selected Sizes
                                    function updateselectedSizes() {
                                      console.log('updateselectedSizes called');
                                      console.log('updateselectedSizes - selectedSizes:', selectedSizes);
                                      selectedSizesContainer.innerHTML = '';
                                      initializeGrid();
                                      // Calculate distribution before updating the slider
                                      calculateDistribution();
                                      updateSlider();
                                      selectedSizeData = selectedSizes.map((size, index) => ({
                                        size: parseFloat(size),
                                        quantity: distribution[index] || 1,
                                      }));
                                      console.log('updateselectedSizes - selectedSizeData:', selectedSizeData);
                                      // Toggle sliderSection visibility based on selectedSizes length
                                      if (selectedSizes.length > 1) {
                                        sliderSection.style.display = 'block';
                                        calculateDistribution();
                                        updateSlider();
                                      } else {
                                        sliderSection.style.display = 'none';
                                      }
                                      updatePayNowButtonsVisibility()
                                    }

                                    // Update Slider for Selected Sizes
                                    function updateSlider() {
                                      console.log('updateSlider called');
                                      // Remove existing dots
                                      const existingDots = sliderSection.querySelectorAll('.draggable-dot');
                                      existingDots.forEach(dot => dot.remove());
                                      const dots = createDots(); // Dots are created first
                                      positionDots(dots); // Then they are positioned
                                      makeDotsDraggable(dots);
                                    }

                                    function formatQuantity(quantity) {
                                      return quantity === 1 ? '1X' : `${quantity}X`;
                                    }

                                    function updateselectedSizeData() {
                                      console.log('updateselectedSizeData called');
                                      console.log('updateselectedSizeData - distribution:', distribution);
                                      selectedSizeData = selectedSizes.map((size, index) => ({
                                        size: parseFloat(size),
                                        quantity: distribution[index],
                                      }));
                                      console.log('updateselectedSizeData - selectedSizeData:', selectedSizeData);
                                      selectedSizesContainer.dataset.selectedSizeData = JSON.stringify(selectedSizeData); // Moved here


                                      // Display the strictly formatted quantities for selected sizes
                                      selectedSizesContainer.innerHTML = '';
                                      selectedSizeData.forEach((data) => {
                                        const sizeTag = document.createElement('div');
                                        sizeTag.classList.add('selected-size');

                                        const sizeSpan = document.createElement('span');
                                        sizeSpan.textContent = `${formatQuantity(data.quantity)}Size ${data.size}`;

                                        const clearBtn = document.createElement('button');
                                        clearBtn.classList.add('clear-btn');
                                        clearBtn.textContent = 'X';

                                        // Define a handler function that clears the option from both UI and data
                                        const clearHandler = () => {
                                          // Remove from our selectedSizes array:
                                          selectedSizes = selectedSizes.filter(s => s !== String(data.size));
                                          // Also update the <select> element to unselect this option:
                                          Array.from(sizesElement.options).forEach(option => {
                                            if (option.value === String(data.size)) {
                                              option.selected = false;
                                            }
                                          });
                                          // Finally update the UI / re-calculate distribution:
                                          updateselectedSizes();
                                        };

                                        // **Inject drag detection event listeners here for the clear button:**
                                        // Define a drag threshold in pixels.
                                        const DRAG_THRESHOLD = 5;

                                        clearBtn.addEventListener('pointerdown', function (e) {
                                          // Record the starting pointer coordinates and reset the dragging flag.
                                          this._dragStartX = e.clientX;
                                          this._dragStartY = e.clientY;
                                          this._isDragging = false;
                                        });

                                        clearBtn.addEventListener('pointermove', function (e) {
                                          // Calculate how far the pointer has moved from the starting position.
                                          const dx = e.clientX - this._dragStartX;
                                          const dy = e.clientY - this._dragStartY;
                                          if (Math.sqrt(dx * dx + dy * dy) > DRAG_THRESHOLD) {
                                            // If movement exceeds the threshold, mark as dragging.
                                            this._isDragging = true;
                                          }
                                        });

                                        clearBtn.addEventListener('pointerup', function (e) {
                                          // Only execute the clear action if the pointer did not move too far.
                                          if (!this._isDragging) {
                                            clearHandler();
                                          }
                                          // Clean up.
                                          delete this._dragStartX;
                                          delete this._dragStartY;
                                          delete this._isDragging;
                                        });

                                        // Also, for good measure, cancel the action on pointercancel.
                                        clearBtn.addEventListener('pointercancel', function (e) {
                                          delete this._dragStartX;
                                          delete this._dragStartY;
                                          delete this._isDragging;
                                        });

                                        sizeTag.appendChild(sizeSpan);
                                        sizeTag.appendChild(clearBtn);
                                        selectedSizesContainer.appendChild(sizeTag);
                                      });
                                    };

                                    // Assume bundleSize is already defined (e.g., 12)
                                    let previousSelections = []; // global variable to hold the last valid selection

                                    sizesElement.addEventListener('change', (e) => {
                                      // Get the current list of selected option values
                                      const currentSelections = Array.from(e.target.selectedOptions).map(option => option.value);
                                      console.log('Current selections:', currentSelections);

                                      // If the new count exceeds the allowed limit...
                                      if (currentSelections.length > bundleSize) {
                                        // Determine the newly added options by comparing with the previousSelections.
                                        const newlyAdded = currentSelections.filter(val => !previousSelections.includes(val));
                                        // Alert the user
                                        alert(`You can only select up to ${bundleSize} sizes. Please deselect an option before adding ${newlyAdded.join(', ')}`);

                                        // For each newly added option, set its "selected" property to false.
                                        newlyAdded.forEach(val => {
                                          const option = e.target.querySelector(`option[value="${val}"]`);
                                          if (option) {
                                            option.selected = false;
                                          }
                                        });
                                        // After unselecting the newly added options, update currentSelections
                                        currentSelections.length = 0;
                                        Array.from(e.target.selectedOptions).forEach(option => currentSelections.push(option.value));
                                      }

                                      // Save the valid selections for next time
                                      previousSelections = currentSelections.slice(); // copy the array
                                      selectedSizes = currentSelections;
                                      console.log('Final selected sizes:', selectedSizes);

                                      // Call your update function with the valid selections
                                      updateselectedSizes();
                                    });
                                    window.addEventListener('resize', () => {
                                      updateSlider();
                                    });
                                  });
                                </script>

                                <div id="buttonContainer">
                                  <button class="buynow" id="updateOptionsButton3">Add To Cart</button>
                                </div>

                              </div>
                            </div>
                          </div>


                        </div>
                      </div>

                      <div class="1pair">
                        <div class="col-md-6">
                          <div class="card" role="button">

                            <div class="card-body text-center"
                              style="justify-content: flex-start; flex-direction: row; position: relative; display: block;">
                              <h5 class="cardimage_heading ai-style-change-1"
                                style="/* -webkit-text-stroke: 5px black; */">1 Pair</h5>
                              <img class="product card_image_class" id="product.card"
                                src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/31960555-02bc-4740-9c2b-5f4d16784837/bitmap_g1124.png?content-type=image%2Fpng"
                                alt="Card Image">

                              <div class="price"
                                style="display: flex;flex-Direction: column;justify-Content: center;align-Items: center;position: relative;height: auto;width: 100%;bottom: 75px;">


                                <h5 class="card-title"
                                  style="position: absolute;-webkit-text-stroke: 9px black;right: -8px;width: auto;left: auto;/* max-width: 100%; */display: inline-block;font-size: clamp(2.25rem, 5vw, 23rem);">
                                  £59.99
                                </h5>
                                <h5 class="card-title"
                                  style="position: absolute;/* -webkit-text-stroke: 9px black; */right: -8px;width: auto;left: auto;/* max-width: 100%; */display: inline-block;font-size: clamp(2.25rem, 5vw, 13rem);">
                                  £59.99</h5>

                              </div>

                            </div>
                            <!-- Additional Content -->
                            <div class="additionalContent">
                              <h5 class="additionalContenth5">1 Pair</h5>
                              <h5 class="additionalContenth5">£59.99</h5>

                              <div class="slider1" id="slider-section">
                                <h1>"STEPPER"</h1>

                                <!-- Bundle Selection -->
                                <div class="bundle-selection" style="display: none;">
                                  <label for="bundle-bundleSize">Select Bundle Size:</label>
                                  <select id="bundle-bundleSize" disabled="">
                                    <option value="1">1 Pair</option>
                                  </select>
                                </div>

                                <!-- Size Selection -->
                                <div class="size-selection">
                                  <label for="bundle-sizes">Size:</label>
                                  <select id="bundle-sizes">
                                    <option value="3">Size 3</option>
                                    <option value="3.5">Size 3.5</option>
                                    <option value="4">Size 4</option>
                                    <option value="4.5">Size 4.5</option>
                                    <option value="5">Size 5</option>
                                    <option value="5.5">Size 5.5</option>
                                    <option value="6">Size 6</option>
                                    <option value="6.5">Size 6.5</option>
                                    <option value="7">Size 7</option>
                                    <option value="7.5">Size 7.5</option>
                                    <option value="8">Size 8</option>
                                    <option value="8.5">Size 8.5</option>
                                    <option value="9">Size 9</option>
                                    <option value="9.5">Size 9.5</option>
                                    <option value="10">Size 10</option>
                                    <option value="11">Size 11</option>
                                    <option value="11.5">Size 11.5</option>
                                    <option value="12">Size 12</option>
                                    <option value="13">Size 13</option>
                                  </select>
                                </div>

                                <!-- Display Selected Size -->
                                <div id="bundle-selectedSizes" class="selected-sizes"></div>


                                <script>
                                  document.addEventListener("DOMContentLoaded", function () {
                                    const bundleSize = 1; // Fixed bundle size of 1 pair
                                    const sizesElement = document.getElementById('bundle-sizes');
                                    const selectedSizesContainer = document.getElementById('bundle-selectedSizes');
                                    let selectedSize = null;

                                    // Function to update the displayed selected size and the data attribute.
                                    function updateSelectedSize() {
                                      // Clear any previous content.
                                      selectedSizesContainer.innerHTML = '';
                                      let selectedSizeData = [];

                                      if (selectedSize) {
                                        // Append a new element showing the selected size and quantity.
                                        //  selectedSizesContainer.innerHTML = `
                                        // <div class="selected-size">You selected Size ${selectedSize}: Quantity 1</div>
                                        //  `;
                                        // Create a data object that your overlay logic can read.
                                        selectedSizeData = [{ size: parseInt(selectedSize, 10), quantity: 1 }];
                                      }
                                      // Store the data as a JSON string on a data attribute.
                                      selectedSizesContainer.dataset.selectedSizeData = JSON.stringify(selectedSizeData);
                                      // Call the overlay button update function (assumed to be globally available).
                                      updatePayNowButtonsVisibility()
                                    }

                                    let previousSelections = []; // To track the previous valid selection

                                    sizesElement.addEventListener('change', (e) => {
                                      // For a single-select element, this will be an array of one (or zero) values.
                                      const currentSelections = Array.from(e.target.selectedOptions).map(option => option.value);
                                      console.log('Current selections:', currentSelections);

                                      // Check if the selection count exceeds the allowed limit.
                                      if (currentSelections.length > bundleSize) {
                                        // Determine which options were newly added.
                                        const newlyAdded = currentSelections.filter(val => !previousSelections.includes(val));
                                        alert(`You can only select up to ${bundleSize} sizes. Please deselect an option before adding ${newlyAdded.join(', ')}`);

                                        // Unselect the newly added options.
                                        newlyAdded.forEach(val => {
                                          const option = e.target.querySelector(`option[value="${val}"]`);
                                          if (option) {
                                            option.selected = false;
                                          }
                                        });
                                        // Update the currentSelections after removing extra selections.
                                        currentSelections.length = 0;
                                        Array.from(e.target.selectedOptions).forEach(option => currentSelections.push(option.value));
                                      }

                                      // Save the current (valid) selection.
                                      previousSelections = currentSelections.slice(); // copy the array

                                      // For single select, assign the first (and only) value or null.
                                      selectedSize = currentSelections.length > 0 ? currentSelections[0] : null;
                                      console.log('Final selected size:', selectedSize);

                                      // Update the selected sizes container with the new selection.
                                      updateSelectedSize();
                                    });
                                  });
                                </script>

                                <div id="buttonContainer">
                                  <button class="buynow" id="updateOptionsButton1">Add To Cart</button>
                                </div>

                              </div>
                            </div>
                          </div>


                        </div>

                        <script>  document.addEventListener("DOMContentLoaded", () => {
                            // Detect touch device and use appropriate threshold
                            const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
                            const DRAG_THRESHOLD = isTouchDevice ? 15 : 5; // Higher threshold for touch devices

                            document.querySelectorAll(".col-md-6").forEach((card) => {
                              let pointerDown = false;
                              let isDragging = false;
                              let startX = 0, startY = 0;
                              let startTime = 0;

                              card.addEventListener("pointerdown", (e) => {
                                // Don't track pointer if clicking on interactive elements
                                if (e.target.closest(".additionalContent select, .additionalContent input, .additionalContent button, .slider-section, .draggable-dot, .size-selection, .selected-sizes")) {
                                  return;
                                }
                                pointerDown = true;
                                isDragging = false;
                                startX = e.clientX;
                                startY = e.clientY;
                                startTime = Date.now();
                              });

                              card.addEventListener("pointermove", (e) => {
                                if (!pointerDown) return;
                                const dx = e.clientX - startX;
                                const dy = e.clientY - startY;
                                const distance = Math.sqrt(dx * dx + dy * dy);
                                if (distance > DRAG_THRESHOLD) {
                                  isDragging = true;
                                }
                              });

                              card.addEventListener("pointerup", (e) => {
                                const timeDiff = Date.now() - startTime;
                                const dx = e.clientX - startX;
                                const dy = e.clientY - startY;
                                const distance = Math.sqrt(dx * dx + dy * dy);

                                // If it was quick and minimal movement, treat as tap not drag
                                if (isTouchDevice && timeDiff < 300 && distance < DRAG_THRESHOLD) {
                                  isDragging = false;
                                }

                                pointerDown = false;
                              });

                              card.addEventListener("click", (e) => {
                                // If dragging occurred or if the event is from an interactive element inside the overlay, do nothing.
                                if (isDragging) return;
                                if (e.target.closest(".additionalContent select, .additionalContent input, .additionalContent button, .slider-section, .draggable-dot, .size-selection, .selected-sizes, .clear-btn")) return;
                                // Toggle additional content for the clicked card.
                                toggleVisibility(card);
                              });
                            });
                          });

                          function hideAllAdditionalContent() {
                            document.querySelectorAll(".additionalContent").forEach(panel => {
                              panel.classList.remove("open");
                              const arrow = panel.parentElement.querySelector(".toggleArrow");
                              if (arrow) arrow.classList.remove("rotated");
                            });
                          }

                          function toggleVisibility(card) {
                            const overlay = card.querySelector(".additionalContent");
                            const arrow = card.querySelector(".toggleArrow");
                            if (!overlay) return;

                            // First, close all other additional content panels (if needed)
                            document.querySelectorAll('.additionalContent.open').forEach(panel => {
                              if (panel !== overlay) {
                                panel.classList.remove('open');
                                const panelArrow = panel.parentElement.querySelector('.toggleArrow');
                                if (panelArrow) panelArrow.classList.remove('rotated');
                              }
                            });

                            // Toggle this one:
                            overlay.classList.toggle("open");
                            if (arrow) {
                              arrow.classList.toggle("rotated");
                            }

                            updatePayNowButtonsVisibility()
                          }




                          /* ==========================================
                             2. PREVENT INTERACTIVE ELEMENTS INSIDE THE OVERLAY
                             ========================================== */
                          document.addEventListener("DOMContentLoaded", () => {
                            // Use event delegation to stop propagation for interactive elements
                            // This works for both existing and dynamically created elements
                            const eventTypes = ["click", "pointerdown", "pointermove", "pointerup", "touchstart", "touchmove", "touchend", "mousedown", "mousemove", "mouseup"];

                            eventTypes.forEach(eventType => {
                              document.addEventListener(eventType, (e) => {
                                // Check if the event target is an interactive element inside additionalContent
                                if (e.target.closest(".additionalContent select, .additionalContent input, .additionalContent button, .size-selection, .selected-sizes, .slider-section, .clear-btn, .draggable-dot")) {
                                  e.stopPropagation();
                                }
                              }, { capture: true });
                            });
                          });</script>

                      </div>

                      <style>
                        .all-white.cards,
                        .all-white.cards * {
                          user-select: none;
                          /* Disable text selection */
                          -webkit-user-select: none;
                          -ms-user-select: none;
                        }

                        .all-white.cards img {
                          pointer-events: none;
                          /* Disable pointer events for images */
                        }


                        .products.and.order {
                          width: 100%;
                          /* Makes the element fill the width of its parent */
                        }


                        h5.cardimage_heading {
                          position: absolute;
                          top: 60px;
                          left: 40px;
                        }

                        .all-white.cards {
                          width: 100%;
                          margin: 0 auto;
                          padding: 0px;
                          justify-items: normal;
                          display: grid;
                          grid-template-columns: repeat(4, 100%);
                          grid-auto-flow: row;
                          overflow-x: visible;
                          grid-auto-rows: auto;
                          height: 521.718px;
                          gap: 20px;
                          transition: transform 0.3s ease-in-out;
                          pointer-events: auto;
                          /* Allow clicks but prevent drag */
                          user-select: none;
                          /* Prevent text selection during click */
                          -webkit-user-drag: none;
                          /* Prevent dragging on webkit browsers */
                        }

                        .all-white.cards .col-md-6 {
                          width: auto !important;
                          height: 461.718px;
                        }

                        .all-white.cards .col-md-6>div {
                          height: 461.718px;
                        }

                        h3.content_heading1 {
                          font-size: 24px;
                        }

                        .all-white.cards {
                          position: relative;
                          transform: translateX(0px);
                        }

                        all-white.cards:hover {
                          transform: translateX(-1614px);
                        }
                      </style>

                      <style>
                        h5.card-title {
                          position: relative;
                          top: 450px;
                          left: 200px;
                          font-size: 50px
                        }

                        h5.cardimage_heading {
                          position: absolute;
                          top: 40px;
                          left: 2px;
                          width: 100%;
                          text-align: left;
                          text-shadow: 2.5px 3px rgba(0, 0, 0, 0.25);
                        }


                        h5.cardimage_heading {
                          font-size: clamp(35px, 5vw, 50px) !important;
                        }
                      </style>

                      <script>
                        document.addEventListener("DOMContentLoaded", function () {
                          const carouselTrack = document.querySelector(".all-white.cards");
                          if (!carouselTrack) return;

                          const cards = document.querySelectorAll(".all-white.cards .col-md-6");
                          const cardCount = cards.length;
                          let currentIndex = 0;
                          let isDragging = false;
                          let startPosition = 0;
                          let currentTranslate = 0;
                          let previousTranslate = 0;
                          let startTime = 0;

                          function getSlideWidth() {
                            const baseWidth = cards[0] ? cards[0].offsetWidth : 0;
                            const gap = 20; // adjust as needed
                            return baseWidth + gap;
                          }

                          function calculateTranslateX(index) {
                            let translateX = 0;
                            const gap = 20;
                            for (let i = 0; i < index; i++) {
                              translateX += cards[i].offsetWidth + gap;
                            }
                            return -translateX;
                          }

                          function setPositionByIndex() {
                            currentTranslate = calculateTranslateX(currentIndex);
                            carouselTrack.style.transition = "transform 0.3s ease-in-out";
                            carouselTrack.style.transform = `translateX(${currentTranslate}px)`;
                            previousTranslate = currentTranslate;
                          }

                          function handleStart(e) {
                            // Do not start carousel drag if inside interactive areas
                            if (e.target.closest("#slider-section, .additionalContent.open")) return;
                            isDragging = true;
                            startTime = Date.now();
                            startPosition = e.type.includes("mouse") ? e.pageX : e.touches[0].clientX;
                            carouselTrack.style.transition = "none";
                          }

                          function handleMove(e) {
                            if (!isDragging) return;
                            if (e.target.closest("#slider-section, .additionalContent.open")) return;
                            const currentPosition = e.type.includes("mouse") ? e.pageX : e.touches[0].clientX;
                            const diff = currentPosition - startPosition;

                            // Only start moving if dragged more than threshold (prevents accidental movement on tap)
                            const isTouchDevice = e.type.includes("touch");
                            const minDrag = isTouchDevice ? 20 : 10;
                            if (Math.abs(diff) < minDrag) return;

                            currentTranslate = previousTranslate + diff;
                            carouselTrack.style.transform = `translateX(${currentTranslate}px)`;
                          }

                          function handleEnd(e) {
                            if (e.target.closest("#slider-section, .additionalContent.open")) {
                              isDragging = false;
                              return;
                            }
                            if (!isDragging) return;

                            const endTime = Date.now();
                            const elapsedTime = endTime - startTime;
                            const endPosition = e.type.includes("mouse") ? e.pageX : e.changedTouches[0].clientX;
                            const movedBy = endPosition - startPosition;

                            // If it was a quick tap (< 300ms) with minimal movement, don't change position
                            const isTouchDevice = e.type.includes("touch");
                            const minDrag = isTouchDevice ? 20 : 10;
                            if (elapsedTime < 300 && Math.abs(movedBy) < minDrag) {
                              isDragging = false;
                              // Reset to current position
                              carouselTrack.style.transition = "transform 0.3s ease-in-out";
                              carouselTrack.style.transform = `translateX(${previousTranslate}px)`;
                              return;
                            }

                            isDragging = false;
                            const slideWidth = getSlideWidth();
                            const velocity = (movedBy / elapsedTime) * 1000; // pixels per second
                            const inertiaFactor = 0.3;
                            const extraDistance = velocity * inertiaFactor;
                            const targetTranslate = previousTranslate + movedBy + extraDistance;
                            let targetIndex = Math.round(-targetTranslate / slideWidth);
                            targetIndex = Math.max(0, Math.min(targetIndex, cardCount - 1));
                            currentIndex = targetIndex;
                            setPositionByIndex();
                          }

                          // DISABLED: Drag functionality removed - carousel only moves via navigation buttons
                          // document.addEventListener("mousemove", handleMove, { capture: true });
                          // document.addEventListener("mouseup", handleEnd, { capture: true });
                          // document.addEventListener("touchmove", handleMove, { passive: true, capture: true });
                          // document.addEventListener("touchend", handleEnd, { capture: true });

                          // carouselTrack.addEventListener("mousedown", handleStart);
                          // carouselTrack.addEventListener("touchstart", handleStart, { passive: true });
                          // carouselTrack.addEventListener("mouseleave", () => { if (isDragging) handleEnd(); });

                          setPositionByIndex();
                        });
                      </script>


                      <!---* pay now --->

                      <!-- ----- Bundle A / default variant ----- -->
                      <!-- ----- Bundle A / default variant (scoped) ----- -->
                      <script id="yui_3_17_2_1_1735428807640_117">
                        (function () {
                          /* -------------------------------------------------- *
                           *  Helpers                                           *
                           * -------------------------------------------------- */

                          const CLICK_DELAY_MS = 300;          // single source of truth

                          function refreshCartIframe() {
                            const iframe = document.getElementById('cartIframe');
                            if (iframe) {
                              iframe.addEventListener('load', stopCartLoading, { once: true });
                              iframe.src = iframe.src;             // reload → hide spinner on 'load'
                            } else {
                              console.error('Cart iframe not found');
                            }
                          }

                          function waitForYUI(cb) {
                            if (typeof YUI !== 'undefined') cb();
                            else setTimeout(() => waitForYUI(cb), 100);
                          }

                          /* -------------------------------------------------- *
                           *  Main                                              *
                           * -------------------------------------------------- */

                          document.addEventListener('DOMContentLoaded', () => {
                            /* Buttons that trigger a bulk “Add to cart” */
                            const button1 = document.getElementById('updateOptionsButton1');
                            const button3 = document.getElementById('updateOptionsButton3');
                            const button7 = document.getElementById('updateOptionsButton7');
                            const button12 = document.getElementById('updateOptionsButton12');

                            /* Element that Squarespace looks at for the current variant */
                            const targetElement = document.getElementById('yui_3_17_2_1_1733703950054_119');

                            /* -------------------------------------------------- *
                             *  Core: updateOptions                               *
                             * -------------------------------------------------- */
                            const updateOptions = (selectedSizesDivId) => {
                              targetElement.setAttribute('data-unselected-options', '[]');

                              /* Grab the product-level variants array */
                              const variantsData = JSON.parse(
                                document.querySelector('.pdp-selection .product-variants')
                                  .getAttribute('data-variants')
                              );

                              /* Wait for the size-picker to finish building its dataset */
                              const selectedSizesDiv = document.getElementById(selectedSizesDivId);
                              const waitForSizeData = () => {
                                if (!selectedSizesDiv?.dataset?.selectedSizeData) {
                                  setTimeout(waitForSizeData, 100);
                                  return;
                                }

                                /* -------------------- *
                                 * 1. Parse the payload *
                                 * -------------------- */
                                const selectedSizesData = JSON.parse(selectedSizesDiv.dataset.selectedSizeData);
                                if (!Array.isArray(selectedSizesData) || selectedSizesData.length === 0) {
                                  console.error('No size data found in', selectedSizesDivId);
                                  return;
                                }

                                /* ------------------------------- *
                                 * 2. Sequentially process sizes   *
                                 * ------------------------------- */
                                const processSizeAt = (idx) => {
                                  if (idx >= selectedSizesData.length) {
                                    /* All sizes done → let the iframe catch up */
                                    setTimeout(refreshCartIframe, CLICK_DELAY_MS);
                                    return;
                                  }

                                  const { size, quantity } = selectedSizesData[idx] ?? {};
                                  if (!size || !quantity) {
                                    console.error('Malformed entry at index', idx, selectedSizesData[idx]);
                                    processSizeAt(idx + 1);
                                    return;
                                  }

                                  /* -------------------------------------- *
                                   * 2a. Pick the variant for this *size*    *
                                   * -------------------------------------- */
                                  const matchingVariants = variantsData.filter(v =>
                                    v.optionValues?.some(o => o.value === size.toString())
                                  );

                                  let selectedVariant =
                                    matchingVariants.find(v =>
                                      v.optionValues?.some(o => o.value.toLowerCase() === 'all-white')
                                    )
                                    || matchingVariants[0]
                                    || variantsData[Math.floor(Math.random() * variantsData.length)];

                                  /* -------------------------------------- *
                                   * 2b. Tell Squarespace which variant it is *
                                   * -------------------------------------- */
                                  targetElement.setAttribute('data-selected-variant', JSON.stringify(selectedVariant));
                                  targetElement.setAttribute('data-variant-in-stock', 'true');

                                  /* -------------------------------------- *
                                   * 2c. Simulate the required number of clicks *
                                   * -------------------------------------- */
                                  waitForYUI(() => {
                                    const addToCartButton = document.querySelector(
                                      '.sqs-add-to-cart-button.sqs-suppress-edit-mode.sqs-button-element--primary'
                                    );
                                    if (!addToCartButton) {
                                      console.error('Add-to-cart button not found');
                                      processSizeAt(idx + 1);
                                      return;
                                    }

                                    let clicksDone = 0;
                                    const clickLoop = () => {
                                      if (clicksDone < quantity) {
                                        Y.Event.simulate(addToCartButton, 'click');
                                        clicksDone++;
                                        setTimeout(clickLoop, CLICK_DELAY_MS);
                                      } else {
                                        processSizeAt(idx + 1);
                                      }
                                    };
                                    clickLoop();
                                  });
                                };

                                processSizeAt(0);   // kick-off
                              };

                              waitForSizeData();
                            };

                            /* -------------------------------------------------- *
                             *  Wire-up buttons                                   *
                             * -------------------------------------------------- */

                            button1?.addEventListener('click', () => { startCartLoading(); updateOptions('bundle-selectedSizes') });
                            button3?.addEventListener('click', () => { startCartLoading(); updateOptions('bundle-3-selectedSizes') });
                            button7?.addEventListener('click', () => { startCartLoading(); updateOptions('bundle-7-selectedSizes') });
                            button12?.addEventListener('click', () => { startCartLoading(); updateOptions('bundle-12-selectedSizes') });
                          });
                        })();               /* <--- this one-liner isolates everything */

                        function refreshCartIframe() {
                          const iframe = document.getElementById('cartIframe');
                          if (iframe) {
                            iframe.addEventListener('load', stopCartLoading, { once: true }); // <‑‑ new
                            iframe.src = iframe.src;                 // hard reload ⇒ state update
                          }
                        }

                        /* Card Navigation Functionality */
                        (function () {
                          document.addEventListener('DOMContentLoaded', function () {
                            const cardSections = {
                              'all-white': {
                                container: document.getElementById('all-white-cards'),
                                currentIndex: 0
                              },
                              'all-black': {
                                container: document.getElementById('all-black-cards'),
                                currentIndex: 0
                              }
                            };

                            function getCardWidth(section) {
                              const container = cardSections[section].container;
                              if (!container) return 0;
                              const firstCard = container.querySelector('.col-md-6');
                              if (!firstCard) return 0;
                              return firstCard.offsetWidth + 20; // card width + gap
                            }

                            function getTotalCards(section) {
                              const container = cardSections[section].container;
                              if (!container) return 0;
                              return container.querySelectorAll('.col-md-6').length;
                            }

                            function navigateCards(section, direction) {
                              const sectionData = cardSections[section];
                              if (!sectionData || !sectionData.container) return;

                              const totalCards = getTotalCards(section);
                              if (totalCards === 0) return;

                              const cardWidth = getCardWidth(section);
                              const maxIndex = totalCards - 1;

                              if (direction === 'next') {
                                if (sectionData.currentIndex < maxIndex) {
                                  sectionData.currentIndex++;
                                } else {
                                  sectionData.currentIndex = 0; // Loop back to start
                                }
                              } else if (direction === 'prev') {
                                if (sectionData.currentIndex > 0) {
                                  sectionData.currentIndex--;
                                } else {
                                  sectionData.currentIndex = maxIndex; // Loop to end
                                }
                              }

                              const translateX = -(sectionData.currentIndex * cardWidth);
                              sectionData.container.style.transform = `translateX(${translateX}px)`;
                              sectionData.container.style.transition = 'transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                            }

                            // Add click event listeners to navigation buttons
                            document.querySelectorAll('.nav-btn').forEach(button => {
                              button.addEventListener('click', function (e) {
                                e.preventDefault();
                                e.stopPropagation();

                                const section = this.getAttribute('data-section');
                                const direction = this.classList.contains('nav-btn-next') ? 'next' : 'prev';

                                // Add click animation
                                this.classList.add('clicked');
                                setTimeout(() => {
                                  this.classList.remove('clicked');
                                }, 300);

                                navigateCards(section, direction);
                              });
                            });
                          });
                        })();

                      </script>


                    </div>
                    <!-- Navigation Buttons for ALL-BLACKS -->
                    <div class="section-nav-controls">
                      <p class="section-heading all-blacks-heading">ALL-BLACKS.</p>
                      <div class="nav-buttons-group">
                        <button class="nav-btn nav-btn-prev" data-section="all-black" aria-label="Previous">
                          <span class="nav-btn-icon">◄</span>
                        </button>
                        <button class="nav-btn nav-btn-next" data-section="all-black" aria-label="Next">
                          <span class="nav-btn-icon">►</span>
                        </button>
                      </div>
                    </div>
                    <div class="all-black product cards" id="all-black-cards">

                      <div class="bundle12">
                        <div class="col-md-6">
                          <div class="card" role="button">
                            <div class="card-body text-center"
                              style="justify-content: flex-start; flex-direction: row; position: relative; display: block;">
                              <h5 class="cardimage_heading ai-style-change-1"
                                style="/* -webkit-text-stroke: 5px black; */">12 Pairs</h5>
                              <img class="product card_image_class" id="product.card"
                                src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/a89ab4a1-b48b-47f0-9b11-4e2df0cfd91e/bitmap_g1119.png?content-type=image%2Fpng"
                                alt="Card Image">
                              <div class="price"
                                style="display: flex;flex-Direction: column;justify-Content: center;align-Items: center;position: relative;height: auto;width: 100%;bottom: 75px;">


                                <h5 class="card-title"
                                  style="position: absolute;-webkit-text-stroke: 9px black;right: -18px;width: auto;left: auto;/* max-width: 100%; */display: inline-block;font-size: clamp(2.25rem, 5vw, 23rem);">
                                  £689.99
                                </h5>
                                <h5 class="card-title"
                                  style="position: absolute;/* -webkit-text-stroke: 9px black; */right: -18px;width: auto;left: auto;/* max-width: 100%; */display: inline-block;font-size: clamp(2.25rem, 5vw, 13rem);">
                                  £689.99</h5>

                              </div>
                            </div>
                            <!-- Additional Content -->
                            <div class="additionalContent">
                              <h5 class="additionalContenth5">12 Pairs</h5>
                              <h5 class="additionalContenth5">£689.99</h5>

                              <div class="slider12" id="slider-section">
                                <h1>"BIG BALLER"<br><u>DELUXE</u></h1>

                                <!-- Bundle Selection -->
                                <div class="bundle-selection" style="display: none;">
                                  <label for="bundle-12-bundleSizeB">Select Bundle Size:</label>
                                  <select id="bundle-12-bundleSizeB">
                                    <option value="12">12 Pairs</option>
                                  </select>
                                </div>

                                <!-- Size Selection -->
                                <div class="size-selection">
                                  <label for="sizes">Sizes:</label>
                                  <select id="bundle-12-sizesB" multiple="" fdprocessedid="rjl6oh">
                                    <option value="3">Size 3</option>
                                    <option value="3.5">Size 3.5</option>
                                    <option value="4">Size 4</option>
                                    <option value="4.5">Size 4.5</option>
                                    <option value="5">Size 5</option>
                                    <option value="5.5">Size 5.5</option>
                                    <option value="6">Size 6</option>
                                    <option value="6.5">Size 6.5</option>
                                    <option value="7">Size 7</option>
                                    <option value="7.5">Size 7.5</option>
                                    <option value="8">Size 8</option>
                                    <option value="8.5">Size 8.5</option>
                                    <option value="9">Size 9</option>
                                    <option value="9.5">Size 9.5</option>
                                    <option value="10">Size 10</option>
                                    <option value="11">Size 11</option>
                                    <option value="11.5">Size 11.5</option>
                                    <option value="12">Size 12</option>
                                    <option value="13">Size 13</option>
                                  </select>
                                </div>

                                <!-- Selected Sizes -->
                                <div id="bundle-12-selectedSizesB" class="selected-sizes"
                                  data-selected-size-data-b="[]">
                                </div>

                                <!-- Slider Section -->
                                <div id="bundle-12-sliderSectionB" class="slider-section" style="display: none;">
                                  <div class="slider-container"
                                    style="position: relative; height: 50px; width: 100%; background-color: #f0f0f0; border: 1px solid #ccc;">
                                    <div id="bundle-12-sliderB" class="slider"
                                      style="position: relative; height: 100%; width: 100%;"></div>
                                  </div>
                                  <div id="bundle-12-sizeLabelsB" class="size-labels"></div>
                                </div>
                              </div>

                              <script>
                                document.addEventListener("DOMContentLoaded", function () {
                                  const bundleSize = 12; // Fixed bundle size of 12 pairs
                                  const sizesElement = document.getElementById('bundle-12-sizesB');
                                  const sliderSection = document.getElementById('bundle-12-sliderSectionB');
                                  const selectedSizesContainer = document.getElementById('bundle-12-selectedSizesB');
                                  const sizeLabels = document.getElementById('bundle-12-sizeLabelsB');
                                  let selectedSizesB = [];
                                  let distribution = [];
                                  let selectedSizeData = [];
                                  let dots = [];

                                  // Initialize the grid
                                  function initializeGrid() {
                                    console.log('initializeGrid called');
                                    sliderSection.innerHTML = '';
                                    sliderSection.classList.add('grid-container');
                                    const cell = document.createElement('div');
                                    cell.classList.add('grid-cell');
                                    cell.dataset.column = 0;
                                    sliderSection.appendChild(cell);
                                  }

                                  // Create draggable dots
                                  function createDots() {
                                    console.log('createDots called');
                                    dots = [];
                                    let numDots = selectedSizesB.length - 1; // For N sizes, create N-1 dots.
                                    for (let i = 0; i < numDots; i++) {
                                      let dot = document.createElement('div');
                                      dot.classList.add('draggable-dot');
                                      // We still store the intended segment info, but the key is the initial even placement.
                                      dot.dataset.position = `${i}-${i + 1}`;
                                      dots.push(dot);
                                    }
                                    dots.forEach(dot => sliderSection.appendChild(dot));
                                    return dots;
                                  }

                                  // Position the dots evenly along the slider on initialization.
                                  // Also integrate the snapping-to-grid (using cellWidth) and edge-buffer logic.
                                  function positionDots(dots) {
                                    console.log('positionDots called');
                                    const sliderWidth = sliderSection.offsetWidth;
                                    const cellWidth = sliderWidth / bundleSize;
                                    const buffer = cellWidth; // Buffer: one cell width at each end

                                    // For N selected sizes, evenly divide the slider so that each dot falls at ((i+1)/N) of the total width.
                                    dots.forEach((dot, index) => {
                                      // Calculate the default position (in pixels) as a fraction of slider width.
                                      let defaultLeft = ((index + 1) / selectedSizesB.length) * sliderWidth;
                                      // Snap this default value to the nearest grid boundary (cellWidth).
                                      defaultLeft = Math.round(defaultLeft / cellWidth) * cellWidth;
                                      // Clamp the default position so that it is never closer than the buffer to either edge.
                                      defaultLeft = Math.max(buffer, Math.min(defaultLeft, sliderWidth - buffer));
                                      // Account for the dot’s own width offset and convert to a percentage.
                                      const dotOffset = dot.offsetWidth / 2;
                                      const percentagePosition = ((defaultLeft - dotOffset) / sliderWidth) * 100;
                                      dot.style.left = `${percentagePosition}%`;
                                      dot.style.top = `${sliderSection.offsetHeight / 2 - dot.offsetHeight / 2}px`;
                                    });

                                    calculateDistribution();
                                  }

                                  // Make dots draggable
                                  function makeDotsDraggable(dots) {
                                    dots.forEach((dot, index) => {
                                      let startX, initialLeft, originalCell, minBoundary, maxBoundary;
                                      let isDragging = false;

                                      // Calculate movement boundaries with buffer at the edges.
                                      function calculateBoundaries() {
                                        const sliderWidth = sliderSection.offsetWidth;
                                        const cellWidth = sliderWidth / bundleSize;
                                        const buffer = cellWidth; // Buffer prevents dot from reaching extreme edges

                                        if (dots.length === 1) {
                                          // Allow full movement but not past the buffer boundaries
                                          minBoundary = buffer;
                                          maxBoundary = sliderWidth - buffer;
                                        } else {
                                          // For first dot, ensure it does not go past the left edge buffer.
                                          minBoundary = index === 0 ? buffer : (parseFloat(dots[index - 1].style.left) / 100) * sliderWidth + cellWidth;
                                          // For last dot, ensure it does not exceed sliderWidth - buffer.
                                          maxBoundary = index === dots.length - 1 ? sliderWidth - buffer : (parseFloat(dots[index + 1].style.left) / 100) * sliderWidth - cellWidth;
                                        }
                                      }

                                      function onMouseMove(e) {
                                        if (!isDragging) return;
                                        const sliderWidth = sliderSection.offsetWidth;
                                        const cellWidth = sliderWidth / bundleSize;
                                        const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                                        const deltaX = clientX - startX;

                                        // Compute the new position and clamp it to the boundaries
                                        let newLeft = initialLeft + deltaX;
                                        newLeft = Math.max(minBoundary, Math.min(newLeft, maxBoundary)); // Prevents dot from moving past allowed boundaries

                                        // Update the dot's position in percentage terms
                                        const newLeftPercentage = (newLeft / sliderWidth) * 100;
                                        dot.style.left = `${newLeftPercentage}%`;

                                        calculateDistribution();
                                      }

                                      function onMouseUp() {
                                        isDragging = false;
                                        document.removeEventListener('mousemove', onMouseMove);
                                        document.removeEventListener('touchmove', onMouseMove);

                                        const sliderWidth = sliderSection.offsetWidth;
                                        const cellWidth = sliderWidth / bundleSize;
                                        let currentLeft = (parseFloat(dot.style.left) / 100) * sliderWidth;

                                        // Find the closest grid boundary
                                        let snappedLeft = Math.round(currentLeft / cellWidth) * cellWidth;

                                        // Prevent snapping onto an occupied boundary if multiple dots exist
                                        if (dots.length > 1) {
                                          dots.forEach((otherDot, otherIndex) => {
                                            if (otherIndex !== index) {
                                              let otherLeft = (parseFloat(otherDot.style.left) / 100) * sliderWidth;
                                              if (Math.abs(snappedLeft - otherLeft) < cellWidth) {
                                                snappedLeft = snappedLeft > otherLeft ? otherLeft + cellWidth : otherLeft - cellWidth;
                                              }
                                            }
                                          });
                                        }

                                        // Apply the buffer at the edges so dots do not reach 0% or 100%
                                        const buffer = cellWidth; // Buffer equal to one cell width
                                        snappedLeft = Math.max(buffer, Math.min(snappedLeft, sliderWidth - buffer));

                                        // Apply smooth transition for snapping back into position
                                        dot.style.transition = 'left 0.3s ease-out';
                                        const snappedLeftPercentage = (snappedLeft / sliderWidth) * 100;
                                        dot.style.left = `${snappedLeftPercentage}%`;

                                        calculateDistribution();

                                        document.removeEventListener('mouseup', onMouseUp);
                                        document.removeEventListener('touchend', onMouseUp);
                                      }

                                      function onMouseDown(e) {
                                        if (selectedSizesB.length === bundleSize) return;
                                        isDragging = true;
                                        const sliderWidth = sliderSection.offsetWidth;
                                        const cellWidth = sliderWidth / bundleSize;
                                        startX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                                        initialLeft = dot.offsetLeft;
                                        originalCell = Math.round(initialLeft / cellWidth);
                                        calculateBoundaries(); // Update boundaries with the buffer in place

                                        dot.style.transition = 'none'; // Disable transition during drag

                                        document.addEventListener('mousemove', onMouseMove);
                                        document.addEventListener('touchmove', onMouseMove, { passive: true });
                                        document.addEventListener('mouseup', onMouseUp);
                                        document.addEventListener('touchend', onMouseUp);
                                      }

                                      dot.addEventListener('mousedown', onMouseDown);
                                      dot.addEventListener('touchstart', onMouseDown, { passive: true });
                                    });
                                  }

                                  // Calculate distribution
                                  function calculateDistribution() {
                                    console.log('calculateDistribution called');
                                    const numSizes = selectedSizesB.length;
                                    const sliderWidth = sliderSection.offsetWidth;
                                    const cellWidth = sliderWidth / bundleSize;

                                    // Get each dot's left position in pixels
                                    const dots = Array.from(sliderSection.querySelectorAll('.draggable-dot'));
                                    const dotPositions = dots.map(dot => {
                                      const dotLeftPercentage = parseFloat(dot.style.left);
                                      return (dotLeftPercentage / 100) * sliderWidth;
                                    });

                                    // When only one size is selected, the entire bundle goes to it.
                                    if (numSizes === 1) {
                                      distribution = [bundleSize];
                                    } else {
                                      distribution = [];

                                      // First segment: from left edge (0) to the first dot.
                                      distribution.push(Math.round(dotPositions[0] / cellWidth));

                                      // Intermediate segments: for each gap between successive dots.
                                      for (let i = 1; i < dotPositions.length; i++) {
                                        distribution.push(Math.round((dotPositions[i] - dotPositions[i - 1]) / cellWidth));
                                      }

                                      // Last segment: from the last dot to the right edge.
                                      distribution.push(bundleSize - Math.round(dotPositions[dotPositions.length - 1] / cellWidth));
                                    }

                                    // Ensure that each quantity is at least 1 (or adjust to 0 if that’s acceptable).
                                    distribution = distribution.map(d => Math.max(1, d));

                                    // Adjust the distribution so that the total sums to bundleSize.
                                    const currentTotal = distribution.reduce((a, b) => a + b, 0);
                                    const diff = bundleSize - currentTotal;
                                    let iterationCount = 0;
                                    const maxIterations = bundleSize * 2;

                                    if (diff !== 0) {
                                      // Distribute the difference (which might be positive or negative) evenly.
                                      for (let i = 0; i < Math.abs(diff); i++) {
                                        iterationCount++;
                                        if (iterationCount > maxIterations) {
                                          console.error('Max iterations reached in calculateDistribution for loop');
                                          break;
                                        }
                                        // If diff is positive, add 1 to one segment; if negative, subtract 1.
                                        const indexToAdjust = diff > 0 ? i % distribution.length : distribution.length - 1 - (i % distribution.length);
                                        distribution[indexToAdjust] += diff > 0 ? 1 : -1;
                                      }
                                    }

                                    // Ensure no segment falls below 1 after adjustment.
                                    distribution = distribution.map(d => Math.max(1, d));
                                    console.log('calculateDistribution - distribution:', distribution);

                                    updateUI();
                                  }


                                  // Update the UI
                                  function updateUI() {
                                    console.log('updateUI called');
                                    sizeLabels.innerHTML = '';
                                    selectedSizesB.forEach((size, index) => {
                                      const label = document.createElement('div');
                                      label.textContent = `Size ${size}: ${distribution[index]} ${formatQuantity(distribution[index])}`;
                                      label.id = `bundle-12-sizeLabel-${size}`;
                                      sizeLabels.appendChild(label);
                                    });
                                    updateselectedSizeData();
                                  }

                                  // Update Selected Sizes
                                  function updateselectedSizes() {
                                    console.log('updateselectedSizes called');
                                    console.log('updateselectedSizes - selectedSizesB:', selectedSizesB);
                                    selectedSizesContainer.innerHTML = '';
                                    initializeGrid();
                                    // Calculate distribution before updating the slider
                                    calculateDistribution();
                                    updateSlider();
                                    selectedSizeData = selectedSizesB.map((size, index) => ({
                                      size: parseFloat(size),
                                      quantity: distribution[index] || 1,
                                    }));
                                    console.log('updateselectedSizes - selectedSizeData:', selectedSizeData);
                                    // Toggle sliderSection visibility based on selectedSizesB length
                                    if (selectedSizesB.length > 1) {
                                      sliderSection.style.display = 'block';
                                      calculateDistribution();
                                      updateSlider();
                                    } else {
                                      sliderSection.style.display = 'none';
                                    }
                                    updatePayNowButtonsVisibility()
                                  }

                                  // Update Slider for Selected Sizes
                                  function updateSlider() {
                                    console.log('updateSlider called');
                                    // Remove existing dots
                                    const existingDots = sliderSection.querySelectorAll('.draggable-dot');
                                    existingDots.forEach(dot => dot.remove());
                                    const dots = createDots(); // Dots are created first
                                    positionDots(dots); // Then they are positioned
                                    makeDotsDraggable(dots);
                                  }

                                  function formatQuantity(quantity) {
                                    return quantity === 1 ? '1X' : `${quantity}X`;
                                  }

                                  function updateselectedSizeData() {
                                    console.log('updateselectedSizeData called');
                                    console.log('updateselectedSizeData - distribution:', distribution);
                                    selectedSizeData = selectedSizesB.map((size, index) => ({
                                      size: parseFloat(size),
                                      quantity: distribution[index],
                                    }));
                                    console.log('updateselectedSizeData - selectedSizeData:', selectedSizeData);
                                    selectedSizesContainer.dataset.selectedSizeData = JSON.stringify(selectedSizeData); // Moved here


                                    // Display the strictly formatted quantities for selected sizes
                                    selectedSizesContainer.innerHTML = '';
                                    selectedSizeData.forEach((data) => {
                                      const sizeTag = document.createElement('div');
                                      sizeTag.classList.add('selected-size');

                                      const sizeSpan = document.createElement('span');
                                      sizeSpan.textContent = `${formatQuantity(data.quantity)}Size ${data.size}`;

                                      const clearBtn = document.createElement('button');
                                      clearBtn.classList.add('clear-btn');
                                      clearBtn.textContent = 'X';

                                      // Define a handler function that clears the option from both UI and data
                                      const clearHandler = () => {
                                        // Remove from our selectedSizesB array:
                                        selectedSizesB = selectedSizesB.filter(s => s !== String(data.size));
                                        // Also update the <select> element to unselect this option:
                                        Array.from(sizesElement.options).forEach(option => {
                                          if (option.value === String(data.size)) {
                                            option.selected = false;
                                          }
                                        });
                                        // Finally update the UI / re-calculate distribution:
                                        updateselectedSizes();
                                      };

                                      // **Inject drag detection event listeners here for the clear button:**
                                      // Define a drag threshold in pixels.
                                      const DRAG_THRESHOLD = 5;

                                      clearBtn.addEventListener('pointerdown', function (e) {
                                        // Record the starting pointer coordinates and reset the dragging flag.
                                        this._dragStartX = e.clientX;
                                        this._dragStartY = e.clientY;
                                        this._isDragging = false;
                                      });

                                      clearBtn.addEventListener('pointermove', function (e) {
                                        // Calculate how far the pointer has moved from the starting position.
                                        const dx = e.clientX - this._dragStartX;
                                        const dy = e.clientY - this._dragStartY;
                                        if (Math.sqrt(dx * dx + dy * dy) > DRAG_THRESHOLD) {
                                          // If movement exceeds the threshold, mark as dragging.
                                          this._isDragging = true;
                                        }
                                      });

                                      clearBtn.addEventListener('pointerup', function (e) {
                                        // Only execute the clear action if the pointer did not move too far.
                                        if (!this._isDragging) {
                                          clearHandler();
                                        }
                                        // Clean up.
                                        delete this._dragStartX;
                                        delete this._dragStartY;
                                        delete this._isDragging;
                                      });

                                      // Also, for good measure, cancel the action on pointercancel.
                                      clearBtn.addEventListener('pointercancel', function (e) {
                                        delete this._dragStartX;
                                        delete this._dragStartY;
                                        delete this._isDragging;
                                      });

                                      sizeTag.appendChild(sizeSpan);
                                      sizeTag.appendChild(clearBtn);
                                      selectedSizesContainer.appendChild(sizeTag);
                                    });
                                  };

                                  // Assume bundleSize is already defined (e.g., 12)
                                  let previousSelections = []; // global variable to hold the last valid selection

                                  sizesElement.addEventListener('change', (e) => {
                                    // Get the current list of selected option values
                                    const currentSelections = Array.from(e.target.selectedOptions).map(option => option.value);
                                    console.log('Current selections:', currentSelections);

                                    // If the new count exceeds the allowed limit...
                                    if (currentSelections.length > bundleSize) {
                                      // Determine the newly added options by comparing with the previousSelections.
                                      const newlyAdded = currentSelections.filter(val => !previousSelections.includes(val));
                                      // Alert the user
                                      alert(`You can only select up to ${bundleSize} sizes. Please deselect an option before adding ${newlyAdded.join(', ')}`);

                                      // For each newly added option, set its "selected" property to false.
                                      newlyAdded.forEach(val => {
                                        const option = e.target.querySelector(`option[value="${val}"]`);
                                        if (option) {
                                          option.selected = false;
                                        }
                                      });
                                      // After unselecting the newly added options, update currentSelections
                                      currentSelections.length = 0;
                                      Array.from(e.target.selectedOptions).forEach(option => currentSelections.push(option.value));
                                    }

                                    // Save the valid selections for next time
                                    previousSelections = currentSelections.slice(); // copy the array
                                    selectedSizesB = currentSelections;
                                    console.log('Final selected sizes:', selectedSizesB);

                                    // Call your update function with the valid selections
                                    updateselectedSizes();
                                  });
                                  window.addEventListener('resize', () => {
                                    updateSlider();
                                  });
                                });
                              </script>


                              <div id="buttonContainer">
                                <button class="buynow" id="updateOptionsButton12B">Add To Cart</button>
                              </div>


                            </div>
                          </div>


                        </div>

                      </div>

                      <div class="bundle7">
                        <div class="col-md-6">
                          <div class="card" role="button">
                            <div class="card-body text-center"
                              style="justify-content: flex-start; flex-direction: row; position: relative; display: block;">

                              <h5 class="cardimage_heading ai-style-change-1"
                                style="/* -webkit-text-stroke: 5px black; */">7 Pairs</h5>
                              <img class="product card_image_class" id="product.card"
                                src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/86b6a061-5b22-4f24-8f02-ad20efcbf111/bitmap_g794.png?content-type=image%2Fpng"
                                alt="Card Image" style="left: -80px;">
                              <div class="price"
                                style="display: flex;flex-Direction: column;justify-Content: center;align-Items: center;position: relative;height: auto;width: 100%;bottom: 75px;">


                                <h5 class="card-title"
                                  style="position: absolute;-webkit-text-stroke: 9px black;right: -18px;width: auto;left: auto;/* max-width: 100%; */display: inline-block;font-size: clamp(2.25rem, 5vw, 23rem);">
                                  £399.99
                                </h5>
                                <h5 class="card-title"
                                  style="position: absolute;/* -webkit-text-stroke: 9px black; */right: -18px;width: auto;left: auto;/* max-width: 100%; */display: inline-block;font-size: clamp(2.25rem, 5vw, 13rem);">
                                  £399.99</h5>

                              </div>
                            </div>
                            <!-- Additional Content -->
                            <div class="additionalContent">
                              <h5 class="additionalContenth5">7 Pairs</h5>
                              <h5 class="additionalContenth5">£399.99</h5>

                              <div class="slider7" id="slider-section">
                                <h1>"BIG BALLER"</h1>

                                <!-- Bundle Selection -->
                                <div class="bundle-selection" style="display: none;">
                                  <label for="bundle-size">Select Bundle Size:</label>
                                  <select id="bundle-7-bundleSizeB" fdprocessedid="htbaup">
                                    <option value="7">7 Pairs</option>
                                  </select>
                                </div>

                                <!-- Size Selection -->
                                <div class="size-selection">
                                  <label for="sizes">Sizes:</label>
                                  <select id="bundle-7-sizesB" multiple="" fdprocessedid="rjl6oh">
                                    <option value="3">Size 3</option>
                                    <option value="3.5">Size 3.5</option>
                                    <option value="4">Size 4</option>
                                    <option value="4.5">Size 4.5</option>
                                    <option value="5">Size 5</option>
                                    <option value="5.5">Size 5.5</option>
                                    <option value="6">Size 6</option>
                                    <option value="6.5">Size 6.5</option>
                                    <option value="7">Size 7</option>
                                    <option value="7.5">Size 7.5</option>
                                    <option value="8">Size 8</option>
                                    <option value="8.5">Size 8.5</option>
                                    <option value="9">Size 9</option>
                                    <option value="9.5">Size 9.5</option>
                                    <option value="10">Size 10</option>
                                    <option value="11">Size 11</option>
                                    <option value="11.5">Size 11.5</option>
                                    <option value="12">Size 12</option>
                                    <option value="13">Size 13</option>
                                  </select>
                                </div>

                                <!-- Selected Sizes -->
                                <div id="bundle-7-selectedSizesB" class="selected-sizes" data-selected-size-data-b="[]">
                                </div>

                                <!-- Slider Section -->
                                <div id="bundle-7-sliderSectionB" class="slider-section" style="display: none;">
                                  <div class="slider-container"
                                    style="position: relative; height: 50px; width: 100%; background-color: #f0f0f0; border: 1px solid #ccc;">
                                    <div id="bundle-7-sliderB" class="slider"
                                      style="position: relative; height: 100%; width: 100%;"></div>
                                  </div>
                                  <div id="bundle-7-sizeLabelsB" class="size-labels"></div>
                                </div>



                                <script>
                                  document.addEventListener("DOMContentLoaded", function () {
                                    const bundleSize = 7; // Fixed bundle size of 7 pairs
                                    const sizesElement = document.getElementById('bundle-7-sizesB');
                                    const sliderSection = document.getElementById('bundle-7-sliderSectionB');
                                    const selectedSizesContainer = document.getElementById('bundle-7-selectedSizesB');
                                    const sizeLabels = document.getElementById('bundle-7-sizeLabelsB');
                                    let selectedSizesB = [];
                                    let distribution = [];
                                    let selectedSizeData = [];
                                    let dots = [];

                                    // Initialize the grid
                                    function initializeGrid() {
                                      console.log('initializeGrid called');
                                      sliderSection.innerHTML = '';
                                      sliderSection.classList.add('grid-container');
                                      const cell = document.createElement('div');
                                      cell.classList.add('grid-cell');
                                      cell.dataset.column = 0;
                                      sliderSection.appendChild(cell);
                                    }

                                    // Create draggable dots
                                    function createDots() {
                                      console.log('createDots called');
                                      dots = [];
                                      let numDots = selectedSizesB.length - 1; // For N sizes, create N-1 dots.
                                      for (let i = 0; i < numDots; i++) {
                                        let dot = document.createElement('div');
                                        dot.classList.add('draggable-dot');
                                        // We still store the intended segment info, but the key is the initial even placement.
                                        dot.dataset.position = `${i}-${i + 1}`;
                                        dots.push(dot);
                                      }
                                      dots.forEach(dot => sliderSection.appendChild(dot));
                                      return dots;
                                    }

                                    // Position the dots evenly along the slider on initialization.
                                    // Also integrate the snapping-to-grid (using cellWidth) and edge-buffer logic.
                                    function positionDots(dots) {
                                      console.log('positionDots called');
                                      const sliderWidth = sliderSection.offsetWidth;
                                      const cellWidth = sliderWidth / bundleSize;
                                      const buffer = cellWidth; // Buffer: one cell width at each end

                                      // For N selected sizes, evenly divide the slider so that each dot falls at ((i+1)/N) of the total width.
                                      dots.forEach((dot, index) => {
                                        // Calculate the default position (in pixels) as a fraction of slider width.
                                        let defaultLeft = ((index + 1) / selectedSizesB.length) * sliderWidth;
                                        // Snap this default value to the nearest grid boundary (cellWidth).
                                        defaultLeft = Math.round(defaultLeft / cellWidth) * cellWidth;
                                        // Clamp the default position so that it is never closer than the buffer to either edge.
                                        defaultLeft = Math.max(buffer, Math.min(defaultLeft, sliderWidth - buffer));
                                        // Account for the dot’s own width offset and convert to a percentage.
                                        const dotOffset = dot.offsetWidth / 2;
                                        const percentagePosition = ((defaultLeft - dotOffset) / sliderWidth) * 100;
                                        dot.style.left = `${percentagePosition}%`;
                                        dot.style.top = `${sliderSection.offsetHeight / 2 - dot.offsetHeight / 2}px`;
                                      });

                                      calculateDistribution();
                                    }

                                    // Make dots draggable
                                    function makeDotsDraggable(dots) {
                                      dots.forEach((dot, index) => {
                                        let startX, initialLeft, originalCell, minBoundary, maxBoundary;
                                        let isDragging = false;

                                        // Calculate movement boundaries with buffer at the edges.
                                        function calculateBoundaries() {
                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          const buffer = cellWidth; // Buffer prevents dot from reaching extreme edges

                                          if (dots.length === 1) {
                                            // Allow full movement but not past the buffer boundaries
                                            minBoundary = buffer;
                                            maxBoundary = sliderWidth - buffer;
                                          } else {
                                            // For first dot, ensure it does not go past the left edge buffer.
                                            minBoundary = index === 0 ? buffer : (parseFloat(dots[index - 1].style.left) / 100) * sliderWidth + cellWidth;
                                            // For last dot, ensure it does not exceed sliderWidth - buffer.
                                            maxBoundary = index === dots.length - 1 ? sliderWidth - buffer : (parseFloat(dots[index + 1].style.left) / 100) * sliderWidth - cellWidth;
                                          }
                                        }

                                        function onMouseMove(e) {
                                          if (!isDragging) return;
                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                                          const deltaX = clientX - startX;

                                          // Compute the new position and clamp it to the boundaries
                                          let newLeft = initialLeft + deltaX;
                                          newLeft = Math.max(minBoundary, Math.min(newLeft, maxBoundary)); // Prevents dot from moving past allowed boundaries

                                          // Update the dot's position in percentage terms
                                          const newLeftPercentage = (newLeft / sliderWidth) * 100;
                                          dot.style.left = `${newLeftPercentage}%`;

                                          calculateDistribution();
                                        }

                                        function onMouseUp() {
                                          isDragging = false;
                                          document.removeEventListener('mousemove', onMouseMove);
                                          document.removeEventListener('touchmove', onMouseMove);

                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          let currentLeft = (parseFloat(dot.style.left) / 100) * sliderWidth;

                                          // Find the closest grid boundary
                                          let snappedLeft = Math.round(currentLeft / cellWidth) * cellWidth;

                                          // Prevent snapping onto an occupied boundary if multiple dots exist
                                          if (dots.length > 1) {
                                            dots.forEach((otherDot, otherIndex) => {
                                              if (otherIndex !== index) {
                                                let otherLeft = (parseFloat(otherDot.style.left) / 100) * sliderWidth;
                                                if (Math.abs(snappedLeft - otherLeft) < cellWidth) {
                                                  snappedLeft = snappedLeft > otherLeft ? otherLeft + cellWidth : otherLeft - cellWidth;
                                                }
                                              }
                                            });
                                          }

                                          // Apply the buffer at the edges so dots do not reach 0% or 100%
                                          const buffer = cellWidth; // Buffer equal to one cell width
                                          snappedLeft = Math.max(buffer, Math.min(snappedLeft, sliderWidth - buffer));

                                          // Apply smooth transition for snapping back into position
                                          dot.style.transition = 'left 0.3s ease-out';
                                          const snappedLeftPercentage = (snappedLeft / sliderWidth) * 100;
                                          dot.style.left = `${snappedLeftPercentage}%`;

                                          calculateDistribution();

                                          document.removeEventListener('mouseup', onMouseUp);
                                          document.removeEventListener('touchend', onMouseUp);
                                        }

                                        function onMouseDown(e) {
                                          if (selectedSizesB.length === bundleSize) return;
                                          isDragging = true;
                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          startX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                                          initialLeft = dot.offsetLeft;
                                          originalCell = Math.round(initialLeft / cellWidth);
                                          calculateBoundaries(); // Update boundaries with the buffer in place

                                          dot.style.transition = 'none'; // Disable transition during drag

                                          document.addEventListener('mousemove', onMouseMove);
                                          document.addEventListener('touchmove', onMouseMove, { passive: true });
                                          document.addEventListener('mouseup', onMouseUp);
                                          document.addEventListener('touchend', onMouseUp);
                                        }

                                        dot.addEventListener('mousedown', onMouseDown);
                                        dot.addEventListener('touchstart', onMouseDown, { passive: true });
                                      });
                                    }

                                    // Calculate distribution
                                    function calculateDistribution() {
                                      console.log('calculateDistribution called');
                                      const numSizes = selectedSizesB.length;
                                      const sliderWidth = sliderSection.offsetWidth;
                                      const cellWidth = sliderWidth / bundleSize;

                                      // Get each dot's left position in pixels
                                      const dots = Array.from(sliderSection.querySelectorAll('.draggable-dot'));
                                      const dotPositions = dots.map(dot => {
                                        const dotLeftPercentage = parseFloat(dot.style.left);
                                        return (dotLeftPercentage / 100) * sliderWidth;
                                      });

                                      // When only one size is selected, the entire bundle goes to it.
                                      if (numSizes === 1) {
                                        distribution = [bundleSize];
                                      } else {
                                        distribution = [];

                                        // First segment: from left edge (0) to the first dot.
                                        distribution.push(Math.round(dotPositions[0] / cellWidth));

                                        // Intermediate segments: for each gap between successive dots.
                                        for (let i = 1; i < dotPositions.length; i++) {
                                          distribution.push(Math.round((dotPositions[i] - dotPositions[i - 1]) / cellWidth));
                                        }

                                        // Last segment: from the last dot to the right edge.
                                        distribution.push(bundleSize - Math.round(dotPositions[dotPositions.length - 1] / cellWidth));
                                      }

                                      // Ensure that each quantity is at least 1 (or adjust to 0 if that’s acceptable).
                                      distribution = distribution.map(d => Math.max(1, d));

                                      // Adjust the distribution so that the total sums to bundleSize.
                                      const currentTotal = distribution.reduce((a, b) => a + b, 0);
                                      const diff = bundleSize - currentTotal;
                                      let iterationCount = 0;
                                      const maxIterations = bundleSize * 2;

                                      if (diff !== 0) {
                                        // Distribute the difference (which might be positive or negative) evenly.
                                        for (let i = 0; i < Math.abs(diff); i++) {
                                          iterationCount++;
                                          if (iterationCount > maxIterations) {
                                            console.error('Max iterations reached in calculateDistribution for loop');
                                            break;
                                          }
                                          // If diff is positive, add 1 to one segment; if negative, subtract 1.
                                          const indexToAdjust = diff > 0 ? i % distribution.length : distribution.length - 1 - (i % distribution.length);
                                          distribution[indexToAdjust] += diff > 0 ? 1 : -1;
                                        }
                                      }

                                      // Ensure no segment falls below 1 after adjustment.
                                      distribution = distribution.map(d => Math.max(1, d));
                                      console.log('calculateDistribution - distribution:', distribution);

                                      updateUI();
                                    }


                                    // Update the UI
                                    function updateUI() {
                                      console.log('updateUI called');
                                      sizeLabels.innerHTML = '';
                                      selectedSizesB.forEach((size, index) => {
                                        const label = document.createElement('div');
                                        label.textContent = `Size ${size}: ${distribution[index]} ${formatQuantity(distribution[index])}`;
                                        label.id = `bundle-12-sizeLabel-${size}`;
                                        sizeLabels.appendChild(label);
                                      });
                                      updateselectedSizeData();
                                    }

                                    // Update Selected Sizes
                                    function updateselectedSizes() {
                                      console.log('updateselectedSizes called');
                                      console.log('updateselectedSizes - selectedSizesB:', selectedSizesB);
                                      selectedSizesContainer.innerHTML = '';
                                      initializeGrid();
                                      // Calculate distribution before updating the slider
                                      calculateDistribution();
                                      updateSlider();
                                      selectedSizeData = selectedSizesB.map((size, index) => ({
                                        size: parseFloat(size),
                                        quantity: distribution[index] || 1,
                                      }));
                                      console.log('updateselectedSizes - selectedSizeData:', selectedSizeData);
                                      // Toggle sliderSection visibility based on selectedSizesB length
                                      if (selectedSizesB.length > 1) {
                                        sliderSection.style.display = 'block';
                                        calculateDistribution();
                                        updateSlider();
                                      } else {
                                        sliderSection.style.display = 'none';
                                      }
                                      updatePayNowButtonsVisibility()
                                    }

                                    // Update Slider for Selected Sizes
                                    function updateSlider() {
                                      console.log('updateSlider called');
                                      // Remove existing dots
                                      const existingDots = sliderSection.querySelectorAll('.draggable-dot');
                                      existingDots.forEach(dot => dot.remove());
                                      const dots = createDots(); // Dots are created first
                                      positionDots(dots); // Then they are positioned
                                      makeDotsDraggable(dots);
                                    }

                                    function formatQuantity(quantity) {
                                      return quantity === 1 ? '1X' : `${quantity}X`;
                                    }

                                    function updateselectedSizeData() {
                                      console.log('updateselectedSizeData called');
                                      console.log('updateselectedSizeData - distribution:', distribution);
                                      selectedSizeData = selectedSizesB.map((size, index) => ({
                                        size: parseFloat(size),
                                        quantity: distribution[index],
                                      }));
                                      console.log('updateselectedSizeData - selectedSizeData:', selectedSizeData);
                                      selectedSizesContainer.dataset.selectedSizeData = JSON.stringify(selectedSizeData); // Moved here


                                      // Display the strictly formatted quantities for selected sizes
                                      selectedSizesContainer.innerHTML = '';
                                      selectedSizeData.forEach((data) => {
                                        const sizeTag = document.createElement('div');
                                        sizeTag.classList.add('selected-size');

                                        const sizeSpan = document.createElement('span');
                                        sizeSpan.textContent = `${formatQuantity(data.quantity)}Size ${data.size}`;

                                        const clearBtn = document.createElement('button');
                                        clearBtn.classList.add('clear-btn');
                                        clearBtn.textContent = 'X';

                                        // Define a handler function that clears the option from both UI and data
                                        const clearHandler = () => {
                                          // Remove from our selectedSizesB array:
                                          selectedSizesB = selectedSizesB.filter(s => s !== String(data.size));
                                          // Also update the <select> element to unselect this option:
                                          Array.from(sizesElement.options).forEach(option => {
                                            if (option.value === String(data.size)) {
                                              option.selected = false;
                                            }
                                          });
                                          // Finally update the UI / re-calculate distribution:
                                          updateselectedSizes();
                                        };

                                        // **Inject drag detection event listeners here for the clear button:**
                                        // Define a drag threshold in pixels.
                                        const DRAG_THRESHOLD = 5;

                                        clearBtn.addEventListener('pointerdown', function (e) {
                                          // Record the starting pointer coordinates and reset the dragging flag.
                                          this._dragStartX = e.clientX;
                                          this._dragStartY = e.clientY;
                                          this._isDragging = false;
                                        });

                                        clearBtn.addEventListener('pointermove', function (e) {
                                          // Calculate how far the pointer has moved from the starting position.
                                          const dx = e.clientX - this._dragStartX;
                                          const dy = e.clientY - this._dragStartY;
                                          if (Math.sqrt(dx * dx + dy * dy) > DRAG_THRESHOLD) {
                                            // If movement exceeds the threshold, mark as dragging.
                                            this._isDragging = true;
                                          }
                                        });

                                        clearBtn.addEventListener('pointerup', function (e) {
                                          // Only execute the clear action if the pointer did not move too far.
                                          if (!this._isDragging) {
                                            clearHandler();
                                          }
                                          // Clean up.
                                          delete this._dragStartX;
                                          delete this._dragStartY;
                                          delete this._isDragging;
                                        });

                                        // Also, for good measure, cancel the action on pointercancel.
                                        clearBtn.addEventListener('pointercancel', function (e) {
                                          delete this._dragStartX;
                                          delete this._dragStartY;
                                          delete this._isDragging;
                                        });

                                        sizeTag.appendChild(sizeSpan);
                                        sizeTag.appendChild(clearBtn);
                                        selectedSizesContainer.appendChild(sizeTag);
                                      });
                                    };

                                    // Assume bundleSize is already defined (e.g., 12)
                                    let previousSelections = []; // global variable to hold the last valid selection

                                    sizesElement.addEventListener('change', (e) => {
                                      // Get the current list of selected option values
                                      const currentSelections = Array.from(e.target.selectedOptions).map(option => option.value);
                                      console.log('Current selections:', currentSelections);

                                      // If the new count exceeds the allowed limit...
                                      if (currentSelections.length > bundleSize) {
                                        // Determine the newly added options by comparing with the previousSelections.
                                        const newlyAdded = currentSelections.filter(val => !previousSelections.includes(val));
                                        // Alert the user
                                        alert(`You can only select up to ${bundleSize} sizes. Please deselect an option before adding ${newlyAdded.join(', ')}`);

                                        // For each newly added option, set its "selected" property to false.
                                        newlyAdded.forEach(val => {
                                          const option = e.target.querySelector(`option[value="${val}"]`);
                                          if (option) {
                                            option.selected = false;
                                          }
                                        });
                                        // After unselecting the newly added options, update currentSelections
                                        currentSelections.length = 0;
                                        Array.from(e.target.selectedOptions).forEach(option => currentSelections.push(option.value));
                                      }

                                      // Save the valid selections for next time
                                      previousSelections = currentSelections.slice(); // copy the array
                                      selectedSizesB = currentSelections;
                                      console.log('Final selected sizes:', selectedSizesB);

                                      // Call your update function with the valid selections
                                      updateselectedSizes();
                                    });
                                    window.addEventListener('resize', () => {
                                      updateSlider();
                                    });
                                  });
                                </script>
                                <div id="buttonContainer">
                                  <button class="buynow" id="updateOptionsButton7B">Add To Cart</button>
                                </div>

                              </div>

                            </div>
                          </div>


                        </div>
                      </div>

                      <div class="bundle3">
                        <div class="col-md-6">
                          <div class="card" role="button">
                            <div class="card-body text-center"
                              style="justify-content: flex-start; flex-direction: row; position: relative; display: block;">

                              <h5 class="cardimage_heading ai-style-change-1"
                                style="/* -webkit-text-stroke: 5px black; */">3 Pairs</h5>
                              <img class="product card_image_class" id="product.card"
                                src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/cf7b3216-efd4-48ca-ab88-ffefa5541eb1/bitmap_g1122.png?content-type=image%2Fpng"
                                alt="Card Image">
                              <div class="price"
                                style="display: flex;flex-Direction: column;justify-Content: center;align-Items: center;position: relative;height: auto;width: 100%;bottom: 75px;">


                                <h5 class="card-title"
                                  style="position: absolute;-webkit-text-stroke: 9px black;right: -18px;width: auto;left: auto;/* max-width: 100%; */display: inline-block;font-size: clamp(2.25rem, 5vw, 23rem);">
                                  £175.99
                                </h5>
                                <h5 class="card-title"
                                  style="position: absolute;/* -webkit-text-stroke: 9px black; */right: -18px;width: auto;left: auto;/* max-width: 100%; */display: inline-block;font-size: clamp(2.25rem, 5vw, 13rem);">
                                  £175.99</h5>

                              </div>
                            </div>
                            <!-- Additional Content -->
                            <div class="additionalContent">
                              <h5 class="additionalContenth5">3 Pairs</h5>
                              <h5 class="additionalContenth5">£175.99</h5>

                              <div class="slider3" id="slider-section">
                                <h1>"BALLER"</h1>

                                <!-- Bundle Selection -->
                                <div class="bundle-selection" style="display: none;">
                                  <label for="bundle-size">Select Bundle Size:</label>
                                  <select id="bundle-3-bundleSizeB">
                                    <option value="3">3 Pairs</option>
                                  </select>
                                </div>

                                <!-- Size Selection -->
                                <div class="size-selection">
                                  <label for="sizes">Sizes:</label>
                                  <select id="bundle-3-sizesB" multiple="">
                                    <option value="3">Size 3</option>
                                    <option value="3.5">Size 3.5</option>
                                    <option value="4">Size 4</option>
                                    <option value="4.5">Size 4.5</option>
                                    <option value="5">Size 5</option>
                                    <option value="5.5">Size 5.5</option>
                                    <option value="6">Size 6</option>
                                    <option value="6.5">Size 6.5</option>
                                    <option value="7">Size 7</option>
                                    <option value="7.5">Size 7.5</option>
                                    <option value="8">Size 8</option>
                                    <option value="8.5">Size 8.5</option>
                                    <option value="9">Size 9</option>
                                    <option value="9.5">Size 9.5</option>
                                    <option value="10">Size 10</option>
                                    <option value="11">Size 11</option>
                                    <option value="11.5">Size 11.5</option>
                                    <option value="12">Size 12</option>
                                    <option value="13">Size 13</option>
                                  </select>
                                </div>

                                <!-- Selected Sizes -->
                                <div id="bundle-3-selectedSizesB" class="selected-sizes" data-selected-size-data-b="[]">
                                </div>

                                <!-- Slider Section -->
                                <div id="bundle-3-sliderSectionB" class="slider-section" style="display: none;">
                                  <div class="slider-container"
                                    style="position: relative; height: 50px; width: 100%; background-color: #f0f0f0; border: 1px solid #ccc;">
                                    <div id="bundle-3-sliderB" class="slider"
                                      style="position: relative; height: 100%; width: 100%;"></div>
                                  </div>
                                  <div id="bundle-3-sizeLabelsB" class="size-labels"></div>
                                </div>


                                <script>
                                  document.addEventListener("DOMContentLoaded", function () {
                                    const bundleSize = 3; // Fixed bundle size of 3 pairs
                                    const sizesElement = document.getElementById('bundle-3-sizesB');
                                    const sliderSection = document.getElementById('bundle-3-sliderSectionB');
                                    const selectedSizesContainer = document.getElementById('bundle-3-selectedSizesB');
                                    const sizeLabels = document.getElementById('bundle-3-sizeLabelsB');
                                    let selectedSizesB = [];
                                    let distribution = [];
                                    let selectedSizeData = [];
                                    let dots = [];

                                    // Initialize the grid
                                    function initializeGrid() {
                                      console.log('initializeGrid called');
                                      sliderSection.innerHTML = '';
                                      sliderSection.classList.add('grid-container');
                                      const cell = document.createElement('div');
                                      cell.classList.add('grid-cell');
                                      cell.dataset.column = 0;
                                      sliderSection.appendChild(cell);
                                    }

                                    // Create draggable dots
                                    function createDots() {
                                      console.log('createDots called');
                                      dots = [];
                                      let numDots = selectedSizesB.length - 1; // For N sizes, create N-1 dots.
                                      for (let i = 0; i < numDots; i++) {
                                        let dot = document.createElement('div');
                                        dot.classList.add('draggable-dot');
                                        // We still store the intended segment info, but the key is the initial even placement.
                                        dot.dataset.position = `${i}-${i + 1}`;
                                        dots.push(dot);
                                      }
                                      dots.forEach(dot => sliderSection.appendChild(dot));
                                      return dots;
                                    }

                                    // Position the dots evenly along the slider on initialization.
                                    // Also integrate the snapping-to-grid (using cellWidth) and edge-buffer logic.
                                    function positionDots(dots) {
                                      console.log('positionDots called');
                                      const sliderWidth = sliderSection.offsetWidth;
                                      const cellWidth = sliderWidth / bundleSize;
                                      const buffer = cellWidth; // Buffer: one cell width at each end

                                      // For N selected sizes, evenly divide the slider so that each dot falls at ((i+1)/N) of the total width.
                                      dots.forEach((dot, index) => {
                                        // Calculate the default position (in pixels) as a fraction of slider width.
                                        let defaultLeft = ((index + 1) / selectedSizesB.length) * sliderWidth;
                                        // Snap this default value to the nearest grid boundary (cellWidth).
                                        defaultLeft = Math.round(defaultLeft / cellWidth) * cellWidth;
                                        // Clamp the default position so that it is never closer than the buffer to either edge.
                                        defaultLeft = Math.max(buffer, Math.min(defaultLeft, sliderWidth - buffer));
                                        // Account for the dot’s own width offset and convert to a percentage.
                                        const dotOffset = dot.offsetWidth / 2;
                                        const percentagePosition = ((defaultLeft - dotOffset) / sliderWidth) * 100;
                                        dot.style.left = `${percentagePosition}%`;
                                        dot.style.top = `${sliderSection.offsetHeight / 2 - dot.offsetHeight / 2}px`;
                                      });

                                      calculateDistribution();
                                    }

                                    // Make dots draggable
                                    function makeDotsDraggable(dots) {
                                      dots.forEach((dot, index) => {
                                        let startX, initialLeft, originalCell, minBoundary, maxBoundary;
                                        let isDragging = false;

                                        // Calculate movement boundaries with buffer at the edges.
                                        function calculateBoundaries() {
                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          const buffer = cellWidth; // Buffer prevents dot from reaching extreme edges

                                          if (dots.length === 1) {
                                            // Allow full movement but not past the buffer boundaries
                                            minBoundary = buffer;
                                            maxBoundary = sliderWidth - buffer;
                                          } else {
                                            // For first dot, ensure it does not go past the left edge buffer.
                                            minBoundary = index === 0 ? buffer : (parseFloat(dots[index - 1].style.left) / 100) * sliderWidth + cellWidth;
                                            // For last dot, ensure it does not exceed sliderWidth - buffer.
                                            maxBoundary = index === dots.length - 1 ? sliderWidth - buffer : (parseFloat(dots[index + 1].style.left) / 100) * sliderWidth - cellWidth;
                                          }
                                        }

                                        function onMouseMove(e) {
                                          if (!isDragging) return;
                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                                          const deltaX = clientX - startX;

                                          // Compute the new position and clamp it to the boundaries
                                          let newLeft = initialLeft + deltaX;
                                          newLeft = Math.max(minBoundary, Math.min(newLeft, maxBoundary)); // Prevents dot from moving past allowed boundaries

                                          // Update the dot's position in percentage terms
                                          const newLeftPercentage = (newLeft / sliderWidth) * 100;
                                          dot.style.left = `${newLeftPercentage}%`;

                                          calculateDistribution();
                                        }

                                        function onMouseUp() {
                                          isDragging = false;
                                          document.removeEventListener('mousemove', onMouseMove);
                                          document.removeEventListener('touchmove', onMouseMove);

                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          let currentLeft = (parseFloat(dot.style.left) / 100) * sliderWidth;

                                          // Find the closest grid boundary
                                          let snappedLeft = Math.round(currentLeft / cellWidth) * cellWidth;

                                          // Prevent snapping onto an occupied boundary if multiple dots exist
                                          if (dots.length > 1) {
                                            dots.forEach((otherDot, otherIndex) => {
                                              if (otherIndex !== index) {
                                                let otherLeft = (parseFloat(otherDot.style.left) / 100) * sliderWidth;
                                                if (Math.abs(snappedLeft - otherLeft) < cellWidth) {
                                                  snappedLeft = snappedLeft > otherLeft ? otherLeft + cellWidth : otherLeft - cellWidth;
                                                }
                                              }
                                            });
                                          }

                                          // Apply the buffer at the edges so dots do not reach 0% or 100%
                                          const buffer = cellWidth; // Buffer equal to one cell width
                                          snappedLeft = Math.max(buffer, Math.min(snappedLeft, sliderWidth - buffer));

                                          // Apply smooth transition for snapping back into position
                                          dot.style.transition = 'left 0.3s ease-out';
                                          const snappedLeftPercentage = (snappedLeft / sliderWidth) * 100;
                                          dot.style.left = `${snappedLeftPercentage}%`;

                                          calculateDistribution();

                                          document.removeEventListener('mouseup', onMouseUp);
                                          document.removeEventListener('touchend', onMouseUp);
                                        }

                                        function onMouseDown(e) {
                                          if (selectedSizesB.length === bundleSize) return;
                                          isDragging = true;
                                          const sliderWidth = sliderSection.offsetWidth;
                                          const cellWidth = sliderWidth / bundleSize;
                                          startX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                                          initialLeft = dot.offsetLeft;
                                          originalCell = Math.round(initialLeft / cellWidth);
                                          calculateBoundaries(); // Update boundaries with the buffer in place

                                          dot.style.transition = 'none'; // Disable transition during drag

                                          document.addEventListener('mousemove', onMouseMove);
                                          document.addEventListener('touchmove', onMouseMove, { passive: true });
                                          document.addEventListener('mouseup', onMouseUp);
                                          document.addEventListener('touchend', onMouseUp);
                                        }

                                        dot.addEventListener('mousedown', onMouseDown);
                                        dot.addEventListener('touchstart', onMouseDown, { passive: true });
                                      });
                                    }

                                    // Calculate distribution
                                    function calculateDistribution() {
                                      console.log('calculateDistribution called');
                                      const numSizes = selectedSizesB.length;
                                      const sliderWidth = sliderSection.offsetWidth;
                                      const cellWidth = sliderWidth / bundleSize;

                                      // Get each dot's left position in pixels
                                      const dots = Array.from(sliderSection.querySelectorAll('.draggable-dot'));
                                      const dotPositions = dots.map(dot => {
                                        const dotLeftPercentage = parseFloat(dot.style.left);
                                        return (dotLeftPercentage / 100) * sliderWidth;
                                      });

                                      // When only one size is selected, the entire bundle goes to it.
                                      if (numSizes === 1) {
                                        distribution = [bundleSize];
                                      } else {
                                        distribution = [];

                                        // First segment: from left edge (0) to the first dot.
                                        distribution.push(Math.round(dotPositions[0] / cellWidth));

                                        // Intermediate segments: for each gap between successive dots.
                                        for (let i = 1; i < dotPositions.length; i++) {
                                          distribution.push(Math.round((dotPositions[i] - dotPositions[i - 1]) / cellWidth));
                                        }

                                        // Last segment: from the last dot to the right edge.
                                        distribution.push(bundleSize - Math.round(dotPositions[dotPositions.length - 1] / cellWidth));
                                      }

                                      // Ensure that each quantity is at least 1 (or adjust to 0 if that’s acceptable).
                                      distribution = distribution.map(d => Math.max(1, d));

                                      // Adjust the distribution so that the total sums to bundleSize.
                                      const currentTotal = distribution.reduce((a, b) => a + b, 0);
                                      const diff = bundleSize - currentTotal;
                                      let iterationCount = 0;
                                      const maxIterations = bundleSize * 2;

                                      if (diff !== 0) {
                                        // Distribute the difference (which might be positive or negative) evenly.
                                        for (let i = 0; i < Math.abs(diff); i++) {
                                          iterationCount++;
                                          if (iterationCount > maxIterations) {
                                            console.error('Max iterations reached in calculateDistribution for loop');
                                            break;
                                          }
                                          // If diff is positive, add 1 to one segment; if negative, subtract 1.
                                          const indexToAdjust = diff > 0 ? i % distribution.length : distribution.length - 1 - (i % distribution.length);
                                          distribution[indexToAdjust] += diff > 0 ? 1 : -1;
                                        }
                                      }

                                      // Ensure no segment falls below 1 after adjustment.
                                      distribution = distribution.map(d => Math.max(1, d));
                                      console.log('calculateDistribution - distribution:', distribution);

                                      updateUI();
                                    }


                                    // Update the UI
                                    function updateUI() {
                                      console.log('updateUI called');
                                      sizeLabels.innerHTML = '';
                                      selectedSizesB.forEach((size, index) => {
                                        const label = document.createElement('div');
                                        label.textContent = `Size ${size}: ${distribution[index]} ${formatQuantity(distribution[index])}`;
                                        label.id = `bundle-12-sizeLabel-${size}`;
                                        sizeLabels.appendChild(label);
                                      });
                                      updateselectedSizeData();
                                    }

                                    // Update Selected Sizes
                                    function updateselectedSizes() {
                                      console.log('updateselectedSizes called');
                                      console.log('updateselectedSizes - selectedSizesB:', selectedSizesB);
                                      selectedSizesContainer.innerHTML = '';
                                      initializeGrid();
                                      // Calculate distribution before updating the slider
                                      calculateDistribution();
                                      updateSlider();
                                      selectedSizeData = selectedSizesB.map((size, index) => ({
                                        size: parseFloat(size),
                                        quantity: distribution[index] || 1,
                                      }));
                                      console.log('updateselectedSizes - selectedSizeData:', selectedSizeData);
                                      // Toggle sliderSection visibility based on selectedSizesB length
                                      if (selectedSizesB.length > 1) {
                                        sliderSection.style.display = 'block';
                                        calculateDistribution();
                                        updateSlider();
                                      } else {
                                        sliderSection.style.display = 'none';
                                      }
                                      updatePayNowButtonsVisibility()
                                    }

                                    // Update Slider for Selected Sizes
                                    function updateSlider() {
                                      console.log('updateSlider called');
                                      // Remove existing dots
                                      const existingDots = sliderSection.querySelectorAll('.draggable-dot');
                                      existingDots.forEach(dot => dot.remove());
                                      const dots = createDots(); // Dots are created first
                                      positionDots(dots); // Then they are positioned
                                      makeDotsDraggable(dots);
                                    }

                                    function formatQuantity(quantity) {
                                      return quantity === 1 ? '1X' : `${quantity}X`;
                                    }

                                    function updateselectedSizeData() {
                                      console.log('updateselectedSizeData called');
                                      console.log('updateselectedSizeData - distribution:', distribution);
                                      selectedSizeData = selectedSizesB.map((size, index) => ({
                                        size: parseFloat(size),
                                        quantity: distribution[index],
                                      }));
                                      console.log('updateselectedSizeData - selectedSizeData:', selectedSizeData);
                                      selectedSizesContainer.dataset.selectedSizeData = JSON.stringify(selectedSizeData); // Moved here


                                      // Display the strictly formatted quantities for selected sizes
                                      selectedSizesContainer.innerHTML = '';
                                      selectedSizeData.forEach((data) => {
                                        const sizeTag = document.createElement('div');
                                        sizeTag.classList.add('selected-size');

                                        const sizeSpan = document.createElement('span');
                                        sizeSpan.textContent = `${formatQuantity(data.quantity)}Size ${data.size}`;

                                        const clearBtn = document.createElement('button');
                                        clearBtn.classList.add('clear-btn');
                                        clearBtn.textContent = 'X';

                                        // Define a handler function that clears the option from both UI and data
                                        const clearHandler = () => {
                                          // Remove from our selectedSizesB array:
                                          selectedSizesB = selectedSizesB.filter(s => s !== String(data.size));
                                          // Also update the <select> element to unselect this option:
                                          Array.from(sizesElement.options).forEach(option => {
                                            if (option.value === String(data.size)) {
                                              option.selected = false;
                                            }
                                          });
                                          // Finally update the UI / re-calculate distribution:
                                          updateselectedSizes();
                                        };

                                        // **Inject drag detection event listeners here for the clear button:**
                                        // Define a drag threshold in pixels.
                                        const DRAG_THRESHOLD = 5;

                                        clearBtn.addEventListener('pointerdown', function (e) {
                                          // Record the starting pointer coordinates and reset the dragging flag.
                                          this._dragStartX = e.clientX;
                                          this._dragStartY = e.clientY;
                                          this._isDragging = false;
                                        });

                                        clearBtn.addEventListener('pointermove', function (e) {
                                          // Calculate how far the pointer has moved from the starting position.
                                          const dx = e.clientX - this._dragStartX;
                                          const dy = e.clientY - this._dragStartY;
                                          if (Math.sqrt(dx * dx + dy * dy) > DRAG_THRESHOLD) {
                                            // If movement exceeds the threshold, mark as dragging.
                                            this._isDragging = true;
                                          }
                                        });

                                        clearBtn.addEventListener('pointerup', function (e) {
                                          // Only execute the clear action if the pointer did not move too far.
                                          if (!this._isDragging) {
                                            clearHandler();
                                          }
                                          // Clean up.
                                          delete this._dragStartX;
                                          delete this._dragStartY;
                                          delete this._isDragging;
                                        });

                                        // Also, for good measure, cancel the action on pointercancel.
                                        clearBtn.addEventListener('pointercancel', function (e) {
                                          delete this._dragStartX;
                                          delete this._dragStartY;
                                          delete this._isDragging;
                                        });

                                        sizeTag.appendChild(sizeSpan);
                                        sizeTag.appendChild(clearBtn);
                                        selectedSizesContainer.appendChild(sizeTag);
                                      });
                                    };

                                    // Assume bundleSize is already defined (e.g., 12)
                                    let previousSelections = []; // global variable to hold the last valid selection

                                    sizesElement.addEventListener('change', (e) => {
                                      // Get the current list of selected option values
                                      const currentSelections = Array.from(e.target.selectedOptions).map(option => option.value);
                                      console.log('Current selections:', currentSelections);

                                      // If the new count exceeds the allowed limit...
                                      if (currentSelections.length > bundleSize) {
                                        // Determine the newly added options by comparing with the previousSelections.
                                        const newlyAdded = currentSelections.filter(val => !previousSelections.includes(val));
                                        // Alert the user
                                        alert(`You can only select up to ${bundleSize} sizes. Please deselect an option before adding ${newlyAdded.join(', ')}`);

                                        // For each newly added option, set its "selected" property to false.
                                        newlyAdded.forEach(val => {
                                          const option = e.target.querySelector(`option[value="${val}"]`);
                                          if (option) {
                                            option.selected = false;
                                          }
                                        });
                                        // After unselecting the newly added options, update currentSelections
                                        currentSelections.length = 0;
                                        Array.from(e.target.selectedOptions).forEach(option => currentSelections.push(option.value));
                                      }

                                      // Save the valid selections for next time
                                      previousSelections = currentSelections.slice(); // copy the array
                                      selectedSizesB = currentSelections;
                                      console.log('Final selected sizes:', selectedSizesB);

                                      // Call your update function with the valid selections
                                      updateselectedSizes();
                                    });
                                    window.addEventListener('resize', () => {
                                      updateSlider();
                                    });
                                  });
                                </script>

                                <div id="buttonContainer">
                                  <button class="buynow" id="updateOptionsButton3B">Add To Cart</button>
                                </div>

                              </div>
                            </div>
                          </div>


                        </div>
                      </div>

                      <div class="1pair">
                        <div class="col-md-6">
                          <div class="card" role="button">

                            <div class="card-body text-center"
                              style="justify-content: flex-start; flex-direction: row; position: relative; display: block;">
                              <h5 class="cardimage_heading ai-style-change-1"
                                style="/* -webkit-text-stroke: 5px black; */">1 Pair</h5>
                              <img class="product card_image_class" id="product.card"
                                src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/7fd32088-1f34-42fd-97fa-b21c3c6ccd28/bitmap_g1123.png?content-type=image%2Fpng"
                                alt="Card Image">
                              <div class="price"
                                style="display: flex;flex-Direction: column;justify-Content: center;align-Items: center;position: relative;height: auto;width: 100%;bottom: 75px;">


                                <h5 class="card-title"
                                  style="position: absolute;-webkit-text-stroke: 9px black;right: -8px;width: auto;left: auto;/* max-width: 100%; */display: inline-block;font-size: clamp(2.25rem, 5vw, 23rem);">
                                  £59.99
                                </h5>
                                <h5 class="card-title"
                                  style="position: absolute;/* -webkit-text-stroke: 9px black; */right: -8px;width: auto;left: auto;/* max-width: 100%; */display: inline-block;font-size: clamp(2.25rem, 5vw, 13rem);">
                                  £59.99</h5>

                              </div>
                            </div>
                            <!-- Additional Content -->
                            <div class="additionalContent">
                              <h5 class="additionalContenth5">1 Pair</h5>
                              <h5 class="additionalContenth5">£59.99</h5>

                              <div class="slider1" id="slider-section">
                                <h1>"STEPPER"</h1>

                                <!-- Bundle Selection -->
                                <div class="bundle-selection" style="display: none;">
                                  <label for="bundle-bundleSizeB">Select Bundle Size:</label>
                                  <select id="bundle-bundleSizeB" disabled="">
                                    <option value="1">1 Pair</option>
                                  </select>
                                </div>

                                <!-- Size Selection -->
                                <div class="size-selection">
                                  <label for="bundle-sizesB">Size:</label>
                                  <select id="bundle-sizesB">
                                    <option value="3">Size 3</option>
                                    <option value="3.5">Size 3.5</option>
                                    <option value="4">Size 4</option>
                                    <option value="4.5">Size 4.5</option>
                                    <option value="5">Size 5</option>
                                    <option value="5.5">Size 5.5</option>
                                    <option value="6">Size 6</option>
                                    <option value="6.5">Size 6.5</option>
                                    <option value="7">Size 7</option>
                                    <option value="7.5">Size 7.5</option>
                                    <option value="8">Size 8</option>
                                    <option value="8.5">Size 8.5</option>
                                    <option value="9">Size 9</option>
                                    <option value="9.5">Size 9.5</option>
                                    <option value="10">Size 10</option>
                                    <option value="11">Size 11</option>
                                    <option value="11.5">Size 11.5</option>
                                    <option value="12">Size 12</option>
                                    <option value="13">Size 13</option>
                                  </select>
                                </div>

                                <!-- Display Selected Size -->
                                <div id="bundle-selectedSizesB" class="selected-sizes"></div>

                                <script>
                                  document.addEventListener("DOMContentLoaded", function () {
                                    const bundleSize = 1; // Fixed bundle size of 1 pair
                                    const sizesElement = document.getElementById('bundle-sizesB');
                                    const selectedSizesContainer = document.getElementById('bundle-selectedSizesB');
                                    let selectedSizeB = null;

                                    // Function to update the displayed selected size and the data attribute.
                                    function updateSelectedSize() {
                                      // Clear any previous content.
                                      selectedSizesContainer.innerHTML = '';
                                      let selectedSizeData = [];

                                      if (selectedSizeB) {
                                        // Append a new element showing the selected size and quantity.
                                        //  selectedSizesContainer.innerHTML = `
                                        // <div class="selected-size">You selected Size ${selectedSizeB}: Quantity 1</div>
                                        //  `;
                                        // Create a data object that your overlay logic can read.
                                        selectedSizeData = [{ size: parseInt(selectedSizeB, 10), quantity: 1 }];
                                      }
                                      // Store the data as a JSON string on a data attribute.
                                      selectedSizesContainer.dataset.selectedSizeData = JSON.stringify(selectedSizeData);
                                      // Call the overlay button update function (assumed to be globally available).
                                      updatePayNowButtonsVisibility()
                                    }

                                    let previousSelections = []; // To track the previous valid selection

                                    sizesElement.addEventListener('change', (e) => {
                                      // For a single-select element, this will be an array of one (or zero) values.
                                      const currentSelections = Array.from(e.target.selectedOptions).map(option => option.value);
                                      console.log('Current selections:', currentSelections);

                                      // Check if the selection count exceeds the allowed limit.
                                      if (currentSelections.length > bundleSize) {
                                        // Determine which options were newly added.
                                        const newlyAdded = currentSelections.filter(val => !previousSelections.includes(val));
                                        alert(`You can only select up to ${bundleSize} sizes. Please deselect an option before adding ${newlyAdded.join(', ')}`);

                                        // Unselect the newly added options.
                                        newlyAdded.forEach(val => {
                                          const option = e.target.querySelector(`option[value="${val}"]`);
                                          if (option) {
                                            option.selected = false;
                                          }
                                        });
                                        // Update the currentSelections after removing extra selections.
                                        currentSelections.length = 0;
                                        Array.from(e.target.selectedOptions).forEach(option => currentSelections.push(option.value));
                                      }

                                      // Save the current (valid) selection.
                                      previousSelections = currentSelections.slice(); // copy the array

                                      // For single select, assign the first (and only) value or null.
                                      selectedSizeB = currentSelections.length > 0 ? currentSelections[0] : null;
                                      console.log('Final selected size:', selectedSizeB);

                                      // Update the selected sizes container with the new selection.
                                      updateSelectedSize();
                                    });
                                  });
                                </script>

                                <div id="buttonContainer">
                                  <button class="buynow" id="updateOptionsButton1B">Add To Cart</button>
                                </div>

                              </div>
                            </div>
                          </div>


                        </div>
                      </div>



                      <style>
                        .all-black.cards,
                        .all-black.cards * {
                          user-select: none;
                          /* Disable text selection */
                          -webkit-user-select: none;
                          -ms-user-select: none;
                        }

                        .all-black.cards img {
                          pointer-events: none;
                          /* Disable pointer events for images */
                        }


                        .products.and.order {
                          width: 100%;
                          /* Makes the element fill the width of its parent */
                        }


                        h5.cardimage_heading {
                          position: absolute;
                          top: 60px;
                          left: 40px;
                        }

                        .all-black.cards {
                          width: 100%;
                          margin: 0 auto;
                          padding: 0px;
                          justify-items: normal;
                          display: grid;
                          grid-template-columns: repeat(4, 100%);
                          grid-auto-flow: row;
                          overflow-x: visible;
                          grid-auto-rows: auto;
                          height: 521.718px;
                          gap: 20px;
                          transition: transform 0.3s ease-in-out;
                          pointer-events: auto;
                          /* Allow clicks but prevent drag */
                          user-select: none;
                          /* Prevent text selection during click */
                          -webkit-user-drag: none;
                          /* Prevent dragging on webkit browsers */
                        }

                        .all-black.cards .col-md-6 {
                          width: auto !important;
                          height: 461.718px;
                        }

                        .all-black.cards .col-md-6>div {
                          height: 461.718px;
                        }

                        h3.content_heading1 {
                          font-size: 24px;
                        }

                        .all-black.cards {
                          position: relative;
                          transform: translateX(0px);
                        }

                        all-black.cards:hover {
                          transform: translateX(-1614px);
                        }
                      </style>

                      <script>
                        document.addEventListener("DOMContentLoaded", function () {
                          const carouselTrack = document.querySelector(".all-black.cards");
                          if (!carouselTrack) return;

                          const cards = document.querySelectorAll(".all-black.cards .col-md-6");
                          const cardCount = cards.length;
                          let currentIndex = 0;
                          let isDragging = false;
                          let startPosition = 0;
                          let currentTranslate = 0;
                          let previousTranslate = 0;
                          let startTime = 0;

                          function getSlideWidth() {
                            const baseWidth = cards[0] ? cards[0].offsetWidth : 0;
                            const gap = 20; // adjust as needed
                            return baseWidth + gap;
                          }

                          function calculateTranslateX(index) {
                            let translateX = 0;
                            const gap = 20;
                            for (let i = 0; i < index; i++) {
                              translateX += cards[i].offsetWidth + gap;
                            }
                            return -translateX;
                          }

                          function setPositionByIndex() {
                            currentTranslate = calculateTranslateX(currentIndex);
                            carouselTrack.style.transition = "transform 0.3s ease-in-out";
                            carouselTrack.style.transform = `translateX(${currentTranslate}px)`;
                            previousTranslate = currentTranslate;
                          }

                          function handleStart(e) {
                            // Do not start carousel drag if inside interactive areas
                            if (e.target.closest("#slider-section, .additionalContent.open")) return;
                            isDragging = true;
                            startTime = Date.now();
                            startPosition = e.type.includes("mouse") ? e.pageX : e.touches[0].clientX;
                            carouselTrack.style.transition = "none";
                          }

                          function handleMove(e) {
                            if (!isDragging) return;
                            if (e.target.closest("#slider-section, .additionalContent.open")) return;
                            const currentPosition = e.type.includes("mouse") ? e.pageX : e.touches[0].clientX;
                            const diff = currentPosition - startPosition;

                            // Only start moving if dragged more than threshold (prevents accidental movement on tap)
                            const isTouchDevice = e.type.includes("touch");
                            const minDrag = isTouchDevice ? 20 : 10;
                            if (Math.abs(diff) < minDrag) return;

                            currentTranslate = previousTranslate + diff;
                            carouselTrack.style.transform = `translateX(${currentTranslate}px)`;
                          }

                          function handleEnd(e) {
                            if (e.target.closest("#slider-section, .additionalContent.open")) {
                              isDragging = false;
                              return;
                            }
                            if (!isDragging) return;

                            const endTime = Date.now();
                            const elapsedTime = endTime - startTime;
                            const endPosition = e.type.includes("mouse") ? e.pageX : e.changedTouches[0].clientX;
                            const movedBy = endPosition - startPosition;

                            // If it was a quick tap (< 300ms) with minimal movement, don't change position
                            const isTouchDevice = e.type.includes("touch");
                            const minDrag = isTouchDevice ? 20 : 10;
                            if (elapsedTime < 300 && Math.abs(movedBy) < minDrag) {
                              isDragging = false;
                              // Reset to current position
                              carouselTrack.style.transition = "transform 0.3s ease-in-out";
                              carouselTrack.style.transform = `translateX(${previousTranslate}px)`;
                              return;
                            }

                            isDragging = false;
                            const slideWidth = getSlideWidth();
                            const velocity = (movedBy / elapsedTime) * 1000; // pixels per second
                            const inertiaFactor = 0.3;
                            const extraDistance = velocity * inertiaFactor;
                            const targetTranslate = previousTranslate + movedBy + extraDistance;
                            let targetIndex = Math.round(-targetTranslate / slideWidth);
                            targetIndex = Math.max(0, Math.min(targetIndex, cardCount - 1));
                            currentIndex = targetIndex;
                            setPositionByIndex();
                          }

                          // DISABLED: Drag functionality removed - carousel only moves via navigation buttons
                          // document.addEventListener("mousemove", handleMove, { capture: true });
                          // document.addEventListener("mouseup", handleEnd, { capture: true });
                          // document.addEventListener("touchmove", handleMove, { passive: true, capture: true });
                          // document.addEventListener("touchend", handleEnd, { capture: true });

                          // carouselTrack.addEventListener("mousedown", handleStart);
                          // carouselTrack.addEventListener("touchstart", handleStart, { passive: true });
                          // carouselTrack.addEventListener("mouseleave", () => { if (isDragging) handleEnd(); });

                          setPositionByIndex();
                        });
                      </script>

                      <!---* pay now --->

                      <!-- ----- Bundle B (second product variant) ----- -->
                      <script id="yui_3_17_2_1_1735428807640_117B">
                        (function () {
                          /* The code is identical to the block above
                           *   – only the element/ID suffixes change.
                           * If you prefer, you can deduplicate both
                           * blocks into a single routine—but keeping
                           * them separate is simplest for drop-in
                           * testing.                                                  */

                          const CLICK_DELAY_MS = 300;

                          function refreshCartIframe() {
                            const iframe = document.getElementById('cartIframe');
                            if (iframe) {
                              iframe.addEventListener('load', stopCartLoading, { once: true });
                              iframe.src = iframe.src;
                            } else {
                              console.error('Cart iframe not found');
                            }
                          }

                          function waitForYUI(cb) {
                            if (typeof YUI !== 'undefined') cb();
                            else setTimeout(() => waitForYUI(cb), 100);
                          }

                          document.addEventListener('DOMContentLoaded', () => {
                            const button1B = document.getElementById('updateOptionsButton1B');
                            const button3B = document.getElementById('updateOptionsButton3B');
                            const button7B = document.getElementById('updateOptionsButton7B');
                            const button12B = document.getElementById('updateOptionsButton12B');
                            const targetElement = document.getElementById('yui_3_17_2_1_1733703950054_119');

                            const updateOptionsB = (selectedSizesDivId) => {
                              targetElement.setAttribute('data-unselected-options', '[]');

                              const variantsData = JSON.parse(
                                document.querySelector('.pdp-selection .product-variants')
                                  .getAttribute('data-variants')
                              );

                              const selectedSizesDiv = document.getElementById(selectedSizesDivId);
                              const waitForData = () => {
                                if (!selectedSizesDiv?.dataset?.selectedSizeData) {
                                  setTimeout(waitForData, 100);
                                  return;
                                }

                                const selectedSizesData = JSON.parse(selectedSizesDiv.dataset.selectedSizeData);

                                const processSizeAt = (idx) => {
                                  if (idx >= selectedSizesData.length) {
                                    setTimeout(refreshCartIframe, CLICK_DELAY_MS);
                                    return;
                                  }

                                  const { size, quantity } = selectedSizesData[idx];
                                  const matchingVariants = variantsData.filter(v =>
                                    v.optionValues?.some(o => o.value === size.toString())
                                  );

                                  let selectedVariant =
                                    matchingVariants.find(v =>
                                      v.optionValues?.some(o => o.value.toLowerCase() === 'all-black')
                                    )
                                    || matchingVariants[0]
                                    || variantsData[Math.floor(Math.random() * variantsData.length)];

                                  targetElement.setAttribute('data-selected-variant', JSON.stringify(selectedVariant));
                                  targetElement.setAttribute('data-variant-in-stock', 'true');

                                  waitForYUI(() => {
                                    const btn = document.querySelector(
                                      '.sqs-add-to-cart-button.sqs-suppress-edit-mode.sqs-button-element--primary'
                                    );
                                    if (!btn) {
                                      processSizeAt(idx + 1);
                                      return;
                                    }
                                    let c = 0;
                                    const loop = () => {
                                      if (c < quantity) {
                                        Y.Event.simulate(btn, 'click');
                                        c++;
                                        setTimeout(loop, CLICK_DELAY_MS);
                                      } else {
                                        processSizeAt(idx + 1);
                                      }
                                    };
                                    loop();
                                  });
                                };

                                processSizeAt(0);
                              };

                              waitForData();
                            };

                            button1B?.addEventListener('click', () => updateOptionsB('bundle-selectedSizesB'));
                            button3B?.addEventListener('click', () => updateOptionsB('bundle-3-selectedSizesB'));
                            button7B?.addEventListener('click', () => updateOptionsB('bundle-7-selectedSizesB'));
                            button12B?.addEventListener('click', () => updateOptionsB('bundle-12-selectedSizesB'));
                          });
                        })();  
                      </script>




                    </div>




                    <script>
                      document.addEventListener("DOMContentLoaded", function () {
                        const carousels = document.querySelectorAll(".selected-sizes");

                        carousels.forEach((carousel) => {
                          let isDragging = false;
                          let startX = 0;
                          let currentTranslate = 0;
                          let prevTranslate = 0;
                          let animationID;

                          carousel.addEventListener("mousedown", startDrag);
                          carousel.addEventListener("touchstart", startDrag, { passive: true });

                          function startDrag(e) {
                            isDragging = true;
                            startX = e.type.includes("touch") ? e.touches[0].clientX : e.clientX;
                            carousel.style.transition = "none";
                            animationID = requestAnimationFrame(animation);
                            document.addEventListener("mousemove", drag);
                            document.addEventListener("mouseup", endDrag);
                            document.addEventListener("touchmove", drag, { passive: true });
                            document.addEventListener("touchend", endDrag);
                          }

                          function drag(e) {
                            if (!isDragging) return;
                            const currentX = e.type.includes("touch") ? e.touches[0].clientX : e.clientX;
                            const diff = currentX - startX;
                            currentTranslate = prevTranslate + diff;
                          }

                          function animation() {
                            carousel.style.transform = `translateX(${currentTranslate}px)`;
                            if (isDragging) {
                              requestAnimationFrame(animation);
                            }
                          }

                          function endDrag() {
                            isDragging = false;
                            document.removeEventListener("mousemove", drag);
                            document.removeEventListener("mouseup", endDrag);
                            document.removeEventListener("touchmove", drag);
                            document.removeEventListener("touchend", endDrag);

                            const containerWidth = carousel.offsetWidth;
                            const scrollWidth = carousel.scrollWidth;
                            const maxTranslate = containerWidth - scrollWidth;

                            if (currentTranslate > 0) {
                              currentTranslate = 0;
                            } else if (currentTranslate < maxTranslate) {
                              currentTranslate = maxTranslate;
                            }

                            carousel.style.transition = "transform 0.3s ease-out";
                            carousel.style.transform = `translateX(${currentTranslate}px)`;
                            prevTranslate = currentTranslate;
                          }
                        });
                      });
                    </script>


                    <style>
                      h1 {
                        font-size: 1.5em;
                        text-align: center;
                        font-family: "PRESS START 2P" !important;
                      }

                      .bundle-selection,
                      .size-selection {
                        margin: 20px 20px 15px 20px;
                      }

                      #bundle-sizes {
                        background: #36c1f5;
                      }

                      #bundle-sizesB {
                        background: #36c1f5;
                      }


                      label {
                        display: block;
                        margin-bottom: 5px;
                        font-size: 1em;
                      }

                      select {
                        width: 100%;
                        padding: 8px;
                        font-size: 1rem;
                        font-family: "press start 2p";
                        color: white;
                        border: none;
                        border-radius: 4px;
                        BACKGROUND: rgba(0, 0, 0, 0);
                        -webkit-mask-image: -webkit-gradient(linear, right top, left top, color-stop(9%, rgba(0, 0, 0, 1)), color-stop(8.1%, rgba(0, 0, 0, 0)));
                        -webkit-mask-composite: destination-in;
                        mask-composite: intersect;
                        /* Standard property for newer browsers */
                      }

                      .size-selection,
                      .option {
                        background-color: unset;
                        color: unset;
                      }

                      .selected-sizes {
                        margin: 15px 0;
                        display: flex;
                        gap: 10px;
                      }

                      .selected-size {
                        display: flex;
                        align-items: center;
                        padding: 5px 10px;
                        font-family: "press start 2p";
                        color: white;
                        border-radius: 15px;
                        font-size: 0.9em;
                      }
                    </style>
                    <style>
                      button.clear-btn {
                        background-color: unset;
                        border: unset;
                        color: #ffffff00;
                        position: absolute;
                        left: 86px;
                        transform: scaleX(10);

                      }

                      .products.and.order p {
                        font-family: "press start 2p";
                        color: white;
                        margin-top: 20px;
                        margin-bottom: 5px;
                        FONT-SIZE: 0.75REM;
                      }

                      /* Ensure the slider-section is the positioning context */
                      .slider-section {
                        position: relative;
                        padding: 10px 0;
                        /* Optional spacing */
                      }

                      #slider-section {
                        font-family: "press start 2p" !important;
                        color: white;
                        padding-top: 30px;
                      }

                      /* Style the track (the element with class "grid-cell") */
                      .slider-section .grid-cell {
                        background-color: #ffffff;
                        height: 8px;
                        width: 100%;
                        border-radius: 4px;
                        position: absolute;
                        top: 50%;
                        left: 0;
                        transform: translateY(-50%);
                        z-index: 0;
                        /* Track behind the dots */
                      }

                      /* Style the draggable dots */
                      .slider-section .draggable-dot {
                        width: 30px;
                        height: 30px;
                        background-color: #10aae6;
                        border: 6px solid white;
                        border-radius: 50%;
                        position: absolute;
                        top: 50% !important;
                        transform: translate(-50%, -50%);
                        cursor: pointer;
                        z-index: 1;
                        transition: left 0.2s ease-out;
                      }

                      /* Hover effect for interactive feedback */
                      .slider-section .draggable-dot:hover {
                        transform: translate(-50%, -50%) scale(1.1);
                        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
                      }
                    </style>

                    <style>
                      .product.card_image_class,
                      #product.card {
                        min-width: 100%;
                        height: clamp(125%, 50vw, 250%);
                        /* width: 616.465px; */
                        /* height: 459.886px; */
                        position: absolute;
                        bottom: -130px;
                        left: 0px;
                        /* transform: scaleX(-1); */

                      }

                      .buynow {
                        font-family: 'Press Start 2P', system-ui, sans-serif;
                        font-size: 11px;
                        padding: 15px 40px;
                        background: linear-gradient(180deg, #fff, #f0f0f0);
                        color: #333;
                        border: 3px solid #ddd;
                        border-radius: 10px;
                        cursor: pointer;
                        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                        box-shadow:
                          0 6px 0 #bbb,
                          0 10px 25px rgba(0, 0, 0, 0.2),
                          inset 0 1px 0 rgba(255, 255, 255, 1);
                        position: relative;
                        overflow: hidden;
                        animation: tutorialBtnPulse 2s ease-in-out infinite;
                      }

                      .buynow::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: -100%;
                        width: 100%;
                        height: 100%;
                        background: linear-gradient(90deg, transparent, rgba(91, 200, 200, 0.3), transparent);
                        transition: left 0.5s ease;
                      }

                      .buynow:hover::before {
                        left: 100%;
                      }

                      .buynow:hover {
                        transform: translateY(-5px) scale(1.05);
                        box-shadow:
                          0 12px 0 #bbb,
                          0 18px 35px rgba(0, 0, 0, 0.25),
                          0 0 30px rgba(91, 200, 200, 0.4);
                        color: #222;
                        background: linear-gradient(180deg, #fff 0%, #fff 50%, #f0f0f0 100%);
                      }

                      .buynow:active {
                        transform: translateY(4px) scale(0.98);
                        box-shadow: 0 2px 0 #bbb;
                      }

                      .buynow:disabled {
                        background: linear-gradient(180deg, #ccc, #bbb);
                        color: #666;
                        cursor: not-allowed;
                        transform: none;
                        box-shadow: 0 2px 0 #999;
                      }

                      .buynow:disabled:hover {
                        transform: none;
                        box-shadow: 0 2px 0 #999;
                      }
                    </style>

                    <style>
                      .fixed-overlay-button {
                        position: fixed !important;
                        bottom: 15px;
                        left: 20px;
                        right: 20px;
                        z-index: 1000;
                        padding: 15px;
                        color: #fff;
                        text-align: center;
                        border: 5px solid #04709800;
                        font-size: 1.2rem;
                        background: #ffe4c400;
                        font-family: 'press start 2p';

                      }

                      /* Initially, hide purchase buttons */
                      .buynow {
                        display: none;
                      }
                    </style>
                    <style>
                      #buttonContainer {
                        position: absolute;
                        top: 20px;
                        right: 32px;
                        display: flex;
                        justify-content: center;
                        align-items: center;
                      }

                      @media (max-width: 768px) {
                        #buttonContainer {
                          position: absolute;
                          top: auto;
                          bottom: 20px;
                          left: 50%;
                          right: auto;
                          transform: translateX(-50%);
                          display: flex;
                          justify-content: center;
                          align-items: center;
                          width: auto;
                        }

                        .buynow {
                          font-size: 11px;
                          width: auto;
                          min-width: 140px;
                          padding: 10px 20px !important;
                        }
                      }

                      @media (max-width: 426px) {
                        #buttonContainer {
                          position: absolute;
                          bottom: 15px;
                          left: 50%;
                          right: auto;
                          transform: translateX(-50%);
                          display: flex;
                          justify-content: center;
                          align-items: center;
                        }

                        .buynow {
                          font-size: 10px;
                          width: auto;
                          min-width: 130px;
                          padding: 8px 15px !important;
                        }

                        .size-selection {
                          /* select{
                              padding: 2px;;
                            } */
                        }
                      }

                      /* Button styling - controlled by JavaScript */
                      .buynow {
                        padding: 10px 20px;
                        display: flex;
                        justify-content: center;
                        align-items: center;
                      }
                    </style>

                  </div>

                  <div class="pdp-selection">






                    <div class="product-variants" data-item-id="647e44f5e36579318109a303"
                      data-variants="[{&quot;attributes&quot;:{&quot;Size&quot;:&quot;4&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;4&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;973a6d26-4398-4e6f-ba68-4edeeb86fe23&quot;,&quot;sku&quot;:&quot;SQ4789442&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;4&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;4&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;701300d7-449a-47a8-86e0-ec5296b290b0&quot;,&quot;sku&quot;:&quot;SQ3417525&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;4.5&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;4.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;8799fec4-3dd4-4a8d-88e7-7330b8f3580a&quot;,&quot;sku&quot;:&quot;SQ2958358&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;4.5&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;4.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;2d3d6ff9-f4c2-4e8d-9abe-1c7c66bc4ced&quot;,&quot;sku&quot;:&quot;SQ2173406&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;5&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;41d0c9e4-f17d-4eba-b525-4263f2bfdd19&quot;,&quot;sku&quot;:&quot;SQ4954301&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;5&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;42d03ec2-976e-4317-822c-d422151cfee3&quot;,&quot;sku&quot;:&quot;SQ0811487&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;5.5&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;5.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;58497bb6-dc96-42da-bba2-211fc0d6833f&quot;,&quot;sku&quot;:&quot;SQ7888729&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;5.5&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;5.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;28f63941-5a81-440c-a9d5-3fa0abb61ff2&quot;,&quot;sku&quot;:&quot;SQ5584050&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;6&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;6&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;4971e4a2-0184-4beb-a234-e4088a559d26&quot;,&quot;sku&quot;:&quot;SQ1817536&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;6&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;6&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;c195d109-707e-48a1-8bf3-b522603fe1d2&quot;,&quot;sku&quot;:&quot;SQ6525500&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;6.5&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;6.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;e9cfbf5c-8a79-4dac-9be8-bb8bea5b82e8&quot;,&quot;sku&quot;:&quot;SQ0797411&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;6.5&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;6.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;af07cd2f-d595-46c3-a451-9f4361afb213&quot;,&quot;sku&quot;:&quot;SQ9776641&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;7&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;7&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;822da6d2-2d9b-4994-9fdb-4c2a3075ab47&quot;,&quot;sku&quot;:&quot;SQ2859632&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;7&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;7&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;63224353-8f9a-4737-bb90-35130d3d6ffe&quot;,&quot;sku&quot;:&quot;SQ2935178&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;7.5&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;7.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;fe30ff10-3a5a-4fe0-b842-1aa81559607f&quot;,&quot;sku&quot;:&quot;SQ8532475&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;7.5&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;7.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;eb722471-c098-4b73-86d2-f63850b15cf6&quot;,&quot;sku&quot;:&quot;SQ6711899&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;8&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;8&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;e41d3490-3a51-4db2-bc07-3a369218b755&quot;,&quot;sku&quot;:&quot;SQ2777348&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;8&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;8&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;1a90484a-1ed4-4a18-a748-32c3bcc3f8b4&quot;,&quot;sku&quot;:&quot;SQ3480081&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;8.5&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;8.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;429dd741-c50b-4d8a-8dae-be871ccf9046&quot;,&quot;sku&quot;:&quot;SQ4280946&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;8.5&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;8.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;ec6fee7e-5e53-4950-9cdf-2d5b496e6513&quot;,&quot;sku&quot;:&quot;SQ9227841&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;9&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;9&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;584a2f43-6af3-42dc-91d5-b3aefd5d98d1&quot;,&quot;sku&quot;:&quot;SQ6381821&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;9&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;9&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;bd6dd952-7822-4bc3-9556-c84f1908d9c5&quot;,&quot;sku&quot;:&quot;SQ9666925&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;9.5&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;9.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;a96904d6-a9a8-4744-9535-5531ce20c36d&quot;,&quot;sku&quot;:&quot;SQ2588860&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;9.5&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;9.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;ec279605-0fa2-4281-afff-c5440af6c1b1&quot;,&quot;sku&quot;:&quot;SQ1874625&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;10&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;10&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;72caf877-6a4c-46b0-986d-630a94e16daa&quot;,&quot;sku&quot;:&quot;SQ5719744&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;10&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;10&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;f0d1ec7b-0dde-459d-966b-3eabd78f39ff&quot;,&quot;sku&quot;:&quot;SQ8141406&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;10.5&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;10.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;a18a8ee0-f426-40d1-9e77-d9d32f12da55&quot;,&quot;sku&quot;:&quot;SQ1978312&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;10.5&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;10.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;e575ca7e-b6ad-48f4-8d7d-8f499d9ef95a&quot;,&quot;sku&quot;:&quot;SQ3195356&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;11&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;11&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;5351ef6b-e0e6-41b3-8fc7-85447fd68a35&quot;,&quot;sku&quot;:&quot;SQ3355325&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;11&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;11&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;1a4d60dd-391f-4eee-a773-fbeaa68cd6f3&quot;,&quot;sku&quot;:&quot;SQ2831496&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;11.5&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;11.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;c58c1888-8bf3-4a71-831b-dcffd8dd47ab&quot;,&quot;sku&quot;:&quot;SQ8871923&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;11.5&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;11.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;c6ef35fd-d5cf-462a-be43-8bb24f862cb2&quot;,&quot;sku&quot;:&quot;SQ2146858&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;12&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;12&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;87aac23f-cb0f-45fa-90e4-b4423d03905a&quot;,&quot;sku&quot;:&quot;SQ0399045&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;12&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;12&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;a363c8f0-1b52-46c1-ba83-b22a279705d3&quot;,&quot;sku&quot;:&quot;SQ9627475&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;13&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;13&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;9837308f-281a-43b1-a55d-25a013ae4b02&quot;,&quot;sku&quot;:&quot;SQ7322211&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;13&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;13&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;340160fc-1725-4be5-bd4e-7f4f857920c9&quot;,&quot;sku&quot;:&quot;SQ1548346&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;3&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;b880ecc9-02c5-4a4a-8ee2-5fbc8851b79e&quot;,&quot;sku&quot;:&quot;SQ8245877&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;3&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;98ae7bba-e10b-45d9-bfcf-b8f53ef9094a&quot;,&quot;sku&quot;:&quot;SQ8551664&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;3.5&quot;,&quot;Color&quot;:&quot;All-White&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;3.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-White&quot;}],&quot;id&quot;:&quot;2b6e7fcc-2d68-4052-b448-e6f2ab8a4c2c&quot;,&quot;sku&quot;:&quot;SQ8132673&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0},{&quot;attributes&quot;:{&quot;Size&quot;:&quot;3.5&quot;,&quot;Color&quot;:&quot;All-Black&quot;},&quot;optionValues&quot;:[{&quot;optionName&quot;:&quot;Size&quot;,&quot;value&quot;:&quot;3.5&quot;},{&quot;optionName&quot;:&quot;Color&quot;,&quot;value&quot;:&quot;All-Black&quot;}],&quot;id&quot;:&quot;135ed4ea-f62a-43db-8e56-a07cb18edf75&quot;,&quot;sku&quot;:&quot;SQ2877776&quot;,&quot;price&quot;:11500,&quot;salePrice&quot;:5999,&quot;priceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;115.00&quot;},&quot;salePriceMoney&quot;:{&quot;currency&quot;:&quot;GBP&quot;,&quot;value&quot;:&quot;59.99&quot;},&quot;onSale&quot;:true,&quot;unlimited&quot;:true,&quot;qtyInStock&quot;:0,&quot;width&quot;:0.0,&quot;height&quot;:0.0,&quot;weight&quot;:0.0,&quot;imageIds&quot;:[],&quot;images&quot;:[],&quot;len&quot;:0.0}]"
                      data-animation-role="content" id="yui_3_17_2_1_1733703950054_119"
                      data-unselected-options="[&quot;Size&quot;,&quot;Color&quot;]">
                      <div class="variant-option">
                        <div class="variant-option-title">Size: </div>
                        <div class="variant-select-wrapper" data-text="Select Size">
                          <select aria-label="Select Size" data-variant-option-name="Size" fdprocessedid="181vwd">
                            <option value="">Select Size</option>
                            <option value="4">4</option>
                            <option value="4.5">4.5</option>
                            <option value="5">5</option>
                            <option value="5.5">5.5</option>
                            <option value="6">6</option>
                            <option value="6.5">6.5</option>
                            <option value="7">7</option>
                            <option value="7.5">7.5</option>
                            <option value="8">8</option>
                            <option value="8.5">8.5</option>
                            <option value="9">9</option>
                            <option value="9.5">9.5</option>
                            <option value="10">10</option>
                            <option value="10.5">10.5</option>
                            <option value="11">11</option>
                            <option value="11.5">11.5</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="3">3</option>
                            <option value="3.5">3.5</option>
                          </select>
                        </div>
                        <div class="variant-radiobtn-wrapper" data-variant-option-name="Size">
                          <input type="radio" class="variant-radiobtn" value="4" name="variant-option-Size"
                            id="variant-option-Size-4">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-4">4</label>
                          <input type="radio" class="variant-radiobtn" value="4.5" name="variant-option-Size"
                            id="variant-option-Size-4.5">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-4.5">4.5</label>
                          <input type="radio" class="variant-radiobtn" value="5" name="variant-option-Size"
                            id="variant-option-Size-5">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-5">5</label>
                          <input type="radio" class="variant-radiobtn" value="5.5" name="variant-option-Size"
                            id="variant-option-Size-5.5">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-5.5">5.5</label>
                          <input type="radio" class="variant-radiobtn" value="6" name="variant-option-Size"
                            id="variant-option-Size-6">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-6">6</label>
                          <input type="radio" class="variant-radiobtn" value="6.5" name="variant-option-Size"
                            id="variant-option-Size-6.5">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-6.5">6.5</label>
                          <input type="radio" class="variant-radiobtn" value="7" name="variant-option-Size"
                            id="variant-option-Size-7">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-7">7</label>
                          <input type="radio" class="variant-radiobtn" value="7.5" name="variant-option-Size"
                            id="variant-option-Size-7.5">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-7.5">7.5</label>
                          <input type="radio" class="variant-radiobtn" value="8" name="variant-option-Size"
                            id="variant-option-Size-8">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-8">8</label>
                          <input type="radio" class="variant-radiobtn" value="8.5" name="variant-option-Size"
                            id="variant-option-Size-8.5">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-8.5">8.5</label>
                          <input type="radio" class="variant-radiobtn" value="9" name="variant-option-Size"
                            id="variant-option-Size-9">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-9">9</label>
                          <input type="radio" class="variant-radiobtn" value="9.5" name="variant-option-Size"
                            id="variant-option-Size-9.5">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-9.5">9.5</label>
                          <input type="radio" class="variant-radiobtn" value="10" name="variant-option-Size"
                            id="variant-option-Size-10">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-10">10</label>
                          <input type="radio" class="variant-radiobtn" value="10.5" name="variant-option-Size"
                            id="variant-option-Size-10.5">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-10.5">10.5</label>
                          <input type="radio" class="variant-radiobtn" value="11" name="variant-option-Size"
                            id="variant-option-Size-11">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-11">11</label>
                          <input type="radio" class="variant-radiobtn" value="11.5" name="variant-option-Size"
                            id="variant-option-Size-11.5">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-11.5">11.5</label>
                          <input type="radio" class="variant-radiobtn" value="12" name="variant-option-Size"
                            id="variant-option-Size-12">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-12">12</label>
                          <input type="radio" class="variant-radiobtn" value="13" name="variant-option-Size"
                            id="variant-option-Size-13">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-13">13</label>
                          <input type="radio" class="variant-radiobtn" value="3" name="variant-option-Size"
                            id="variant-option-Size-3">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-3">3</label>
                          <input type="radio" class="variant-radiobtn" value="3.5" name="variant-option-Size"
                            id="variant-option-Size-3.5">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Size-3.5">3.5</label>
                        </div>
                      </div>
                      <div class="variant-option">
                        <div class="variant-option-title">Color: </div>
                        <div class="variant-select-wrapper" data-text="Select Color">
                          <select aria-label="Select Color" data-variant-option-name="Color" fdprocessedid="c8z5ra">
                            <option value="">Select Color</option>
                            <option value="All-White">All-White</option>
                            <option value="All-Black">All-Black</option>
                          </select>
                        </div>
                        <div class="variant-radiobtn-wrapper" data-variant-option-name="Color">
                          <input type="radio" class="variant-radiobtn" value="All-White" name="variant-option-Color"
                            id="variant-option-Color-All-White">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Color-All-White">All-White</label>
                          <input type="radio" class="variant-radiobtn" value="All-Black" name="variant-option-Color"
                            id="variant-option-Color-All-Black">
                          <label class="sqs-button-element--secondary" role="button" tabindex="0"
                            for="variant-option-Color-All-Black">All-Black</label>
                        </div>
                      </div>
                    </div>




                    <div class="product-quantity-input" data-item-id="647e44f5e36579318109a303"
                      data-animation-role="content" id="yui_3_17_2_1_1733703950054_118">
                      <div class="quantity-label">Quantity:</div>
                      <input aria-label="Quantity" size="4" max="9999" min="1" value="1" type="number" step="1"
                        fdprocessedid="7kp5pl">
                    </div>










                    <main id="page" class="container" role="main">

                      <div class="system-page" style="padding-top: 105.875px;">
                        <div id="sqs-cart-root">
                          <script type="application/json">

                {"cart":{"id":"67a0703ff5d8464562eb58b1","cartToken":"7PPsPrnfx7z3tcdsFfTTJcFbrt_L_2U7-09I1Z2i","items":[{"id":"67a41e9fd57c202b38d40d16","productId":"647e44f5e36579318109a303","productType":"PHYSICAL","sku":"SQ3417525","variantId":"701300d7-449a-47a8-86e0-ec5296b290b0","productName":"AF1 07s","productDescription":"<p class=\"\">You know it. I know it. We all know it.</p><p class=\"\"></p>","productUrl":"/store/p/byforce-v1s","quantity":12,"multipleQuantityAllowed":true,"unitPrice":{"currencyCode":"GBP","value":5999,"decimalValue":"59.99","fractionalDigits":2},"itemTotal":{"currencyCode":"GBP","value":71988,"decimalValue":"719.88","fractionalDigits":2},"variantOptions":[{"name":"Size","value":"4"},{"name":"Color","value":"All-Black"}],"image":{"id":"64d4ee06ce07401d54241379","title":"","systemDataId":"1693355597171-FADQYUFBFWDCCQL4CM3Z","type":"JPEG","urls":{"http":"http://images.squarespace-cdn.com/content/v1/647e1982c1836a5f267634f1/1693355597171-FADQYUFBFWDCCQL4CM3Z/527004CF-620D-409A-B3B1-4E8453E19146.jpg","https":"https://images.squarespace-cdn.com/content/v1/647e1982c1836a5f267634f1/1693355597171-FADQYUFBFWDCCQL4CM3Z/527004CF-620D-409A-B3B1-4E8453E19146.jpg"},"originalSize":{"width":2500,"height":1407},"sizes":[{"width":2500,"height":1407},{"width":100},{"width":300},{"width":500},{"width":750},{"width":1000},{"width":1500},{"width":2500}],"focalPoint":{"x":0.550000011920929,"y":0.25},"url":"https://images.squarespace-cdn.com/content/v1/647e1982c1836a5f267634f1/1693355597171-FADQYUFBFWDCCQL4CM3Z/527004CF-620D-409A-B3B1-4E8453E19146.jpg"},"isSubscribable":false},{"id":"67a41f6fd57c202b38d40e33","productId":"647e44f5e36579318109a303","productType":"PHYSICAL","sku":"SQ1817536","variantId":"4971e4a2-0184-4beb-a234-e4088a559d26","productName":"AF1 07s","productDescription":"<p class=\"\">You know it. I know it. We all know it.</p><p class=\"\"></p>","productUrl":"/store/p/byforce-v1s","quantity":1,"multipleQuantityAllowed":true,"unitPrice":{"currencyCode":"GBP","value":5999,"decimalValue":"59.99","fractionalDigits":2},"itemTotal":{"currencyCode":"GBP","value":5999,"decimalValue":"59.99","fractionalDigits":2},"variantOptions":[{"name":"Size","value":"6"},{"name":"Color","value":"All-White"}],"image":{"id":"64d4ee06ce07401d54241379","title":"","systemDataId":"1693355597171-FADQYUFBFWDCCQL4CM3Z","type":"JPEG","urls":{"http":"http://images.squarespace-cdn.com/content/v1/647e1982c1836a5f267634f1/1693355597171-FADQYUFBFWDCCQL4CM3Z/527004CF-620D-409A-B3B1-4E8453E19146.jpg","https":"https://images.squarespace-cdn.com/content/v1/647e1982c1836a5f267634f1/1693355597171-FADQYUFBFWDCCQL4CM3Z/527004CF-620D-409A-B3B1-4E8453E19146.jpg"},"originalSize":{"width":2500,"height":1407},"sizes":[{"width":2500,"height":1407},{"width":100},{"width":300},{"width":500},{"width":750},{"width":1000},{"width":1500},{"width":2500}],"focalPoint":{"x":0.550000011920929,"y":0.25},"url":"https://images.squarespace-cdn.com/content/v1/647e1982c1836a5f267634f1/1693355597171-FADQYUFBFWDCCQL4CM3Z/527004CF-620D-409A-B3B1-4E8453E19146.jpg"},"isSubscribable":false}],"shippingLocation":{},"fulfillmentOptions":[],"cartFulfillmentGroups":[],"discounts":[],"giftCards":[],"taxes":[],"subtotal":{"currencyCode":"GBP","value":77987,"decimalValue":"779.87","fractionalDigits":2},"shippingTotal":{"currencyCode":"GBP","value":0,"decimalValue":"0.00","fractionalDigits":2},"discountTotal":{"currencyCode":"GBP","value":0,"decimalValue":"0.00","fractionalDigits":2},"taxTotal":{"currencyCode":"GBP","value":0,"decimalValue":"0.00","fractionalDigits":2},"appliedGiftCardBalanceTotal":{"currencyCode":"GBP","value":0,"decimalValue":"0.00","fractionalDigits":2},"grandTotal":{"currencyCode":"GBP","value":77987,"decimalValue":"779.87","fractionalDigits":2},"amountDue":{"currencyCode":"GBP","value":77987,"decimalValue":"779.87","fractionalDigits":2},"cartType":1,"shouldBlockPurchaseForMinimumOrderAmount":false},"storeCurrency":"GBP","continueShoppingLinkUrl":"carts","minimumOrderSubtotal":{"currency":"GBP","value":"0.00"},"useCldrMode":false,"shopperLanguage":"en","afterpayEnabled":false,"afterpayMin":0,"afterpayMax":0,"klarnaEnabled":false,"klarnaMin":0,"klarnaMax":0,"cartExperiments":[],"formattingLocale":"en-GB","translationLocale":"en-US"}
              </script>
                          <div id="sqs-cart-container">
                            <div class="Y_NhSncIT7gifV2LfxUM uPZusL0pPdOXy8_xvSh2">
                              <div class="pEiUFzUTmJPR0hpbZR2f">
                                <h2 aria-label="Shopping Cart" class="cart-title css-1myfihz">Shopping Cart</h2>
                              </div>
                              <div class="iQhr6uGELxC_6U8elYjW cart-container" data-test="cart-container">
                                <div class="Dq5BG8b2l_T8egnyaLSS voVvenKSo_DKhY8An1bv cart-row"
                                  data-testid="cart-table-row">
                                  <div class="sLUkML39sJjG2ls1ZJ_n cart-row-img-wrapper">
                                    <div aria-label="AF1 07s image" class="I8wg0NKPpdo1rzntAr0W cart-row-img"
                                      data-testid="cart-row-img"
                                      style="background-image: url(&quot;https://images.squarespace-cdn.com/content/v1/647e1982c1836a5f267634f1/1693355597171-FADQYUFBFWDCCQL4CM3Z/527004CF-620D-409A-B3B1-4E8453E19146.jpg&quot;);">
                                    </div>
                                  </div>
                                  <div class="WKKxqitEdMaqAR4Ipxof voVvenKSo_DKhY8An1bv cart-row-desc"><a
                                      aria-label="AF1 07s" class="N2ZPU4U9RROTHW8GIAIz cart-row-title css-1i3v64c">AF1
                                      07s</a>
                                    <div class="kpb7NEJ8UYU2etMjNbbo cart-row-variants">
                                      <p aria-label="Size variant for AF1 07s" class="cart-row-variant css-1fiegal">
                                        Size: 6</p>
                                      <p aria-label="Color variant for AF1 07s" class="cart-row-variant css-1fiegal">
                                        Color: All-White</p>
                                    </div>
                                  </div>
                                  <div class="hqcsUKTwpq2YJCIFUHw_ cart-row-qty">
                                    <div class="RYpdqNmqSO7QoP8WuoSw"><button disabled="" display="inline-block"
                                        aria-label="decrement"
                                        class="F5EZKKe7ZGMVmuSsdUD6 v3CkqTmvSV9LQkmLRT7m cart-row-qty-dec css-263fn0"
                                        color="inherit"><span disabled="" class="css-1i6nwm"><svg fill="currentColor"
                                            height="22" viewBox="0 0 22 22" width="22"
                                            xmlns="http://www.w3.org/2000/svg" class="css-y880pu">
                                            <path clip-rule="evenodd" d="M3 10v2h16v-2H3z" fill-rule="evenodd"></path>
                                          </svg></span></button><input color="inherit" font-size="16px"
                                        font-family="inherit" aria-label="Quantity, AF1 07s"
                                        class="cart-row-qty-input css-14q1u6f" data-test="quantity-input" width="35px"
                                        value="1" fdprocessedid="zognda"><button display="inline-block"
                                        aria-label="increment"
                                        class="F5EZKKe7ZGMVmuSsdUD6 v3CkqTmvSV9LQkmLRT7m cart-row-qty-inc css-1m2r7lq"
                                        color="inherit" fdprocessedid="7zi0x"><span class="css-10aqytj"><svg
                                            fill="currentColor" height="22" viewBox="0 0 22 22" width="22"
                                            xmlns="http://www.w3.org/2000/svg" class="css-y880pu">
                                            <path d="M12 3h-2v7H3v2h7v7h2v-7h7v-2h-7V3z"></path>
                                          </svg></span></button></div>
                                  </div>
                                  <p aria-label="£59.99, total price for AF1 07s"
                                    class="S7AK9YkV4b18MmLpyNO0 cart-row-price css-1ginkfr">£59.99</p>
                                  <div class="kCzCJnfAmFqYclGeYsS2"><button display="inline-block"
                                      aria-label="Remove AF1 07s"
                                      class="bMcaVKwQGIWyUolpPgxf voVvenKSo_DKhY8An1bv cart-row-remove css-1tandlv"
                                      color="inherit" data-test="remove-item" fdprocessedid="h5eccs"><span
                                        class="css-10aqytj"><svg fill="currentColor" height="22" viewBox="0 0 22 22"
                                          width="22" xmlns="http://www.w3.org/2000/svg" class="css-y880pu">
                                          <path
                                            d="M11 9.586l5.293-5.293 1.414 1.414L12.414 11l5.293 5.293-1.414 1.414L11 12.414l-5.293 5.293-1.414-1.414L9.586 11 4.293 5.707l1.414-1.414L11 9.586z">
                                          </path>
                                        </svg></span></button></div>
                                </div>
                              </div>
                              <div class="css-3yq2a2">
                                <div class="_5LJfQ2ybj7G5VJM0sGL XGkGzhcUBmuQcd6x1s94 cart-summary">
                                  <div class="JZMABsonb1OixK1y2hd2 cart-subtotal">
                                    <p aria-label="Subtotal label"
                                      class="c01EsBinCBH0mihABVhb cart-subtotal-label css-s2domo"><span
                                        class="fs-unmask">Subtotal</span></p>
                                    <p aria-label="Subtotal price"
                                      class="FUTKAWbmtkofe8qW5J8l cart-subtotal-price css-1tacdd5">£59.99</p>
                                  </div>
                                  <div class="EV65JozFXk5OJ18ta82Q cart-checkout"><button aria-label="Checkout"
                                      class="iCMiqbYhwwVvL3lnXjBJ sqs-editable-button sqs-button-element--primary cart-checkout-button"
                                      data-test="cart-button" fdprocessedid="swy6rp">Checkout</button></div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                    </main>



                    <div class="sqs-add-to-cart-button-wrapper" data-animation-role="button"
                      style="visibility: visible; width: 76px; min-width: 11em;" id="yui_3_17_2_1_1735068562575_184">
                      <div class="sqs-add-to-cart-button sqs-suppress-edit-mode sqs-button-element--primary cart-added"
                        role="button" tabindex="0" data-dynamic-strings="" data-collection-id="647e44f2a876e82843a8dd55"
                        data-item-id="647e44f5e36579318109a303" data-product-type="1" data-use-custom-label="true"
                        data-original-label="ORDER" id="yui_3_17_2_1_1733703950054_109" fdprocessedid="8o63ad"
                        style="display: block;">
                        <div class="sqs-add-to-cart-button-inner"
                          style="transition: opacity 0.2s ease-out, visibility 0.2s ease-out, transform 0.2s ease-out; opacity: 1; visibility: visible; transform: scale(1);">
                          ORDER</div>
                      </div>
                    </div>







                    <div class="hidden-md-down" id="yui_3_17_2_1_1733703950054_120">
                    </div>



                  </div>

                  <script>/* -----  loading‑state helpers  ----- */
                    function startCartLoading() {
                      // show overlay spinner
                      document.getElementById('cartSpinner').style.display = 'block';

                      // disable every Add‑to‑Cart button
                      document.querySelectorAll('.buynow').forEach(btn => btn.disabled = true);
                    }

                    function stopCartLoading() {
                      document.getElementById('cartSpinner').style.display = 'none';
                      document.querySelectorAll('.buynow').forEach(btn => btn.disabled = false);
                    }
                  </script>

                </div>



              </div>
              <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                <style>
                  #contact button {
                    /* box-shadow: 5.15px 6.3px 0.58px 0px rgba(0, 0, 0, 0.25); */
                    width: 100%;
                    /* border: 1px solid #047098; */
                    font-weight: 400;
                    font-size: 13px;
                    background-color: #08aae7;
                    /* border: 1px solid #ddd; */
                    border-radius: 10px;
                    /* box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); */
                    /* overflow: hidden; */
                    background-color: #45ccf6;
                    font-family: "Press Start 2P";
                    color: white;
                    transition: box-shadow 0.1s ease-in-out, transform 0.1s ease-in-out;
                  }

                  /* Remove shadow on click */
                  #contact button:active {
                    box-shadow: none;
                    transform: translateY(2px);
                    /* Slightly move the button down for a pressed effect */
                  }


                  /* stages*/
                  .stage {
                    display: none;
                    text-align: left;
                  }

                  .stage.active {
                    display: block;
                  }

                  .navigation {
                    display: flex;
                    justify-content: space-between;
                    margin: 20px auto;
                    max-width: 400px;
                  }

                  .navigation button {
                    padding: 10px 20px;
                    font-size: 16px;
                    cursor: pointer;
                    border: none;
                    background-color: #007bff;
                    color: white;
                    border-radius: 4px;
                    transition: background-color 0.3s;
                  }

                  .navigation button:hover {
                    background-color: #0056b3;
                  }
                </style>
                <div>
                  <div id="stage1" class="stage active">
                    <div class="intro-section" id="introSection">
                      <div class="form-container">
                        <h3 class="content_heading1 deals-heading">Earn While You Shop: Join the ByForce Rewards Club
                        </h3>

                        <div class="login-container">
                          <div class="login-header">
                            <div class="padlock-container">
                              <div class="padlock-icon">🔒</div>
                              <div class="email-icon">📧</div>
                            </div>
                            <h2 class="capture-title">Welcome Back, Gamer!</h2>
                            <p class="capture-subtitle">Enter your email to access your dashboard</p>
                          </div>

                          <form id="emailForm" class="login-form"
                            onsubmit="event.preventDefault(); submitEmail(); return false;">
                            <div class="email-input-container">
                              <input type="email" id="emailInput" class="capture-email-input"
                                placeholder="Enter your email address" required="">
                              <button type="submit" class="nav-link" style="max-width: 500px !important;">Access
                                Dashboard</button>
                            </div>
                          </form>

                          <!-- Terminal Display (Hidden but functional) -->
                          <div id="terminal" onclick="getEl('emailInput').focus();" style="display: none;">
                            <div id="getter">
                              <span id="writer"></span><b class="cursor" id="cursor" style="left: 0px;">B</b>
                            </div>
                          </div>
                          <style>
                            #stage1 {
                              color: white !important;
                              padding-top: 20px;
                              font-family: "press start 2p";
                            }

                            body {
                              margin: 0px;
                              padding: 0px;
                              height: 99%;
                            }

                            input#emailInput {
                              /* Email input is now visible and styled properly */
                              position: relative;
                              left: auto;
                            }

                            .cursor {
                              font-size: 12px;
                              background-color: white;
                              color: white;
                              position: relative;
                              opacity: 10;
                              top: 5px;
                              height: .35em;
                              width: 18px;
                              max-width: 28px;
                              overflow: hidden;
                              text-indent: -5px;
                              display: inline-block;
                              text-decoration: blink;
                              animation: blinker 1s linear(0 0%, 0.71 3.08%) infinite;
                            }

                            #terminal {
                              margin: 8px;
                              cursor: text;
                              height: 50px;
                              overflow: auto;
                            }

                            #writer {
                              font-family: 'Press Start 2P';
                              font-weight: bold;
                              color: white;
                            }

                            #getter {
                              margin: 5px;
                            }

                            @keyframes blinker {
                              50% {
                                opacity: 0.0;
                              }
                            }
                          </style>
                          <script>
                            // Function to measure the width of a single character
                            function measureCharacterWidth() {
                              const writer = document.getElementById("writer");
                              // Create a temporary span element
                              const tempSpan = document.createElement("span");
                              tempSpan.style.visibility = "hidden"; // Make it invisible
                              tempSpan.style.whiteSpace = "pre"; // Preserve whitespace
                              tempSpan.style.fontFamily = window.getComputedStyle(writer).fontFamily; // Match writer font
                              tempSpan.style.fontSize = window.getComputedStyle(writer).fontSize; // Match writer font size
                              // Set the text to a single character
                              tempSpan.textContent = "a"; // Any character works since it's monospaced
                              document.body.appendChild(tempSpan); // Add to the DOM temporarily
                              // Measure the character width
                              const characterWidth = tempSpan.offsetWidth;
                              // Remove the temporary span
                              document.body.removeChild(tempSpan);
                              // Output the width
                              console.log("Single character width:", characterWidth);
                              return characterWidth; // Return the width if needed
                            }

                            // Call the function and store the result
                            const singleCharWidth = measureCharacterWidth();

                            // Rename the helper function from "$" to "getEl" to avoid conflict with jQuery
                            function getEl(elid) {
                              return document.getElementById(elid);
                            }

                            var cursor;
                            window.onload = init;

                            function init() {
                              cursor = getEl("cursor");
                              cursor.style.left = "0px";
                            }

                            function nl2br(txt) {
                              return txt.replace(/\n/g, "<br />");
                            }

                            function writeit(from, e) {
                              e = e || window.event;
                              var w = getEl("writer");
                              var tw = from.value;
                              w.innerHTML = nl2br(tw);
                            }

                            function moveIt(count, e) {
                              e = e || window.event;
                              var keycode = e.keyCode || e.which;
                              if (keycode == 37 && parseInt(cursor.style.left) >= (0 - ((count - 1) * singleCharWidth))) {
                                cursor.style.left = parseInt(cursor.style.left) - singleCharWidth + "px";
                              } else if (keycode == 39 && (parseInt(cursor.style.left) + singleCharWidth) <= 0) {
                                cursor.style.left = parseInt(cursor.style.left) + singleCharWidth + "px";
                              }
                            }

                            function alert(txt) {
                              console.log(txt);
                            }
                          </script>
                        </div>
                        <div class="rewards-subline"
                          style="margin: 20px 0; padding: 15px; background: rgba(54, 193, 245, 0.08); border-radius: 8px; border: 1px solid rgba(54, 193, 245, 0.2);">
                          <h6 class="content_heading4" style="margin: 0; text-align: center;">Stack points on every
                            purchase, redeem them for discounts, early drops, and exclusive bundles.</h6>
                        </div>

                        <div class="rewards-benefits" style="margin: 20px 0;">
                          <div class="benefit-item"
                            style="margin: 10px 0; padding: 10px; background: rgba(255, 255, 255, 0.03); border-radius: 6px;">
                            <h6 class="content_heading4" style="margin: 0;">Earn 1 point for every £1 spent.</h6>
                          </div>
                          <div class="benefit-item"
                            style="margin: 10px 0; padding: 10px; background: rgba(255, 255, 255, 0.03); border-radius: 6px;">
                            <h6 class="content_heading4" style="margin: 0;">Redeem points for instant savings at
                              checkout.</h6>
                          </div>
                          <div class="benefit-item"
                            style="margin: 10px 0; padding: 10px; background: rgba(255, 255, 255, 0.03); border-radius: 6px;">
                            <h6 class="content_heading4" style="margin: 0;">Unlock members-only limited release access
                              and perks.</h6>
                          </div>
                        </div>

                        <p id="errorMessage" class="error-message" style="display: none;">Email not valid</p>
                        <p id="errorMessageFetch" class="error-message" style="display: none;">Failed to fetch the
                          referral link. Please try again later.</p>

                        <!-- Beautiful Login Form - SHOP Page Style -->

                      </div>
                      <!-- Beautiful Code Verification Form - SHOP Page Style -->
                      <div id="codeForm" class="capture-stage d-flex flex-column align-items-center"
                        style="display: none;">
                        <p class="code-instruction">We've sent a 6-digit code to your email</p>
                        <div class="code-input-container">
                          <input type="text" maxlength="1" class="code-digit" data-index="0">
                          <input type="text" maxlength="1" class="code-digit" data-index="1">
                          <input type="text" maxlength="1" class="code-digit" data-index="2">
                          <input type="text" maxlength="1" class="code-digit" data-index="3">
                          <input type="text" maxlength="1" class="code-digit" data-index="4">
                          <input type="text" maxlength="1" class="code-digit" data-index="5">
                        </div>

                        <button class="capture-btn" style="color:black;" onclick="submitCode();">Verify</button>
                        <button class="capture-btn-secondary" onclick="resendCode();">Resend Code</button>
                      </div>
                      <style>
                        /* Beautiful Login Form Styles - Inline Design */
                        .login-container {
                          background: linear-gradient(135deg, rgba(54, 193, 245, 0.1) 0%, rgba(4, 112, 152, 0.1) 100%);
                          border: 2px solid rgba(54, 193, 245, 0.3);
                          border-radius: 20px;
                          padding: 40px;
                          margin: 20px 0;
                          backdrop-filter: blur(10px);
                          animation: slideUp 0.6s ease-out;
                        }

                        .login-header {
                          text-align: center;
                          margin-bottom: 30px;
                        }

                        .padlock-container {
                          display: flex;
                          align-items: center;
                          justify-content: center;
                          gap: 10px;
                          margin-bottom: 25px;
                          animation: bounce 0.6s ease-in-out;
                        }

                        .padlock-icon,
                        .email-icon {
                          font-size: 40px;
                          filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
                        }

                        .capture-title {
                          font-family: "Press Start 2P", system-ui;
                          font-size: 18px;
                          color: white;
                          margin: 0 0 10px 0;
                          text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
                        }

                        .capture-subtitle {
                          font-family: "Press Start 2P", system-ui;
                          font-size: 10px;
                          color: rgba(255, 255, 255, 0.8);
                          margin: 0;
                          line-height: 16px;
                        }

                        .email-input-container {
                          display: flex;
                          flex-direction: column;
                          gap: 15px;
                          align-items: center;
                        }

                        .email-input-container .nav-link {
                          width: auto;
                          align-self: center;
                        }

                        .capture-email-input {
                          width: 100%;
                          max-width: 500px;
                          padding: 15px;
                          border: 4px solid rgb(197, 197, 197);
                          border-radius: 12px;
                          font-size: 14px;
                          font-family: "Press Start 2P", system-ui;
                          background: white;
                          color: black;
                          text-align: center;
                          backdrop-filter: blur(10px);
                        }

                        .capture-email-input::placeholder {
                          color: rgb(100, 100, 100);
                          font-size: 10px;
                        }

                        .capture-email-input:focus {
                          outline: none;
                          border-color: #36c1f5;
                          background: rgba(255, 255, 255, 0.15);
                          transform: translateY(-2px);
                          box-shadow: 0 8px 25px rgba(54, 193, 245, 0.3);
                        }



                        .capture-btn {
                          font-family: 'Press Start 2P', system-ui, sans-serif;
                          font-size: 11px;
                          padding: 15px 40px;
                          background: linear-gradient(180deg, #fff, #f0f0f0);
                          color: #333;
                          border: 3px solid #ddd;
                          border-radius: 10px;
                          cursor: pointer;
                          transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                          box-shadow:
                            0 6px 0 #bbb,
                            0 10px 25px rgba(0, 0, 0, 0.2),
                            inset 0 1px 0 rgba(255, 255, 255, 1);
                          position: relative;
                          overflow: hidden;
                          animation: tutorialBtnPulse 2s ease-in-out infinite;
                          width: 100%;
                          max-width: 350px;
                        }

                        .capture-btn::before {
                          content: '';
                          position: absolute;
                          top: 0;
                          left: -100%;
                          width: 100%;
                          height: 100%;
                          background: linear-gradient(90deg, transparent, rgba(91, 200, 200, 0.3), transparent);
                          transition: left 0.5s ease;
                        }

                        .capture-btn:hover::before {
                          left: 100%;
                        }

                        .capture-btn:hover {
                          transform: translateY(-5px) scale(1.05);
                          box-shadow:
                            0 12px 0 #bbb,
                            0 18px 35px rgba(0, 0, 0, 0.25),
                            0 0 30px rgba(91, 200, 200, 0.4);
                          color: #222;
                          background: linear-gradient(180deg, #fff 0%, #fff 50%, #f0f0f0 100%);
                        }

                        .capture-btn:active {
                          transform: translateY(4px) scale(0.98);
                          box-shadow: 0 2px 0 #bbb;
                        }

                        .capture-btn:focus {
                          outline: none;
                          box-shadow: 0 6px 0 #bbb, 0 10px 25px rgba(0, 0, 0, 0.2), 0 0 0 3px rgba(91, 200, 200, 0.2);
                        }

                        /* Professional 8-bit animations */
                        @keyframes subtleGlow {

                          0%,
                          100% {
                            box-shadow: 0 6px 20px rgba(54, 193, 245, 0.4);
                          }

                          50% {
                            box-shadow: 0 6px 25px rgba(54, 193, 245, 0.5), 0 0 15px rgba(54, 193, 245, 0.3);
                          }
                        }

                        @keyframes scanLine {
                          0% {
                            left: -100%;
                            opacity: 0;
                          }

                          50% {
                            opacity: 1;
                          }

                          100% {
                            left: 100%;
                            opacity: 0;
                          }
                        }

                        @keyframes digitalPress {
                          0% {
                            transform: translateY(0) scale(1);
                          }

                          50% {
                            transform: translateY(0) scale(0.98);
                          }

                          100% {
                            transform: translateY(0) scale(1);
                          }
                        }



                        .capture-btn-secondary {
                          background: transparent;
                          color: #36c1f5;
                          border: 2px solid #36c1f5;
                          padding: 12px 24px;
                          border-radius: 8px;
                          font-family: "Press Start 2P", system-ui;
                          font-size: 10px;
                          cursor: pointer;
                          transition: all 0.3s ease;
                          margin-top: 12px;
                          width: 100%;
                          max-width: 350px;
                          box-shadow: 0 2px 8px rgba(54, 193, 245, 0.2);
                          text-transform: uppercase;
                          letter-spacing: 0.5px;
                          position: relative;
                          overflow: hidden;
                        }

                        /* Professional 8-bit border pulse */
                        .capture-btn-secondary::before {
                          content: '';
                          position: absolute;
                          top: -2px;
                          left: -2px;
                          right: -2px;
                          bottom: -2px;
                          background: linear-gradient(45deg, #36c1f5, transparent, #36c1f5);
                          z-index: -1;
                          opacity: 0;
                          transition: opacity 0.3s ease;
                          border-radius: 8px;
                        }

                        .capture-btn-secondary:hover {
                          background: #36c1f5;
                          color: white;
                          transform: translateY(-1px);
                          box-shadow: 0 4px 12px rgba(54, 193, 245, 0.3);
                          animation: borderPulse 1.5s ease-in-out infinite;
                        }

                        .capture-btn-secondary:hover::before {
                          opacity: 0.3;
                          animation: borderGlow 2s linear infinite;
                        }

                        .capture-btn-secondary:active {
                          transform: translateY(0);
                          box-shadow: 0 1px 4px rgba(54, 193, 245, 0.2);
                          animation: digitalPress 0.1s ease-out;
                        }

                        /* Professional 8-bit secondary animations */
                        @keyframes borderPulse {

                          0%,
                          100% {
                            box-shadow: 0 4px 12px rgba(54, 193, 245, 0.3);
                          }

                          50% {
                            box-shadow: 0 4px 15px rgba(54, 193, 245, 0.4), 0 0 10px rgba(54, 193, 245, 0.2);
                          }
                        }

                        @keyframes borderGlow {
                          0% {
                            transform: rotate(0deg);
                          }

                          100% {
                            transform: rotate(360deg);
                          }
                        }

                        .code-instruction {
                          font-size: 10px;
                          color: #36c1f5;
                          /* Theme color */
                          margin-bottom: 20px;
                          line-height: 16px;
                          font-family: "Press Start 2P", system-ui;
                          text-align: center;
                          text-transform: uppercase;
                          letter-spacing: 0.5px;
                          text-shadow: 2px 2px 0px #000000;
                          /* 8-bit text shadow */
                        }

                        .code-input-container {
                          display: flex;
                          justify-content: center;
                          gap: 12px;
                          /* Slightly more gap for 8-bit spacing */
                          margin-bottom: 20px;
                          padding: 15px;
                          background: rgba(54, 193, 245, 0.05);
                          /* Subtle theme background */
                          border: 2px solid rgba(54, 193, 245, 0.2);
                          /* Theme border */
                          border-radius: 0;
                          /* Sharp edges */
                          box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
                          /* Inner shadow */
                        }

                        .code-digit {
                          width: 45px;
                          height: 45px;
                          border: 3px solid #000000;
                          /* Black pixel border - 8-bit style */
                          border-radius: 0;
                          /* Sharp edges - no rounded corners */
                          background: #36c1f5;
                          /* Theme color background */
                          color: white;
                          font-family: "Press Start 2P", system-ui;
                          font-size: 18px;
                          text-align: center;
                          transition: none;
                          /* No smooth transitions - pure 8-bit */
                          position: relative;
                          overflow: hidden;
                          box-shadow: 3px 3px 0px #000000;
                          /* Pixel shadow */
                        }

                        .code-digit:focus {
                          outline: none;
                          border-color: #047098;
                          /* Theme color border on focus */
                          background: #47d1ff;
                          /* Brighter theme color */
                          box-shadow: 5px 5px 0px #000000;
                          /* Enhanced pixel shadow */
                          transform: translateY(-2px);
                          animation: digitGlow 1s ease-in-out infinite;
                        }

                        /* 8-bit scan line effect for code digits */
                        .code-digit::before {
                          content: '';
                          position: absolute;
                          top: 0;
                          left: -100%;
                          width: 100%;
                          height: 1px;
                          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);
                          transition: all 0.3s ease;
                        }

                        .code-digit:focus::before {
                          left: 100%;
                          animation: digitScan 1s ease-in-out infinite;
                        }

                        /* 8-bit animations for code digits */
                        @keyframes digitGlow {

                          0%,
                          100% {
                            box-shadow: 5px 5px 0px #000000;
                          }

                          50% {
                            box-shadow: 5px 5px 0px #000000, 0 0 10px #36c1f5;
                          }
                        }

                        @keyframes digitScan {
                          0% {
                            left: -100%;
                            opacity: 0;
                          }

                          50% {
                            opacity: 1;
                          }

                          100% {
                            left: 100%;
                            opacity: 0;
                          }
                        }

                        @keyframes fadeIn {
                          from {
                            opacity: 0;
                          }

                          to {
                            opacity: 1;
                          }
                        }

                        @keyframes slideUp {
                          from {
                            opacity: 0;
                            transform: translateY(50px) scale(0.9);
                          }

                          to {
                            opacity: 1;
                            transform: translateY(0) scale(1);
                          }
                        }

                        @keyframes bounce {

                          0%,
                          20%,
                          50%,
                          80%,
                          100% {
                            transform: translateY(0);
                          }

                          40% {
                            transform: translateY(-10px);
                          }

                          60% {
                            transform: translateY(-5px);
                          }
                        }


                        /* Beautiful Code Verification Form Styles */
                        .code-form {
                          background: linear-gradient(135deg, rgba(54, 193, 245, 0.1) 0%, rgba(4, 112, 152, 0.1) 100%);
                          border: 2px solid rgba(54, 193, 245, 0.3);
                          border-radius: 20px;
                          padding: 40px;
                          margin: 20px 0;
                          backdrop-filter: blur(10px);
                          animation: slideUp 0.6s ease-out;
                        }

                        .code-header {
                          text-align: center;
                          margin-bottom: 30px;
                        }

                        .code-icon {
                          font-size: 48px;
                          margin-bottom: 15px;
                          animation: pulse 2s infinite;
                        }

                        .code-title {
                          font-family: "Press Start 2P", system-ui;
                          font-size: 18px;
                          color: white;
                          margin: 0 0 10px 0;
                          text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
                        }

                        .code-subtitle {
                          font-family: "Press Start 2P", system-ui;
                          font-size: 10px;
                          color: rgba(255, 255, 255, 0.8);
                          margin: 0;
                          line-height: 16px;
                        }

                        .code-form-inner {
                          display: flex;
                          flex-direction: column;
                          gap: 25px;
                          align-items: center;
                        }

                        .code-input-container {
                          display: flex;
                          justify-content: center;
                          gap: 15px;
                          margin-bottom: 20px;
                        }

                        .code-digit {
                          width: 50px;
                          height: 60px;
                          font-size: 24px;
                          text-align: center;
                          background: rgba(255, 255, 255, 0.1);
                          border: 2px solid rgba(54, 193, 245, 0.5);
                          border-radius: 12px;
                          color: white;
                          font-family: 'Press Start 2P', monospace;
                          transition: all 0.3s ease;
                          backdrop-filter: blur(10px);
                        }

                        .code-digit:focus {
                          outline: none;
                          border-color: #36c1f5;
                          background: rgba(255, 255, 255, 0.2);
                          transform: translateY(-3px) scale(1.05);
                          box-shadow: 0 8px 25px rgba(54, 193, 245, 0.4);
                        }

                        .code-digit:valid {
                          border-color: #2ed573;
                          background: rgba(46, 213, 115, 0.2);
                        }

                        .verify-btn {
                          background: linear-gradient(135deg, #2ed573 0%, #1e90ff 100%);
                          border: none;
                          padding: 18px 30px;
                          border-radius: 12px;
                          color: white;
                          font-family: "Press Start 2P", system-ui;
                          font-size: 12px;
                          cursor: pointer;
                          transition: all 0.3s ease;
                          display: flex;
                          align-items: center;
                          justify-content: center;
                          gap: 10px;
                          box-shadow: 0 4px 15px rgba(46, 213, 115, 0.3);
                          position: relative;
                          overflow: hidden;
                        }

                        .verify-btn::before {
                          content: '';
                          position: absolute;
                          top: 0;
                          left: -100%;
                          width: 100%;
                          height: 100%;
                          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                          transition: left 0.5s ease;
                        }

                        .verify-btn:hover::before {
                          left: 100%;
                        }

                        .verify-btn:hover {
                          transform: translateY(-3px);
                          box-shadow: 0 8px 25px rgba(46, 213, 115, 0.5);
                        }

                        .verify-btn:active {
                          transform: translateY(-1px);
                        }

                        /* Animations */
                        @keyframes slideUp {
                          from {
                            opacity: 0;
                            transform: translateY(30px) scale(0.9);
                          }

                          to {
                            opacity: 1;
                            transform: translateY(0) scale(1);
                          }
                        }

                        @keyframes bounce {

                          0%,
                          20%,
                          50%,
                          80%,
                          100% {
                            transform: translateY(0);
                          }

                          40% {
                            transform: translateY(-10px);
                          }

                          60% {
                            transform: translateY(-5px);
                          }
                        }

                        @keyframes pulse {
                          0% {
                            box-shadow: 0 0 0 0 rgba(54, 193, 245, 0.7);
                          }

                          70% {
                            box-shadow: 0 0 0 10px rgba(54, 193, 245, 0);
                          }

                          100% {
                            box-shadow: 0 0 0 0 rgba(54, 193, 245, 0);
                          }
                        }

                        /* Responsive Design */
                        @media (max-width: 768px) {

                          .login-container,
                          .code-form {
                            padding: 30px 20px;
                            margin: 15px 0;
                          }

                          .login-title,
                          .code-title {
                            font-size: 16px;
                          }

                          .login-subtitle,
                          .code-subtitle {
                            font-size: 9px;
                          }

                          .code-digit {
                            width: 45px;
                            height: 55px;
                            font-size: 20px;
                          }

                          .code-input-container {
                            gap: 12px;
                          }
                        }
                      </style>
                      <script>
                        // Attach event listeners for auto-advance and auto-submit on the six-digit inputs.
                        window.addEventListener("load", function () {
                          const codeInputs = document.querySelectorAll(".code-digit");
                          codeInputs.forEach((input, index) => {
                            // On input, allow only digits and auto-advance.
                            input.addEventListener("input", function (e) {
                              this.value = this.value.replace(/\D/g, ""); // Allow only digits.
                              if (this.value.length === 1 && index < codeInputs.length - 1) {
                                codeInputs[index + 1].focus();
                              }
                              checkAndSubmitCode();
                            });
                            // On backspace, if empty, move focus to previous input.
                            input.addEventListener("keydown", function (e) {
                              if (e.key === "Backspace" && this.value === "" && index > 0) {
                                codeInputs[index - 1].focus();
                              }
                            });
                          });
                        });

                        // Helper: Combine the six-digit inputs into one string.
                        function getCodeFromDigits() {
                          const codeInputs = document.querySelectorAll(".code-digit");
                          let code = "";
                          codeInputs.forEach(input => {
                            code += input.value;
                          });
                          return code;
                        }

                        // Check if all 6 digits are filled, update the hidden input.
                        function checkAndSubmitCode() {
                          const code = getCodeFromDigits();
                          // Update the hidden input.
                          getEl("codeInput").value = code;
                          // Removed auto-submit to prevent code fields from clearing
                        }

                        // Optional: When the container is clicked, focus the first empty digit.
                        function focusCodeInput() {
                          const codeInputs = document.querySelectorAll(".code-digit");
                          for (let input of codeInputs) {
                            if (input.value === "") {
                              input.focus();
                              return;
                            }
                          }
                          codeInputs[codeInputs.length - 1].focus();
                        }

                        // Helper function getEl is assumed to be globally defined (if not, define it here once)
                        function getEl(elid) {
                          return document.getElementById(elid);
                        }
                      </script>
                    </div>

                  </div>
                </div>
                <div id="stage2" class="stage">
                  <div id="explainer">

                  </div>
                  <button id="completeStage2Btn">Complete Stage2</button>
                  <script>
                    // Helper function to retrieve the login session email (example)
                    function getLoginSession() {
                      const cookies = document.cookie.split('; ');
                      const sessionCookie = cookies.find((row) => row.startsWith('loginSession='));
                      return sessionCookie ? decodeURIComponent(sessionCookie.split('=')[1]) : null;
                    }

                    // Add an event listener on the button to send the API request when clicked
                    document.getElementById('completeStage2Btn').addEventListener('click', function () {
                      const email = getLoginSession();
                      if (!email) {
                        alert('No logged‑in user found.');
                        return;
                      }

                      // Prepare the payload with the email
                      const payload = { email: email };

                      // Send POST request to the /complete_stage2 endpoint
                      fetch('https://yourdomain.com/complete_stage2', {
                        method: 'POST',
                        headers: {
                          'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(payload)
                      })
                        .then(response => response.json())
                        .then(data => {
                          if (data.status === 'success') {
                            alert('Stage2 completed successfully!');
                            // Optionally update the UI to show the stage has been completed.
                          } else {
                            alert('Error updating Stage2: ' + data.message);
                          }
                        })
                        .catch(error => {
                          console.error('Error:', error);
                          alert('An error occurred while updating Stage2.');
                        });
                    });

                  </script>

                  <script>
                    function moveToNextStage(nextStageId) {
                      // Hide all stages
                      document.querySelectorAll('.onboarding').forEach(stage => {
                        stage.classList.remove('active');
                      });

                      // Show the next stage
                      const nextStage = document.getElementById(`tier${nextStageId}`);
                      if (nextStage) {
                        nextStage.classList.add('active');
                      }
                    }

                    function submitEmail() {
                      const email = document.getElementById('emailInput').value;

                      fetch('https://rxid.co.uk/generate_login_code', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email }),
                      })
                        .then((response) => response.json())
                        .then((data) => {
                          if (data.status === 'success') {
                            alert(data.message);
                            document.getElementById('emailForm').style.display = 'none';
                            document.getElementById('codeForm').style.display = 'block';
                          } else {
                            alert(data.message);
                          }
                        })
                        .catch((error) => {
                          console.error('Error:', error);
                          alert('An error occurred.');
                        });
                    }

                    function submitCode() {
                      const email = document.getElementById('emailInput').value;
                      const code = getCodeFromDigits();

                      // Validate email and code
                      if (!email || !email.trim()) {
                        alert('Email is required!');
                        return;
                      }

                      if (!code || code.length !== 6) {
                        alert('Please enter the complete 6-digit code!');
                        return;
                      }

                      fetch('https://rxid.co.uk/verify_login_code', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email, code }),
                      })
                        .then((response) => response.json())
                        .then((data) => {
                          if (data.status === 'success') {
                            alert(data.message);
                            currentStage = 3;
                            showStage(currentStage);
                            // Redirect or show the logged-in UI
                            window.fetchUserData(email);
                          } else {
                            alert(data.message);
                            // Don't clear the code fields on error
                          }
                        })
                        .catch((error) => {
                          console.error('Error:', error);
                          alert('An error occurred.');
                          // Don't clear the code fields on error
                        });
                    }

                    function resendCode() {
                      const email = document.getElementById('emailInput').value;

                      fetch('https://rxid.co.uk/generate_login_code', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email }),
                      })
                        .then((response) => response.json())
                        .then((data) => {
                          if (data.status === 'success') {
                            alert('New code sent to your email!');
                          } else {
                            alert(data.message);
                          }
                        })
                        .catch((error) => {
                          console.error('Error:', error);
                          alert('An error occurred while resending code.');
                        });
                    }





                  </script>
                  <style>
                    .threshold-stage {
                      display: none;
                    }

                    .threshold-stage.active {
                      display: block;
                    }
                  </style>

                </div>
                <div id="stage3" class="stage">
                  <div class="rewards_page">

                    <!-- Beautiful Dashboard Header -->
                    <div class="dashboard-header">
                      <div class="dashboard-welcome">
                        <div class="welcome-icon">🎉</div>
                        <div class="welcome-text">
                          <h2 class="welcome-title">Welcome back, <span id="user-name" class="user-name">Gamer</span>!
                          </h2>
                          <p class="welcome-subtitle">Your gaming dashboard is ready</p>
                        </div>
                        <button id="logoutBtn" class="logout-button">
                          <span class="logout-icon">🚪</span>
                          <span class="logout-text">Log Out</span>
                        </button>
                      </div>
                    </div>

                    <!-- Enhanced Stats Section -->
                    <div class="dashboard-stats" id="referral_section">
                      <div class="stats-grid">
                        <div class="stat-card referrals-card">
                          <div class="stat-icon">👥</div>
                          <div class="stat-content">
                            <h3 class="stat-title">Total Referrals</h3>
                            <p class="stat-value"><span id="user-referral-count">0</span></p>
                          </div>
                        </div>

                        <div class="stat-card balance-card">
                          <div class="stat-icon">💰</div>
                          <div class="stat-content">
                            <h3 class="stat-title">Current Balance</h3>
                            <p class="stat-value"><span id="user-balance">£0.00</span></p>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="action_buttons">
                      <div class="share_section">

                        <div>
                          <button class="open-share-section" type="button">GET REFERRALS</button>
                        </div>
                        <div class="dropdown" id="dropdown">
                          <!-- The draggable track -->
                          <div class="share-carousel-track" id="carouselTrack">
                            <a id="smsLink" class="btn-social btn-sms" href="#"><button>sms</button></a>
                            <a id="snapchatLink" class="btn-social btn-snapchat" href="#"><button
                                style="background-color: 	#fffc00 !important; color:	#020202;">snapchat</button></a>
                            <a id="whatsappLink" class="btn-social btn-whatsapp" href="#"><button
                                style="background-color: #25D366 !important;">whatsapp</button></a>
                            <a id="facebookLink" class="btn-social btn-facebook" href="#"><button
                                style="background-color: 	#1877F2 !important;">facebook</button></a>
                            <a id="copyLink" class="btn-social copy-link" href="#" onclick="copyReferralLink()">
                              <button>copy</button>
                            </a>
                          </div>
                        </div>

                        <style>
                          /* Enhanced Dashboard Styles */
                          .dashboard-header {
                            background: linear-gradient(135deg, rgba(54, 193, 245, 0.1) 0%, rgba(4, 112, 152, 0.1) 100%);
                            border: 2px solid rgba(54, 193, 245, 0.3);
                            border-radius: 20px;
                            padding: 30px;
                            margin-bottom: 30px;
                            backdrop-filter: blur(10px);
                            animation: slideUp 0.6s ease-out;
                          }

                          .dashboard-welcome {
                            display: flex;
                            align-items: center;
                            justify-content: space-between;
                            gap: 20px;
                          }

                          .welcome-icon {
                            font-size: 48px;
                            animation: bounce 2s infinite;
                          }

                          .welcome-text {
                            flex: 1;
                          }

                          .welcome-title {
                            font-family: "Press Start 2P", system-ui;
                            font-size: 18px;
                            color: white;
                            margin: 0 0 8px 0;
                            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
                          }

                          .welcome-subtitle {
                            font-family: "Press Start 2P", system-ui;
                            font-size: 10px;
                            color: rgba(255, 255, 255, 0.8);
                            margin: 0;
                            line-height: 16px;
                          }

                          .user-name {
                            color: #36c1f5;
                            text-shadow: 0 0 10px rgba(54, 193, 245, 0.5);
                          }

                          .logout-button {
                            background: #36c1f5;
                            /* Solid theme color - same as other buttons */
                            border: 3px solid #000000;
                            /* Black pixel border */
                            color: white;
                            font-family: 'Press Start 2P', sans-serif;
                            padding: 15px 25px;
                            cursor: pointer;
                            border-radius: 0;
                            /* Sharp 8-bit edges */
                            transition: none;
                            /* No smooth transitions */
                            display: flex;
                            align-items: center;
                            gap: 8px;
                            box-shadow: 5px 5px 0px #000000;
                            /* Bold pixel shadow */
                            position: relative;
                            overflow: hidden;
                            text-transform: uppercase;
                            letter-spacing: 0.5px;
                          }

                          /* 8-bit scan line effect for logout button */
                          .logout-button::before {
                            content: '';
                            position: absolute;
                            top: 0;
                            left: -100%;
                            width: 100%;
                            height: 1px;
                            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
                            transition: all 0.3s ease;
                          }

                          /* 8-bit pixel shimmer for logout button */
                          .logout-button::after {
                            content: '';
                            position: absolute;
                            top: 0;
                            left: 0;
                            right: 0;
                            bottom: 0;
                            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
                            transform: translateX(-100%);
                            transition: transform 0.6s ease;
                          }

                          .logout-button:hover {
                            background: #47d1ff;
                            /* Brighter on hover */
                            transform: translateY(-2px);
                            box-shadow: 8px 8px 0px #000000;
                            /* Enhanced pixel shadow */
                            animation: subtleGlow 2s ease-in-out infinite;
                          }

                          .logout-button:hover::before {
                            left: 100%;
                            animation: scanLine 1.5s ease-in-out infinite;
                          }

                          .logout-button:hover::after {
                            transform: translateX(100%);
                          }

                          .logout-button:active {
                            transform: translateY(2px);
                            box-shadow: 2px 2px 0px #000000;
                            animation: digitalPress 0.1s ease-out;
                          }

                          .logout-icon {
                            font-size: 16px;
                          }

                          .logout-text {
                            font-size: 10px;
                            font-weight: bold;
                          }

                          /* Dashboard Stats */
                          .dashboard-stats {
                            margin-bottom: 30px;
                          }

                          .stats-grid {
                            display: grid;
                            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                            gap: 20px;
                          }

                          .stat-card {
                            background: linear-gradient(135deg, rgba(54, 193, 245, 0.1) 0%, rgba(4, 112, 152, 0.1) 100%);
                            border: 2px solid rgba(54, 193, 245, 0.3);
                            border-radius: 16px;
                            padding: 25px;
                            backdrop-filter: blur(10px);
                            transition: all 0.3s ease;
                            display: flex;
                            align-items: center;
                            gap: 20px;
                          }

                          .stat-card:hover {
                            transform: translateY(-3px);
                            border-color: rgba(54, 193, 245, 0.6);
                            box-shadow: 0 8px 25px rgba(54, 193, 245, 0.2);
                          }

                          .stat-icon {
                            font-size: 36px;
                            animation: pulse 2s infinite;
                          }

                          .stat-content {
                            flex: 1;
                          }

                          .stat-title {
                            font-family: "Press Start 2P", system-ui;
                            font-size: 10px;
                            color: rgba(255, 255, 255, 0.8);
                            margin: 0 0 8px 0;
                            text-transform: uppercase;
                            letter-spacing: 1px;
                          }

                          .stat-value {
                            font-family: "Press Start 2P", system-ui;
                            font-size: 16px;
                            color: white;
                            margin: 0;
                            font-weight: bold;
                            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
                          }

                          .referrals-card {
                            border-color: rgba(46, 213, 115, 0.3);
                          }

                          .referrals-card:hover {
                            border-color: rgba(46, 213, 115, 0.6);
                            box-shadow: 0 8px 25px rgba(46, 213, 115, 0.2);
                          }

                          .balance-card {
                            border-color: rgba(255, 215, 0, 0.3);
                          }

                          .balance-card:hover {
                            border-color: rgba(255, 215, 0, 0.6);
                            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.2);
                          }

                          /* Responsive Dashboard */
                          @media (max-width: 768px) {
                            .dashboard-welcome {
                              flex-direction: column;
                              text-align: center;
                              gap: 15px;
                            }

                            .welcome-title {
                              font-size: 16px;
                            }

                            .welcome-subtitle {
                              font-size: 9px;
                            }

                            .logout-button {
                              padding: 12px 20px;
                            }

                            .stats-grid {
                              grid-template-columns: 1fr;
                              gap: 15px;
                            }

                            .stat-card {
                              padding: 20px;
                            }

                            .stat-title {
                              font-size: 9px;
                            }

                            .stat-value {
                              font-size: 14px;
                            }
                          }


                          .open-share-section {
                            padding: 5px 30px;

                          }


                          .share-carousel-track {

                            display: flex;
                            gap: 20px;
                            will-change: transform;
                            /* helps performance */
                            /* No default transition here, since we do custom animation with JS */
                          }

                          .dropdown {


                            /* For the vertical slide-down effect: */
                            max-height: 0;
                            /* Start collapsed */
                            overflow-y: clip;
                            /* Hide content until expanded */
                            margin-top: 0px;
                            padding-bottom: 0px;
                            transition: max-height 0.4s ease, padding-bottom 0.4s ease, margin-top 0.8s ease;
                            /* Smooth opening animation */
                          }

                          /* When we add .show class via JS, it expands to some large height */
                          .dropdown.show {
                            max-height: 500px;
                            /* or however tall your content typically is */
                            padding-bottom: 10px;
                            margin-top: 20px;

                          }

                          .share-carousel-track button {
                            cursor: pointer;
                            padding: 8px 16px;
                          }
                        </style>

                        <script>
                          document.addEventListener("DOMContentLoaded", function () {
                            // 1) Elements
                            const openShareBtn = document.querySelector(".open-share-section");
                            const container = document.querySelector(".share_section");
                            const carouselTrack = document.getElementById("carouselTrack");
                            const dropdown = document.getElementById("dropdown");

                            // 2) Toggle show/hide on button click
                            openShareBtn.addEventListener("click", function () {
                              // Toggle the .show class => triggers the max-height CSS transition
                              dropdown.classList.toggle("show");
                            });

                            // Drag state
                            let isDragging = false;
                            let startPosition = 0;       // X where the user first started dragging
                            let currentTranslate = 0;    // Current translateX
                            let previousTranslate = 0;   // TranslateX at drag start
                            let maxTranslate = 0;        // Negative if track is wider, else 0

                            // For inertia
                            let velocity = 0;           // px/ms
                            let lastTimestamp = 0;      // last time (ms) we got a move event
                            let inertiaFrame;           // store requestAnimationFrame ID for inertia

                            /**
                             * Calculate how far left we can scroll. If track is narrower than container,
                             * maxTranslate = 0 (no scrolling). If wider, it's containerWidth - trackWidth (a negative number).
                             */
                            function updateMaxTranslate() {
                              const trackWidth = carouselTrack.scrollWidth;
                              const containerWidth = container.offsetWidth;
                              maxTranslate = Math.min(0, containerWidth - trackWidth);
                            }

                            /**
                             * Get the X position from a mouse or touch event.
                             */
                            function getPositionX(e) {
                              return e.type.includes("mouse") ? e.pageX : e.touches[0].clientX;
                            }

                            /**
                             * handleStart: user begins dragging (mousedown / touchstart).
                             */
                            function handleStart(e) {
                              isDragging = true;
                              startPosition = getPositionX(e);
                              previousTranslate = currentTranslate;

                              // Cancel any inertia if user re-grabs
                              cancelAnimationFrame(inertiaFrame);
                              velocity = 0;
                              lastTimestamp = performance.now();

                              // Turn off pointer events so we don't accidentally click a button
                              carouselTrack.style.pointerEvents = "none";
                            }

                            /**
                             * handleMove: user drags (mousemove / touchmove).
                             */
                            function handleMove(e) {
                              if (!isDragging) return;

                              const currentPosition = getPositionX(e);
                              const diff = currentPosition - startPosition;

                              // Compute velocity: distance over time
                              const now = performance.now();
                              const deltaTime = now - lastTimestamp;
                              const deltaDistance = diff - (currentTranslate - previousTranslate);
                              velocity = deltaDistance / deltaTime; // px/ms
                              lastTimestamp = now;

                              // Update currentTranslate based on the user’s drag
                              currentTranslate = previousTranslate + diff;

                              // ----- OVERSCROLL / RUBBER BAND LOGIC -----
                              // If we go beyond the left edge (currentTranslate > 0), let it overshoot but partially
                              if (currentTranslate > 0) {
                                // scale down overshoot so it feels rubber-banded
                                currentTranslate = currentTranslate * 0.3;
                              }
                              // If we go beyond the right edge (currentTranslate < maxTranslate), also let it partially overshoot
                              else if (currentTranslate < maxTranslate) {
                                const overshoot = currentTranslate - maxTranslate;
                                currentTranslate = maxTranslate + overshoot * 0.3;
                              }
                              // ------------------------------------------

                              carouselTrack.style.transform = `translateX(${currentTranslate}px)`;
                            }

                            /**
                             * handleEnd: user releases (mouseup / touchend) => start inertia/bounce.
                             */
                            function handleEnd(e) {
                              isDragging = false;
                              carouselTrack.style.pointerEvents = "";

                              // Start the inertia & bounce animation
                              startInertiaScroll();
                            }

                            /**
                             * Inertia with bounce effect.
                             * We'll keep applying velocity each frame, but if we cross an edge
                             * we "bounce" by reversing velocity with a bounce factor.
                             */
                            function startInertiaScroll() {
                              // friction factor for "slowing down" over time
                              let friction = 0.001;
                              let bounceFactor = 0.01; // how bouncy the edges are

                              let lastTime = 0;

                              function inertiaStep(timestamp) {
                                if (!lastTime) lastTime = timestamp;
                                let dt = timestamp - lastTime; // ms since last frame
                                lastTime = timestamp;

                                // Move the track based on current velocity
                                currentTranslate += velocity * dt;

                                // Decelerate velocity (simple linear friction)
                                let deceleration = friction * dt * (velocity > 0 ? 1 : -1);
                                velocity -= deceleration;

                                // Check boundaries for bounce
                                if (currentTranslate > 0) {
                                  currentTranslate = 0;
                                  velocity = -velocity * bounceFactor;
                                }
                                else if (currentTranslate < maxTranslate) {
                                  currentTranslate = maxTranslate;
                                  velocity = -velocity * bounceFactor;
                                }

                                // Apply the new transform
                                carouselTrack.style.transform = `translateX(${currentTranslate}px)`;

                                // Continue animating if velocity is still significant or we are still bouncing
                                // (If you want multiple bounces, keep going until velocity is nearly zero).
                                if (Math.abs(velocity) > 0.02) {
                                  inertiaFrame = requestAnimationFrame(inertiaStep);
                                } else {
                                  // End. Reset velocity/time so next drag starts fresh.
                                  velocity = 0;
                                  lastTime = 0;
                                }
                              }

                              inertiaFrame = requestAnimationFrame(inertiaStep);
                            }

                            /**
                             * If the user drags out of the track area (mouse leaves),
                             * we treat it like they ended the drag.
                             */
                            function handleLeave() {
                              if (isDragging) handleEnd();
                            }

                            // ---- Event Listeners ----
                            carouselTrack.addEventListener("mousedown", handleStart);
                            carouselTrack.addEventListener("mousemove", handleMove);
                            carouselTrack.addEventListener("mouseup", handleEnd);
                            carouselTrack.addEventListener("mouseleave", handleLeave);

                            carouselTrack.addEventListener("touchstart", handleStart);
                            carouselTrack.addEventListener("touchmove", handleMove);
                            carouselTrack.addEventListener("touchend", handleEnd);

                            // On resize, recalc our boundaries
                            window.addEventListener("resize", () => {
                              updateMaxTranslate();
                              // If we've overshot, clamp or bounce back
                              if (currentTranslate > 0) currentTranslate = 0;
                              if (currentTranslate < maxTranslate) currentTranslate = maxTranslate;
                              carouselTrack.style.transform = `translateX(${currentTranslate}px)`;
                            });

                            // Initialize
                            updateMaxTranslate();
                            currentTranslate = 0; // start at left edge
                            carouselTrack.style.transform = `translateX(0px)`;
                          });
                        </script>



                      </div>

                      <div class="redeem_button">

                        <div>

                          <div class="redeem-button-div">
                            <button class="redeem-button" type="button">GET CASH</button>

                            <div class="r_dropdown" id="r_dropdown">

                              <div class="onboarding" id="onboarding" style="
                                display: inline-flex;width: 100%;">

                                <script src="https://js.stripe.com/v3/"></script>
                                <p style="
                                width: 1900px;
                                margin-right: 10px;
                            ">Finish onboarding with Stripe to GET CASH!</p>
                                <button class="btn_class" id="redirect-btn" fdprocessedid="osbbj" style="
                                /* width: 100px; */
                            ">Stripe</button>
                                <script>
                                  document.addEventListener("DOMContentLoaded", function () {
                                    const r_openShareBtn = document.querySelector(".redeem-button");
                                    r_openShareBtn.addEventListener("click", function () {
                                      // Toggle the .show class => triggers the max-height CSS transition
                                      r_dropdown.classList.toggle("show");
                                    });
                                  });
                                </script>

                                <style>
                                  #redirect-btn {
                                    max-height: 40px;
                                  }


                                  .r_dropdown {

                                    /* For the vertical slide-down effect: */
                                    max-height: 0;
                                    /* Start collapsed */
                                    overflow-y: clip;
                                    /* Hide content until expanded */
                                    margin-top: 0px;
                                    padding-bottom: 0px;
                                    transition: max-height 0.4s ease, padding-bottom 0.4s ease, margin-top 0.8s ease;
                                    /* Smooth opening animation */
                                    margin: 0px 20px 10px 20px;
                                  }

                                  /* When we add .show class via JS, it expands to some large height */
                                  .r_dropdown.show {
                                    max-height: 500px;
                                    /* or however tall your content typically is */
                                    padding-bottom: 10px;
                                    margin-top: 20px;
                                    margin: 20px 20px 10px 20px;
                                  }
                                </style>

                              </div>
                            </div>

                          </div>

                        </div>
                      </div>
                    </div>

                    <style>
                      .rewards_page {
                        margin-top: 20px;
                        font-family: "Press Start 2P" !important;
                        color: #FFFFFF !important;
                      }


                      .redeem-button-div {
                        color: #FFFFFF !important;
                        padding-top: 20px;
                      }

                      .redeem-button {
                        font-size: 1.5rem !important;
                        padding: 23px 30px;
                      }

                      .referrals {
                        margin-top: 20px;
                        font-family: "Press Start 2P" !important;
                        font-size: 28px !important;
                        color: #FFFFFF !important;
                      }

                      .action_buttons button {
                        width: 100% !important;
                      }

                      .referral_count {
                        margin-top: 20px;
                      }
                    </style>



                  </div>
                </div>

                <script>
                  let currentStage = 1; // Start at stage 1 (login)
                  const totalStages = 3;

                  // Show the correct stage
                  function showStage(stage) {
                    for (let i = 1; i <= totalStages; i++) {
                      document.getElementById(`stage${i}`).classList.remove("active");
                    }
                    document.getElementById(`stage${stage}`).classList.add("active");
                  }

                  // Move to the next stage
                  function nextStage() {
                    if (currentStage < totalStages) {
                      currentStage++;
                      showStage(currentStage);
                    }
                  }

                  // Move to the previous stage
                  function prevStage() {
                    if (currentStage > 1) {
                      currentStage--;
                      showStage(currentStage);
                    }
                  }


                  document.addEventListener("DOMContentLoaded", () => {
                    let activityTimeout;

                    const rewardsPageElement = document.querySelector(".rewards_page");

                    // Save login session in a cookie
                    function setLoginSession(email) {
                      document.cookie = `loginSession=${encodeURIComponent(email)}; path=/; max-age=900`; // 15 minutes
                    }

                    // Get the email address from the session cookie
                    function getLoginSession() {
                      const cookies = document.cookie.split("; ");
                      const sessionCookie = cookies.find((row) => row.startsWith("loginSession="));
                      return sessionCookie ? decodeURIComponent(sessionCookie.split("=")[1]) : null;
                    }

                    // Clear the login session cookie
                    function clearLoginSession() {
                      document.cookie = "loginSession=; path=/; max-age=0";
                    }

                    // Reset the UI to stage1 (login)
                    function resetToLogin() {
                      clearLoginSession(); // Clear the session cookie

                      // Reset the stage1 elements to their initial states:
                      // Show the email form and hide the code form
                      const emailForm = document.getElementById('emailForm');
                      const codeForm = document.getElementById('codeForm');
                      if (emailForm && codeForm) {
                        emailForm.style.display = 'block';
                        codeForm.style.display = 'none';
                      }

                      // Optionally, clear any pre-filled email/code data if needed:
                      document.getElementById('emailInput').value = "";
                      document.getElementById('writer').innerHTML = "";

                      currentStage = 1; // Reset stage to 1 (login)
                      showStage(currentStage); // Display stage1
                    }


                    const logoutBtn = document.getElementById("logoutBtn");
                    if (logoutBtn) {
                      logoutBtn.addEventListener("click", (e) => {
                        e.preventDefault();
                        resetToLogin();
                      });
                    }


                    // Fetch user data and load it into the rewards page
                    function loadUserData() {
                      const email = getLoginSession(); // Retrieve email from the session cookie
                      if (email) {
                        fetchUserData(email); // Dynamically load account info using email
                        currentStage = 3; // Set to rewards stage
                        showStage(currentStage); // Show rewards page
                      } else {
                        resetToLogin(); // If no session, show login stage
                      }
                    }

                    // Reset the 15-minute activity timer
                    function resetActivityTimer() {
                      clearTimeout(activityTimeout); // Clear the previous timer

                      // Set a new timer
                      activityTimeout = setTimeout(() => {
                        alert("Session expired due to inactivity. Please log in again.");
                        resetToLogin();
                      }, 900000); // 15 minutes
                    }

                    // Monitor user activity on the rewards page
                    function monitorUserActivity() {
                      const events = ["mousemove", "keydown", "click", "scroll"];
                      events.forEach((event) => {
                        document.addEventListener(event, resetActivityTimer);
                      });
                    }
                    // Save the active tab ID in a cookie
                    function saveLastTab(tabId) {
                      document.cookie = `lastTab=${encodeURIComponent(tabId)}; path=/; max-age=900`; // 15 minutes
                    }

                    // Get the last active tab ID from the cookie
                    function getLastTab() {
                      const cookies = document.cookie.split("; ");
                      const lastTabCookie = cookies.find((row) => row.startsWith("lastTab="));
                      return lastTabCookie ? decodeURIComponent(lastTabCookie.split("=")[1]) : null;
                    }

                    // Restore the last active tab on page load
                    const lastTab = getLastTab();
                    if (lastTab) {
                      const tabTrigger = document.querySelector(`[data-bs-target="#${lastTab}"]`);
                      if (tabTrigger) {
                        const bootstrapTab = new bootstrap.Tab(tabTrigger);
                        bootstrapTab.show(); // Activate the tab
                      }
                    }

                    // Add event listeners to save the active tab when the user switches tabs
                    const tabTriggers = document.querySelectorAll('[data-bs-toggle="tab"]');
                    tabTriggers.forEach((tab) => {
                      tab.addEventListener("shown.bs.tab", (event) => {
                        const tabId = event.target.getAttribute("data-bs-target").replace("#", ""); // Extract tab ID
                        saveLastTab(tabId); // Save to cookie
                      });
                    });

                    // Initialize logic on page load
                    function initialize() {
                      loadUserData(); // Load user data if logged in
                      monitorUserActivity(); // Start monitoring user activity
                      resetActivityTimer(); // Reset the activity timer on page load
                    }

                    // Initialize everything
                    initialize();
                  });


                </script>

                <script>

                  document.addEventListener('DOMContentLoaded', function () {

                    const orderList = document.getElementById('order-list');
                    const redeemButton = document.getElementById('redeem-button');
                    const progressBar = document.getElementById('progress-bar');


                    // 1) Create a function that fetches user data and updates the UI
                    window.fetchUserData = function (email) {
                      return fetch('https://rxid.co.uk/get_user_data', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email }),
                      })
                        .then(response => response.json())
                        .then(data => {
                          if (data.status === "success") {
                            const user = data.data;

                            // Update UI with user details
                            document.getElementById('user-name').innerText = user.firstName;
                            document.getElementById('user-balance').innerText = user.balance;
                            document.getElementById('user-referral-count').innerText = user.referral_count;

                            const thresholdValues = Object.values(user.selected_thresholds || {}).map(thr => thr.selected);
                            const minThreshold = Math.min(...thresholdValues);
                            const redeemButton = document.querySelector('.redeem-button');

                            // For onboarded users, disable the button if balance is too low:
                            if (Number(user.is_onboarded) === 1) {
                              redeemButton.disabled = user.balance < minThreshold;
                            } else {
                              // For users who are not onboarded, force-enable the button
                              redeemButton.disabled = false;
                            }

                            console.log("Redeem button disabled state:", redeemButton.disabled);

                            // Onboarding check – if is_onboarded equals 0 (non‑onboarded)
                            if (Number(user.is_onboarded) === 0) {
                              console.log("User is not onboarded. Setting up onboarding behavior.");

                              // Remove any previous click listener if necessary and use a direct onclick assignment.
                              redeemButton.onclick = function (e) {
                                e.preventDefault();
                                console.log("Redeem button clicked: displaying r_dropdown.");
                                const rDropdown = document.getElementById('r_dropdown');
                                if (rDropdown) {
                                  rDropdown.classList.add('show');
                                } else {
                                  console.error("r_dropdown element not found.");
                                }
                              };

                              // Generate an updated onboarding link.
                              fetch('https://rxid.co.uk/generate-account-link', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({ account_id: user.connected_account_id }),
                              })
                                .then(resp => resp.json())
                                .then(result => {
                                  if (result.onboarding_link) {
                                    user.onboarding_link = result.onboarding_link;
                                    const redirectBtn = document.getElementById('redirect-btn');
                                    if (!redirectBtn) {
                                      console.error('Stripe redirect button not found');
                                    } else {
                                      console.log('Onboarding link generated:', user.onboarding_link);
                                      // Attach an onclick handler to redirect to the onboarding link.
                                      redirectBtn.onclick = function (e) {
                                        e.preventDefault();
                                        window.location.href = user.onboarding_link;
                                      };
                                    }
                                  } else {
                                    console.error("Error: Onboarding link not returned", result.error);
                                  }
                                })
                                .catch(error => {
                                  console.error("Error generating onboarding link:", error);
                                });
                            } else {
                              console.log("User is onboarded; no extra onboarding action required.");
                            }

                            return user;
                          } else {
                            throw new Error(data.message || "Error fetching user data");
                          }
                        })
                        .catch(error => {
                          console.error("Error fetching user data:", error);
                        });
                    };




                    // 2) Create a function to fetch and display order history
                    function fetchOrderHistory(userEmail) {
                      return fetch('https://rxid.co.uk/get_user_history', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email: userEmail }),
                      })
                        .then(response => response.json())
                        .then(historyData => {
                          if (historyData.status === "success") {
                            const orders = historyData.orders;
                            orderList.innerHTML = "";

                            if (orders.length > 0) {
                              orders.forEach(order => {
                                const listItem = document.createElement('li');
                                listItem.innerHTML = `
                      <img src="${order.image_url}" alt="${order.product_name}" 
                           style="width:50px; height:50px; margin-right:10px;">
                      <div>
                        <strong>Order #${order.order_number}:</strong> ${order.product_name}
                        <br>Size: ${order.size}, Color: ${order.color}, Price: £${order.unit_price}
                        <br>Date: ${new Date(order.created_on).toLocaleDateString()}
                      </div>
                    `;
                                orderList.appendChild(listItem);
                              });
                            } else {
                              orderList.innerHTML = "<li>No orders found.</li>";
                            }
                          } else {
                            console.error("Error fetching order history:", historyData.message);
                            orderList.innerHTML = "<li>Error fetching order history.</li>";
                          }
                        })
                        .catch(error => {
                          console.error("Error fetching order history:", error);
                          orderList.innerHTML = "<li>Error fetching order history.</li>";
                        });
                    }
                    // 5) Redeem reward logic
                    redeemButton.addEventListener('click', () => {
                      fetch('https://rxid.co.uk/redeem_reward', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ utm_id: utm_id })
                      })
                        .then(res => res.json())
                        .then(data => {
                          if (data.status === "success") {
                            alert(data.message || "Reward redeemed successfully!");
                            // After successful redemption, re-fetch user data to reflect updated balance
                            fetchUserData();
                          } else {
                            alert(data.message || "Could not redeem reward");
                          }
                        })
                        .catch(err => {
                          console.error("Error redeeming reward:", err);
                          alert("Network error while redeeming reward.");
                        });
                    });
                  });




                </script>
              </div>

              <div>
                <script>
                  async function updateBalance() {
                    const email = document.getElementById('email').value;
                    const newBalance = document.getElementById('new_balance').value;

                    if (!email || !newBalance) {
                      alert('Please enter both email and balance');
                      return;
                    }

                    const response = await fetch('https://rxid.co.uk/update_balance', {
                      method: 'POST',
                      headers: {
                        'Content-Type': 'application/json',
                      },
                      body: JSON.stringify({ email: email, new_balance: newBalance }),
                    });

                    const result = await response.json();
                    alert(result.message)
                  }
                </script>
              </div>

              <!-- About Tab Content -->
              <div class="tab-pane fade" id="about" role="tabpanel" aria-labelledby="about-tab">
                <!-- Inline CSS to keep styling self-contained -->
                <style>
                  /* Container styling for About tab */
                  #about {
                    font-family: "Press Start 2P", system-ui, sans-serif !important;
                    color: #FFFFFF !important;
                    /* Adjust padding or margin as you wish */
                    padding: 1.5rem;
                  }

                  /* Transcript display styling */
                  #transcript-display {
                    text-align: center;
                    font-family: 'Press Start 2P', system-ui, sans-serif;
                    font-size: 0.9rem;
                    padding: 10px;
                    color: white;
                    margin-top: 15px;
                    background: rgba(54, 193, 245, 0.1);
                    border-radius: 8px;
                    border: 1px solid rgba(54, 193, 245, 0.3);
                  }

                  /* Main heading within About tab */
                  #about h3 {
                    font-size: 1.35rem;
                    /* Adjust to match your site’s headings */
                    margin-bottom: 1rem;
                    font-family: 'Press Start 2P';
                  }

                  /* Subheadings for sections like "How We Undercut..." */
                  #about h4 {
                    font-size: 1rem;
                    margin-top: 1.5rem;
                    margin-bottom: 0.75rem;
                    font-family: 'Press Start 2P';
                  }

                  /* Paragraph text styling */
                  #about p {
                    margin-bottom: 1rem;
                    font-size: 0.6rem;
                    line-height: 1.5;
                    font-family: 'Press Start 2P';
                  }
                </style>
                <div>
                  <!-- Audio Element (hidden by default) -->
                  <audio id="tts-audio" preload="auto">
                    <source src="https://rxid.co.uk/static/byforce2-about.mp3" type="audio/mpeg">
                    Your browser does not support the audio element.
                  </audio>

                  <!-- TTS Button -->
                  <div><button id="tts-toggle" class="audio-button">🔊
                      Play Audio</button>

                  </div>

                  <!-- Transcript Display -->
                  <div id="transcript-display"
                    style="text-align: center; font-family: 'Press Start 2P', system-ui, sans-serif; font-size: 0.9rem; padding: 10px; color: white;">
                  </div>

                  <!-- JavaScript Logic -->
                  <script>
                    const audio = document.getElementById('tts-audio');
                    const toggleBtn = document.getElementById('tts-toggle');
                    const transcriptDiv = document.getElementById('transcript-display');

                    let transcript = [];
                    let lastWord = "";

                    // Load transcript JSON on demand
                    async function loadTranscript() {
                      try {
                        const res = await fetch("https://rxid.co.uk/static/about-audio-transcript.json");
                        transcript = await res.json();
                      } catch (err) {
                        console.error("Failed to load transcript:", err);
                      }
                    }

                    // Play/Pause Toggle
                    toggleBtn.addEventListener('click', async () => {
                      if (audio.paused) {
                        if (transcript.length === 0) await loadTranscript();
                        audio.play();
                        toggleBtn.textContent = '🎧 Listen till end';

                        // Delay actual pause label
                        setTimeout(() => {
                          if (!audio.paused) {
                            toggleBtn.textContent = '⏸️ Pause Audio';
                          }
                        }, 3000); // 3 seconds
                      } else {
                        audio.pause();
                        toggleBtn.textContent = '🔊 Play Audio';
                      }
                    });

                    // Sync transcript with current audio time
                    const SUBTITLE_OFFSET = 0.5; // Adjust this value to sync better

                    audio.addEventListener('timeupdate', () => {
                      const current = audio.currentTime + SUBTITLE_OFFSET;
                      const wordObj = transcript.find(w => current >= w.start && current < w.end);
                      if (wordObj && wordObj.word !== lastWord) {
                        transcriptDiv.textContent = wordObj.word;
                        lastWord = wordObj.word;
                      }
                    });

                    // Reset everything on audio end
                    audio.addEventListener('ended', () => {
                      toggleBtn.textContent = '🔊 Play Audio';
                      transcriptDiv.textContent = '';
                      lastWord = "";
                    });
                  </script>
                </div>
              </div>
            </div>
          </div>
          <!-- Modal -->
          <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-sm">
              <div class="modal-content">
                <!-- Close Button -->
                <div class="modal-header">
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <!-- Modal Body -->
                <div class="modal-body text-center">
                  <!-- Message -->
                  <p class="fs-5 text-black mb-4">You are about to Cash In your prices and your streak</p>
                  <p class="mt-2">Are you Sure?</p>
                  <!-- Buttons -->
                  <div class="d-flex justify-content-center gap-3">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Go Back</button>
                    <button class="btn btn-outline-dark" data-bs-dismiss="modal">Cash In</button>
                    <!-- <button class="btn_classes" id="popup-tab" data-bs-dismiss="modal">Cash In</button> -->
                    <!-- <button class="btn_class1" data-bs-dismiss="modal" id="popup-tab" data-bs-toggle="tab" data-bs-target="#modalpopup" type="button" role="tab" aria-controls="modalpopup" aria-selected="false">Cash In</button> -->
                    <!-- <button type="button" class="btn btn-primary">Cash In</button> -->
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- footer Part -->
          <div class="footer_main">

            <!-- Visible iframe for development; later you can hide it with CSS -->
            <iframe id="cartIframe" src="/cart" style="width: 100%; height: 600px; border: 2px solid #000;"></iframe>

            <style>
              /* Styling for the new box */
              #overlayInfoBox {
                position: fixed !important;
                left: 20px;
                right: 20px;
                height: 65px;
                display: block;
                z-index: 1;
                background: #00b2ff30;
                border-radius: 10px;
                border: 2px solid #8ad5ff;
                padding: 10px;
                color: white;
                bottom: 20px;
                overflow: hidden;
                transition: height 0.3s ease;
                backdrop-filter: blur(5.99px);
                -webkit-backdrop-filter: blur(5.99px);
              }
            </style>







            <div id="overlayInfoBox">
              <div id="cartBox" style="
left: 20px;
right: 20px;
position: absolute;
height: 400px;
bottom: 199px;
/* top: 20px; */
">
                <style>
                  /* For Firefox */
                  #cartBox {
                    overflow: scroll;
                    scrollbar-width: none;
                    /* hides scrollbar */
                  }

                  /* For Internet Explorer 10+ */
                  #cartBox {
                    -ms-overflow-style: none;
                    /* hides scrollbar */
                  }

                  /* For WebKit browsers (Chrome, Safari) */
                  #cartBox::-webkit-scrollbar {
                    display: none;
                    /* hides scrollbar */
                  }
                </style>

                <div id="miniCartDisplay" style="padding: 10px; margin: 10px; position: fixed; display: none;">
                  Mini Cart: (Loading...)
                </div>
                <div>
                  <h3 id="orderTotalDisplay" style="padding-top: 8px; font-weight: bold;">ORDER TOTAL: £0.00</h3>
                </div>
                <div id="pricing-info"></div>

                <script>
                  // Function to calculate bundle breakdown from a given quantity
                  function calculateBundlePricing(qty) {
                    const bundles = {};
                    let totalDiscountPrice = 0;

                    // 12-pair bundles
                    if (qty >= 12) {
                      bundles["12pair"] = Math.floor(qty / 12);
                      totalDiscountPrice += bundles["12pair"] * 689.99;
                      qty %= 12;
                    }

                    // 7-pair bundles
                    if (qty >= 7) {
                      bundles["7pair"] = Math.floor(qty / 7);
                      totalDiscountPrice += bundles["7pair"] * 399.99;
                      qty %= 7;
                    }

                    // 3-pair bundles
                    if (qty >= 3) {
                      bundles["3pair"] = Math.floor(qty / 3);
                      totalDiscountPrice += bundles["3pair"] * 175.99;
                      qty %= 3;
                    }

                    // Anything left is treated as singles
                    bundles["single"] = qty;
                    totalDiscountPrice += qty * 100.00; // or whatever your unit price is

                    return {
                      totalDiscountPrice,
                      bundles
                    };
                  }


                  // Function to display the bundles in the designated HTML element
                  function displayBundlesDetected(qty) {
                    const result = calculateBundlePricing(qty);
                    const bundles = result.bundles;
                    let outputHTML = "";

                    if (bundles["12pair"]) outputHTML += `12pair Bundle x${bundles["12pair"]}<br>`;
                    if (bundles["7pair"]) outputHTML += `7pair Bundle x${bundles["7pair"]}<br>`;
                    if (bundles["3pair"]) outputHTML += `3pair Bundle x${bundles["3pair"]}<br>`;
                    if (bundles["single"]) outputHTML += `Single Pairs x${bundles["single"]}<br>`;

                    document.getElementById("bundles-detected").innerHTML = outputHTML;
                  }

                </script>
              </div>
            </div>


            <script>
              // Function to extract cart data from the cart iframe
              function extractCartDataFromIframe() {
                const iframe = document.getElementById("cartIframe");
                if (!iframe) {
                  console.error("Cart iframe not found.");
                  return null;
                }
                const doc = iframe.contentDocument || iframe.contentWindow.document;
                if (!doc) {
                  console.error("Could not access the iframe document.");
                  return null;
                }
                // Query for cart rows (adjust the selector based on your cart DOM)
                const cartRows = doc.querySelectorAll(".cart-row");
                const cartItems = [];

                cartRows.forEach(row => {
                  // Extract product name
                  const productNameEl = row.querySelector(".cart-row-title");
                  const productName = productNameEl ? productNameEl.textContent.trim() : "";

                  // Extract quantity using data-test attribute
                  const quantityInput = row.querySelector("input[data-test='quantity-input']");
                  const quantity = quantityInput ? parseInt(quantityInput.value) : 1;

                  // Extract price text and convert to the smallest currency unit (e.g. pence)
                  const priceEl = row.querySelector(".cart-row-price");
                  const priceText = priceEl ? priceEl.textContent.trim() : "";
                  const priceNumber = priceText ? parseFloat(priceText.replace(/[^0-9.]/g, "")) * 100 : 0;

                  // Extract variant details (for example, Size and Color)
                  const variantEls = row.querySelectorAll(".cart-row-variant");
                  const variants = {};
                  variantEls.forEach(variantEl => {
                    const text = variantEl.textContent.trim();
                    const parts = text.split(":");
                    if (parts.length === 2) {
                      const key = parts[0].toLowerCase.trim(); // e.g. "size"
                      const value = parts[1].trim();               // e.g. "4" or "All-White"
                      variants[key] = value;
                    }
                  });

                  cartItems.push({
                    name: productName,
                    quantity: quantity,
                    price: priceNumber,
                    variants: variants
                  });
                });

                return { cartItems };
              }

              function calculateBundlePricing(cartItems) {
                const bundlePrices = {
                  12: 689.99,
                  7: 399.99,
                  3: 175.99,
                  1: 59.99
                };

                // Group items by variant (e.g., Color)
                const variantGroups = {};

                cartItems.forEach(item => {
                  if (item.name === 'AF1 07s') {
                    const color = item.variants?.color || 'Unknown';
                    if (!variantGroups[color]) variantGroups[color] = 0;
                    variantGroups[color] += item.quantity;
                  }
                });

                // Calculate total price using bundles
                let orderTotal = 0;
                const breakdown = {};

                for (const color in variantGroups) {
                  let qty = variantGroups[color];
                  breakdown[color] = { 12: 0, 7: 0, 3: 0, 1: 0 };

                  // Prioritize larger bundles
                  breakdown[color][12] = Math.floor(qty / 12);
                  qty %= 12;

                  breakdown[color][7] = Math.floor(qty / 7);
                  qty %= 7;

                  breakdown[color][3] = Math.floor(qty / 3);
                  qty %= 3;

                  breakdown[color][1] = qty;

                  // Sum the price
                  orderTotal += (breakdown[color][12] * bundlePrices[12])
                    + (breakdown[color][7] * bundlePrices[7])
                    + (breakdown[color][3] * bundlePrices[3])
                    + (breakdown[color][1] * bundlePrices[1]);
                }

                // Round to 2 decimal places
                orderTotal = Math.round(orderTotal * 100) / 100;

                return { orderTotal, breakdown };
              }


              // Function to update the mini cart display
              // Create buttons inside the minicart that control the iframe's cart
              function updateMiniCartDisplay() {
                // Extract cart data from the iframe
                const cartData = extractCartDataFromIframe();
                const miniCart = document.getElementById("miniCartDisplay");
                if (miniCart && cartData) {
                  // (Optional) Show raw cart data for debugging:
                  // miniCart.textContent = JSON.stringify(cartData, null, 2);
                }

                // Proceed only if there are items in the cart
                if (cartData && cartData.cartItems && cartData.cartItems.length > 0) {
                  // Calculate pricing using your existing bundle pricing function
                  const pricingResult = calculateBundlePricing(cartData.cartItems);
                  const orderTotalElement = document.getElementById('orderTotalDisplay');
                  if (orderTotalElement) {
                    orderTotalElement.textContent = `ORDER TOTAL: £${pricingResult.orderTotal.toFixed(2)}`;
                  }

                  // Build the breakdown HTML string
                  let breakdownHTML = `<p>Discounted Order Total: £${pricingResult.orderTotal.toFixed(2)}</p>`;
                  let overallOriginalTotal = 0;
                  let overallDiscountedTotal = 0;

                  // For each color group in the breakdown, calculate and display details
                  for (const color in pricingResult.breakdown) {
                    let colorQty = 0;
                    // Sum total quantity for this color from the cart items
                    cartData.cartItems.forEach(item => {
                      if (item.name === 'AF1 07s') {
                        const itemColor = item.variants?.color || 'Unknown';
                        if (itemColor === color) {
                          colorQty += item.quantity;
                        }
                      }
                    });

                    // Calculate original (non‑discounted) price using the single‑pair price (e.g. £59.99)
                    const originalTotal = colorQty * 59.99;
                    // Calculate the discounted total for this color using your bundle breakdown
                    const discountedTotal =
                      (pricingResult.breakdown[color][12] * 689.99) +
                      (pricingResult.breakdown[color][7] * 399.99) +
                      (pricingResult.breakdown[color][3] * 175.99) +
                      (pricingResult.breakdown[color][1] * 59.99);

                    overallOriginalTotal += originalTotal;
                    overallDiscountedTotal += discountedTotal;
                    const savings = originalTotal - discountedTotal;

                    const colorData = pricingResult.breakdown[color];
                    breakdownHTML += `<h3>Breakdown for ${color}:</h3>`;
                    breakdownHTML += `<ul>`;

                    // Show "12-pair bundles" only if > 0
                    if (colorData[12] > 0) {
                      breakdownHTML += `<li>12-pair bundles: ${colorData[12]}</li>`;
                    }
                    // Show "7-pair bundles" only if > 0
                    if (colorData[7] > 0) {
                      breakdownHTML += `<li>7-pair bundles: ${colorData[7]}</li>`;
                    }
                    // Show "3-pair bundles" only if > 0
                    if (colorData[3] > 0) {
                      breakdownHTML += `<li>3-pair bundles: ${colorData[3]}</li>`;
                    }
                    // Show "Individual pairs" only if > 0
                    if (colorData[1] > 0) {
                      breakdownHTML += `<li>Individual pairs: ${colorData[1]}</li>`;
                    }

                    breakdownHTML += `</ul>`;
                    breakdownHTML += `<p>Discounted Price for ${color}: £${discountedTotal.toFixed(2)}</p>`;
                    breakdownHTML += `<p>Original Price for ${color}: £${originalTotal.toFixed(2)}</p>`;
                    breakdownHTML += `<p>Savings for ${color}: £${savings.toFixed(2)}</p>`;
                  }

                  // Overall totals
                  breakdownHTML += `<h3>Overall:</h3>`;
                  breakdownHTML += `<p>Total Discounted Price: £${overallDiscountedTotal.toFixed(2)}</p>`;
                  breakdownHTML += `<p>Total Original Price: £${overallOriginalTotal.toFixed(2)}</p>`;
                  breakdownHTML += `<p>Total Savings: £${(overallOriginalTotal - overallDiscountedTotal).toFixed(2)}</p>`;

                  // Update the pricing-info element with the breakdown
                  const pricingInfoEl = document.getElementById("pricing-info");
                  if (pricingInfoEl) {
                    pricingInfoEl.innerHTML = breakdownHTML;
                  }
                }

                // Create buttons inside the minicart that control the iframe's cart
                const iframe = document.getElementById("cartIframe");
                if (!miniCart || !cartData || !iframe) return;

                const doc = iframe.contentDocument || iframe.contentWindow.document;
                if (!doc) return;

                // Clear minicart content
                miniCart.innerHTML = '';

                cartData.cartItems.forEach((item, index) => {
                  // Create minicart item display
                  const itemDiv = document.createElement('div');
                  itemDiv.style.margin = '5px';
                  itemDiv.style.padding = '5px';

                  // Item details
                  itemDiv.innerHTML = `
          <strong>${item.name}</strong> - Qty: ${item.quantity} - £${(item.price / 100).toFixed(2)}
          <br>Size: ${item.variants.size || ''} | Color: ${item.variants.color || ''}
          <br>
      `;

                  // --- Decrement Button ---
                  const decBtn = document.createElement('button');
                  decBtn.textContent = '-';
                  decBtn.classList.add('mini-cart-btn');
                  decBtn.addEventListener('click', () => {
                    const row = doc.querySelectorAll('.cart-row')[index];
                    if (row) {
                      const btn = row.querySelector('.cart-row-qty-dec');
                      if (btn) btn.click();
                      setTimeout(updateMiniCartDisplay, 300);
                    }
                  });

                  // --- Increment Button ---
                  const incBtn = document.createElement('button');
                  incBtn.textContent = '+';
                  incBtn.classList.add('mini-cart-btn');
                  incBtn.addEventListener('click', () => {
                    const row = doc.querySelectorAll('.cart-row')[index];
                    if (row) {
                      const btn = row.querySelector('.cart-row-qty-inc');
                      if (btn) btn.click();
                      setTimeout(updateMiniCartDisplay, 300);
                    }
                  });

                  // --- Remove Button ---
                  const removeBtn = document.createElement('button');
                  removeBtn.textContent = 'Remove';
                  removeBtn.classList.add('mini-cart-btn');
                  removeBtn.addEventListener('click', () => {
                    const row = doc.querySelectorAll('.cart-row')[index];
                    if (row) {
                      const btn = row.querySelector('.cart-row-remove');
                      if (btn) btn.click();
                      setTimeout(updateMiniCartDisplay, 800);
                    }
                  });

                  // Append buttons to item
                  itemDiv.appendChild(decBtn);
                  itemDiv.appendChild(incBtn);
                  itemDiv.appendChild(removeBtn);

                  // Append item to minicart
                  miniCart.appendChild(itemDiv);

                });
              }
              // When the page loads, wait for the iframe to load so its content is accessible:
              document.addEventListener("DOMContentLoaded", () => {
                const iframe = document.getElementById("cartIframe");
                if (iframe) {
                  // When the iframe loads, update the mini cart display
                  iframe.addEventListener("load", updateMiniCartDisplay);

                  // In case the iframe is already loaded, trigger an update after a slight delay
                  if (iframe.contentDocument && iframe.contentDocument.readyState === "complete") {
                    setTimeout(updateMiniCartDisplay, 500);
                  }
                }
              });


            </script>

            <style>
              .mini-cart-btn {
                border: unset;
                font-weight: 400;
                font-size: 13px;
                background-color: #45cdf600;
                border-radius: 10px;
                font-family: "Press Start 2P";
                color: white;
                transition: box-shadow 0.1s ease-in-out, transform 0.1s ease-in-out;
                padding: 5px 10px;
                margin-right: 4px;
              }

              .mini-cart-btn:active {
                box-shadow: none;
                transform: translateY(2px);
              }
            </style>


            <!-- Checkout Confirmation Modal -->
            <div id="checkoutModal" class="checkout-modal" style="display: none;">
              <div class="checkout-modal-content">
                <div class="checkout-modal-header">
                  <h2>🛒 Order Confirmation</h2>
                  <button class="checkout-modal-close" id="checkoutModalClose">&times;</button>
                </div>

                <div class="checkout-modal-body">
                  <div class="order-summary">
                    <h3>📋 Order Summary</h3>
                    <div id="modalOrderItems" class="modal-order-items">
                      <!-- Order items will be populated here -->
                    </div>
                    <div class="order-total">
                      <strong>Total: <span id="modalOrderTotal">£0.00</span></strong>
                    </div>
                  </div>

                  <!-- Additional Products Section -->
                  <div class="additional-products-section">
                    <h3>🎁 Add These Popular Items to Your Order!</h3>
                    <p class="section-subtitle">Complete your look with these must-have accessories</p>

                    <div class="additional-products-grid">
                      <!-- Product 1: Sneaker Care Kit -->
                      <div class="additional-product-card">
                        <div class="product-image">
                          <img
                            src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/737da395-5fc9-467a-b4c3-ed1d126bbdd4/bitmap_g1120.png?content-type=image%2Fpng"
                            alt="Sneaker Care Kit">
                        </div>
                        <div class="product-info">
                          <h4>Sneaker Care Kit</h4>
                          <p class="product-description">Professional cleaning & protection for your AF1s</p>
                          <div class="product-price">£24.99</div>
                          <button class="add-to-cart-btn" data-product="sneaker-care-kit" data-price="24.99">
                            🛒 Add to Cart
                          </button>
                        </div>
                      </div>

                      <!-- Product 2: Premium Socks -->
                      <div class="additional-product-card">
                        <div class="product-image">
                          <img
                            src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/90355dcc-2336-4d27-b9a6-364c8b9a8211/bitmap_g1109.png?content-type=image%2Fpng"
                            alt="Premium Socks">
                        </div>
                        <div class="product-info">
                          <h4>Premium Socks (3-Pack)</h4>
                          <p class="product-description">Ultra-comfortable socks perfect for your new kicks</p>
                          <div class="product-price">£19.99</div>
                          <button class="add-to-cart-btn" data-product="premium-socks" data-price="19.99">
                            🛒 Add to Cart
                          </button>
                        </div>
                      </div>

                      <!-- Product 3: Shoe Trees -->
                      <div class="additional-product-card">
                        <div class="product-image">
                          <img
                            src="https://images.squarespace-cdn.com/content/647e1982c1836a5f267634f1/b4841124-5355-446a-9fa2-fc83ba27ff6b/bitmap_g1121.png?content-type=image%2Fpng"
                            alt="Shoe Trees">
                        </div>
                        <div class="product-info">
                          <h4>Cedar Shoe Trees</h4>
                          <p class="product-description">Maintain perfect shape & absorb moisture</p>
                          <div class="product-price">£34.99</div>
                          <button class="add-to-cart-btn" data-product="cedar-shoe-trees" data-price="34.99">
                            🛒 Add to Cart
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="checkout-actions">
                    <p>Ready to complete your purchase?</p>
                    <button id="proceedToStripeBtn" class="proceed-btn">
                      💳 Proceed to Secure Checkout
                    </button>
                    <div id="checkoutLoading" class="checkout-loading" style="display: none;">
                      <div class="loading-spinner"></div>
                      <p>Processing your order...</p>
                    </div>
                    <button id="cancelCheckoutBtn" class="cancel-btn">
                      ✏️ Edit Order
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Temporary Test Button to Send Cart Data to the Backend -->
            <div id="overlayContainer">
              <!-- The main overlay button (e.g. Checkout) -->
              <button id="testSendCartBtn" style="display: none;">Checkout</button>
              <!-- The extra button on top (e.g. cart icon) -->
              <button id="cartIconBtn"
                style="display: block;position: fixed;border: none;padding: 10px;cursor: pointer;bottom: 33px;z-index: 9999;right: 63px;background: #f5deb300;">
                🛒
              </button>
            </div>

            <!-- Tutorial Helper -->
            <div id="tutorialHelper" title="Need help? Click for guided tour!">
              ?
            </div>

            <!-- Tutorial Overlay -->
            <div id="tutorialOverlay" class="tutorial-overlay">
              <div class="tutorial-modal">
                <h3 id="tutorialTitle">Welcome to ByForce!</h3>
                <p id="tutorialContent">Let me guide you through our website to help you find and purchase the perfect
                  AF1s!</p>
                <div class="tutorial-buttons">
                  <button id="tutorialPrev" class="tutorial-btn" disabled>Previous</button>
                  <button id="tutorialSkip" class="tutorial-btn">Skip Tour</button>
                  <button id="tutorialNext" class="tutorial-btn">Next</button>
                </div>
              </div>
            </div>

            <!-- Tutorial Highlight Element -->
            <div id="tutorialHighlight" class="tutorial-highlight" style="display: none;"></div>


            <script>
              // Function to extract cart data from the cart iframe
              function extractCartDataFromIframe() {
                const iframe = document.getElementById("cartIframe");
                if (!iframe) {
                  console.error("Cart iframe not found.");
                  return null;
                }
                const doc = iframe.contentDocument || iframe.contentWindow.document;
                if (!doc) {
                  console.error("Could not access the iframe document.");
                  return null;
                }

                const cartRows = doc.querySelectorAll(".cart-row");
                const cartItems = [];
                cartRows.forEach(row => {
                  const productNameEl = row.querySelector(".cart-row-title");
                  const productName = productNameEl ? productNameEl.textContent.trim() : "";

                  const quantityInput = row.querySelector("input[data-test='quantity-input']");
                  const quantity = quantityInput ? parseInt(quantityInput.value) : 1;

                  const priceEl = row.querySelector(".cart-row-price");
                  const priceText = priceEl ? priceEl.textContent.trim() : "";
                  const priceNumber = priceText ? parseFloat(priceText.replace(/[^0-9.]/g, "")) * 100 : 0;

                  const variantEls = row.querySelectorAll(".cart-row-variant");
                  const variants = {};
                  variantEls.forEach(variantEl => {
                    const text = variantEl.textContent.trim();
                    const parts = text.split(":");
                    if (parts.length === 2) {
                      const key = parts[0].toLowerCase().trim();
                      const value = parts[1].trim();
                      variants[key] = value;
                    }
                  });

                  cartItems.push({
                    name: productName,
                    quantity: quantity,
                    price: priceNumber,
                    variants: variants
                  });
                });

                // ✅ Call overlay updater here
                updateOverlayPurchaseButton(cartItems);

                return { cartItems };
              }

              // ✅ Function to control the overlay visibility
              function updateOverlayPurchaseButton(cartItems) {
                const overlayBtn = document.getElementById('testSendCartBtn');
                const cartIconBtn = document.getElementById('cartIconBtn');
                const overlayInfoBox = document.getElementById('overlayInfoBox'); // if used elsewhere

                if (!overlayBtn || !cartIconBtn) return;

                if (cartItems && cartItems.length > 0) {
                  overlayBtn.style.display = 'block';
                  overlayBtn.classList.add('fixed-overlay-button');
                  cartIconBtn.style.display = 'block';
                  if (overlayInfoBox) {
                    overlayInfoBox.style.display = 'block';
                  }
                } else {
                  overlayBtn.style.display = 'none';
                  overlayBtn.classList.remove('fixed-overlay-button');
                  cartIconBtn.style.display = 'none';
                  if (overlayInfoBox) {
                    overlayInfoBox.style.display = 'none';
                  }
                }
              }



              // ✅ Attach click listener to the test button (unchanged)
              document.getElementById("testSendCartBtn").addEventListener("click", () => {
                // Show the checkout confirmation modal instead of going directly to checkout
                showCheckoutModal();
              });

              // Function to show the checkout confirmation modal
              function showCheckoutModal() {
                const cartData = extractCartDataFromIframe();
                if (!cartData) return;

                const { breakdown } = calculateBundlePricing(cartData.cartItems);

                // Sync additional items with cart iframe
                syncAdditionalItemsWithCart();

                // Populate the modal with order details
                populateModalOrderSummary(breakdown);

                // Show the modal
                document.getElementById('checkoutModal').style.display = 'flex';
              }

              // Function to sync additional items with cart iframe
              function syncAdditionalItemsWithCart() {
                const iframe = document.getElementById('cartIframe');
                if (!iframe) return;

                try {
                  const doc = iframe.contentDocument || iframe.contentWindow.document;

                  // Check which additional items are actually in the cart
                  const cartItems = Array.from(doc.querySelectorAll('.cart-row.additional-product-row'));
                  const cartProductNames = cartItems.map(row => {
                    const titleEl = row.querySelector('.cart-row-title');
                    return titleEl ? titleEl.textContent.trim() : '';
                  });

                  // Update our tracking array to match what's actually in cart
                  additionalItemsAdded = additionalItemsAdded.filter(item => {
                    const isInCart = cartProductNames.some(cartName =>
                      cartName.includes(item.name) || cartName.includes(getProductDisplayName(item.originalName))
                    );

                    if (!isInCart) {
                      // Reset button state for items not in cart
                      const button = document.querySelector(`[data-product="${item.originalName}"]`);
                      if (button) {
                        button.classList.remove('added');
                        button.textContent = '🛒 Add to Cart';
                        button.disabled = false;
                      }
                    }

                    return isInCart;
                  });
                } catch (error) {
                  console.error('Error syncing additional items with cart:', error);
                }
              }

              // Global variable to track additional items added
              let additionalItemsAdded = [];

              // Function to populate the modal with order summary
              function populateModalOrderSummary(breakdown) {
                const modalOrderItems = document.getElementById('modalOrderItems');
                const modalOrderTotal = document.getElementById('modalOrderTotal');

                modalOrderItems.innerHTML = '';
                let total = 0;

                // Add original cart items
                for (const color in breakdown) {
                  const bundles = breakdown[color];
                  if (bundles[12] > 0) {
                    const itemTotal = bundles[12] * 689.99;
                    total += itemTotal;
                    addOrderItemToModal(`12-Pair Bundle - ${color}`, bundles[12], `£${itemTotal.toFixed(2)}`, 'original');
                  }
                  if (bundles[7] > 0) {
                    const itemTotal = bundles[7] * 399.99;
                    total += itemTotal;
                    addOrderItemToModal(`7-Pair Bundle - ${color}`, bundles[7], `£${itemTotal.toFixed(2)}`, 'original');
                  }
                  if (bundles[3] > 0) {
                    const itemTotal = bundles[3] * 175.99;
                    total += itemTotal;
                    addOrderItemToModal(`3-Pair Bundle - ${color}`, bundles[3], `£${itemTotal.toFixed(2)}`, 'original');
                  }
                  if (bundles[1] > 0) {
                    const itemTotal = bundles[1] * 59.99;
                    total += itemTotal;
                    addOrderItemToModal(`Single Pair - ${color}`, bundles[1], `£${itemTotal.toFixed(2)}`, 'original');
                  }
                }

                // Add additional items that were added
                additionalItemsAdded.forEach(item => {
                  total += item.price * item.quantity;
                  addOrderItemToModal(item.name, item.quantity, `£${(item.price * item.quantity).toFixed(2)}`, 'additional');
                });

                modalOrderTotal.textContent = `£${total.toFixed(2)}`;
              }

              // Function to add an order item to the modal
              function addOrderItemToModal(name, quantity, price, type = 'original') {
                const modalOrderItems = document.getElementById('modalOrderItems');
                const itemDiv = document.createElement('div');
                itemDiv.className = `modal-order-item ${type}-item`;

                // Add visual indicator for additional items
                const typeIcon = type === 'additional' ? '🆕 ' : '';

                itemDiv.innerHTML = `
      <span class="modal-order-item-name">${typeIcon}${name}</span>
      <span class="modal-order-item-quantity">Qty: ${quantity}</span>
      <span class="modal-order-item-price">${price}</span>
    `;

                // Add special styling for additional items
                if (type === 'additional') {
                  itemDiv.style.borderLeft = '3px solid #FFD700';
                  itemDiv.style.background = 'rgba(255, 215, 0, 0.1)';
                }

                modalOrderItems.appendChild(itemDiv);
              }

              // Function to hide the checkout modal
              function hideCheckoutModal() {
                document.getElementById('checkoutModal').style.display = 'none';

                // Reset modal state for next time
                resetModalState();
              }

              // Function to reset modal state
              function resetModalState() {
                // Don't reset additional items here - keep them until checkout
                // additionalItemsAdded = [];

                // Reset add-to-cart buttons
                const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');
                addToCartButtons.forEach(button => {
                  button.classList.remove('added');
                  button.textContent = '🛒 Add to Cart';
                  button.disabled = false;
                });
              }

              // Function to show checkout loading state
              function showCheckoutLoading() {
                const proceedBtn = document.getElementById('proceedToStripeBtn');
                const cancelBtn = document.getElementById('cancelCheckoutBtn');
                const loadingDiv = document.getElementById('checkoutLoading');

                proceedBtn.style.display = 'none';
                cancelBtn.style.display = 'none';
                loadingDiv.style.display = 'block';
              }

              // Function to hide checkout loading state
              function hideCheckoutLoading() {
                const proceedBtn = document.getElementById('proceedToStripeBtn');
                const cancelBtn = document.getElementById('cancelCheckoutBtn');
                const loadingDiv = document.getElementById('checkoutLoading');

                proceedBtn.style.display = 'block';
                cancelBtn.style.display = 'block';
                loadingDiv.style.display = 'none';
              }

              // Event listeners for modal buttons
              document.addEventListener('DOMContentLoaded', () => {
                // Close modal when clicking the close button
                document.getElementById('checkoutModalClose').addEventListener('click', hideCheckoutModal);

                // Close modal when clicking the cancel button
                document.getElementById('cancelCheckoutBtn').addEventListener('click', hideCheckoutModal);

                // Close modal when clicking outside the modal content
                document.getElementById('checkoutModal').addEventListener('click', (e) => {
                  if (e.target.id === 'checkoutModal') {
                    hideCheckoutModal();
                  }
                });

                // Proceed to Stripe when clicking the proceed button
                document.getElementById('proceedToStripeBtn').addEventListener('click', async () => {
                  // Show loading state
                  showCheckoutLoading();

                  // Now proceed with the original checkout logic
                  await proceedToStripeCheckout();
                });

                // Add event listeners for add-to-cart buttons
                setupAddToCartButtons();
              });

              // Function to setup add-to-cart button functionality
              function setupAddToCartButtons() {
                const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');

                addToCartButtons.forEach(button => {
                  button.addEventListener('click', function () {
                    const productName = this.getAttribute('data-product');
                    const productPrice = parseFloat(this.getAttribute('data-price'));

                    // Add product to additional items
                    addProductToCart(productName, productPrice, this);

                    // Update order summary
                    updateOrderSummaryWithAdditionalItems();
                  });
                });
              }

              // Function to add a product to the cart
              function addProductToCart(productName, price, buttonElement) {
                console.log('Adding product to cart:', productName, price);

                // Check if product is already added
                const existingItem = additionalItemsAdded.find(item => item.originalName === productName);

                if (existingItem) {
                  existingItem.quantity += 1;
                  console.log('Updated existing item quantity:', existingItem.quantity);
                  // Update quantity in cart iframe
                  updateProductQuantityInCart(productName, existingItem.quantity);
                } else {
                  const newItem = {
                    name: getProductDisplayName(productName),
                    price: price,
                    quantity: 1,
                    originalName: productName
                  };
                  additionalItemsAdded.push(newItem);
                  console.log('Added new item:', newItem);
                  console.log('Total additional items:', additionalItemsAdded);

                  // Add product to cart iframe
                  addProductToCartIframe(newItem);
                }

                // Update button state
                buttonElement.classList.add('added');
                buttonElement.textContent = '🛒 Added to Cart';
                buttonElement.disabled = true;

                // Show success feedback
                showAddToCartFeedback(productName);

                // Update order summary immediately
                updateOrderSummaryWithAdditionalItems();
              }

              // Function to get product display name
              function getProductDisplayName(productKey) {
                const productNames = {
                  'sneaker-care-kit': 'Sneaker Care Kit',
                  'premium-socks': 'Premium Socks (3-Pack)',
                  'cedar-shoe-trees': 'Cedar Shoe Trees'
                };
                return productNames[productKey] || productKey;
              }

              // Function to show add to cart feedback
              function showAddToCartFeedback(productName) {
                // Create temporary success message
                const successDiv = document.createElement('div');
                successDiv.style.cssText = `
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #2ed573;
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      font-family: "Press Start 2P", system-ui;
      font-size: 10px;
      z-index: 10003;
      animation: slideDown 0.3s ease-out;
    `;
                successDiv.textContent = `✅ ${productName} added to cart!`;
                document.body.appendChild(successDiv);

                setTimeout(() => {
                  successDiv.style.animation = 'fadeOut 0.3s ease-out';
                  setTimeout(() => successDiv.remove(), 300);
                }, 2000);
              }

              // Function to update order summary with additional items
              function updateOrderSummaryWithAdditionalItems() {
                console.log('Updating order summary with additional items');
                console.log('Additional items:', additionalItemsAdded);

                // Get current cart data to recalculate total
                const cartData = extractCartDataFromIframe();
                if (cartData) {
                  const { breakdown } = calculateBundlePricing(cartData.cartItems);
                  // Pass the breakdown and also update the total with additional items
                  populateModalOrderSummary(breakdown);

                  // Update the total to include additional items
                  const modalOrderTotal = document.getElementById('modalOrderTotal');
                  if (modalOrderTotal) {
                    let currentTotal = parseFloat(modalOrderTotal.textContent.replace('£', ''));
                    console.log('Current total before additional items:', currentTotal);

                    // Add additional items to total
                    additionalItemsAdded.forEach(item => {
                      const itemTotal = item.price * item.quantity;
                      currentTotal += itemTotal;
                      console.log('Adding item to total:', item.name, itemTotal, 'New total:', currentTotal);
                    });

                    modalOrderTotal.textContent = `£${currentTotal.toFixed(2)}`;
                    console.log('Final total:', modalOrderTotal.textContent);
                  }
                }
              }

              // Function to add product to cart iframe
              function addProductToCartIframe(productItem) {
                const iframe = document.getElementById('cartIframe');
                if (!iframe) {
                  console.error('Cart iframe not found');
                  return;
                }

                try {
                  const doc = iframe.contentDocument || iframe.contentWindow.document;

                  // Find the add to cart form or button for this product
                  // Since we're adding accessories, we'll simulate adding them to the cart
                  // by creating a new cart row or updating existing one

                  // First, try to find if this product already exists in cart
                  const existingCartRow = findProductInCart(doc, productItem.originalName);

                  if (existingCartRow) {
                    // Update quantity if product exists
                    updateProductQuantityInCart(productItem.originalName, productItem.quantity);
                  } else {
                    // Add new product row to cart
                    addNewProductRowToCart(doc, productItem);
                  }

                  // Refresh cart iframe to show changes
                  setTimeout(() => {
                    refreshCartIframe();
                  }, 100);

                } catch (error) {
                  console.error('Error adding product to cart iframe:', error);
                  // Fallback: just track in our local array
                }
              }

              // Function to find product in cart
              function findProductInCart(doc, productName) {
                const cartRows = doc.querySelectorAll('.cart-row');
                for (let row of cartRows) {
                  const titleEl = row.querySelector('.cart-row-title');
                  if (titleEl && titleEl.textContent.includes(getProductDisplayName(productName))) {
                    return row;
                  }
                }
                return null;
              }

              // Function to add new product row to cart
              function addNewProductRowToCart(doc, productItem) {
                // Create a new cart row element
                const cartContainer = doc.querySelector('.cart-list') || doc.querySelector('.cart-items') || doc.querySelector('[data-test="cart-items"]');

                if (!cartContainer) {
                  console.error('Cart container not found');
                  return;
                }

                // Create new cart row HTML
                const newRowHTML = `
      <div class="cart-row additional-product-row" data-product="${productItem.originalName}">
        <div class="cart-row-title">${productItem.name}</div>
        <div class="cart-row-variant">Type: Accessory</div>
        <div class="cart-row-price">£${(productItem.price * productItem.quantity).toFixed(2)}</div>
        <input type="number" data-test="quantity-input" value="${productItem.quantity}" min="1" class="cart-quantity-input">
        <button class="remove-product-btn" onclick="removeProductFromCart('${productItem.originalName}')">Remove</button>
      </div>
    `;

                // Insert the new row
                cartContainer.insertAdjacentHTML('beforeend', newRowHTML);

                // Add event listeners to the new row
                const newRow = cartContainer.lastElementChild;
                setupCartRowEventListeners(newRow, productItem);
              }

              // Function to setup cart row event listeners
              function setupCartRowEventListeners(row, productItem) {
                const quantityInput = row.querySelector('[data-test="quantity-input"]');
                if (quantityInput) {
                  quantityInput.addEventListener('change', (e) => {
                    const newQuantity = parseInt(e.target.value);
                    if (newQuantity > 0) {
                      updateProductQuantityInCart(productItem.originalName, newQuantity);
                    } else {
                      removeProductFromCart(productItem.originalName);
                    }
                  });
                }
              }

              // Function to update product quantity in cart
              function updateProductQuantityInCart(productName, quantity) {
                const iframe = document.getElementById('cartIframe');
                if (!iframe) return;

                try {
                  const doc = iframe.contentDocument || iframe.contentWindow.document;
                  const cartRow = findProductInCart(doc, productName);

                  if (cartRow) {
                    const quantityInput = cartRow.querySelector('[data-test="quantity-input"]');
                    if (quantityInput) {
                      quantityInput.value = quantity;
                      // Trigger change event to update cart
                      quantityInput.dispatchEvent(new Event('change', { bubbles: true }));
                    }

                    // Update price display
                    const priceEl = cartRow.querySelector('.cart-row-price');
                    if (priceEl) {
                      const productItem = additionalItemsAdded.find(item => item.originalName === productName);
                      if (productItem) {
                        priceEl.textContent = `£${(productItem.price * quantity).toFixed(2)}`;
                      }
                    }
                  }
                } catch (error) {
                  console.error('Error updating product quantity:', error);
                }
              }

              // Function to remove product from cart
              function removeProductFromCart(productName) {
                const iframe = document.getElementById('cartIframe');
                if (!iframe) return;

                try {
                  const doc = iframe.contentDocument || iframe.contentWindow.document;
                  const cartRow = findProductInCart(doc, productName);

                  if (cartRow) {
                    cartRow.remove();

                    // Remove from our tracking array
                    additionalItemsAdded = additionalItemsAdded.filter(item => item.originalName !== productName);

                    // Update order summary
                    updateOrderSummaryWithAdditionalItems();

                    // Reset button state
                    const button = document.querySelector(`[data-product="${productName}"]`);
                    if (button) {
                      button.classList.remove('added');
                      button.textContent = '🛒 Add to Cart';
                      button.disabled = false;
                    }
                  }
                } catch (error) {
                  console.error('Error removing product from cart:', error);
                }
              }

              // Function to refresh cart iframe
              function refreshCartIframe() {
                const iframe = document.getElementById('cartIframe');
                if (iframe) {
                  // Trigger a refresh of the cart iframe
                  iframe.contentWindow.location.reload();
                }
              }

              // Function to proceed to Stripe checkout (original checkout logic)
              async function proceedToStripeCheckout() {
                try {
                  const cartData = extractCartDataFromIframe();
                  if (!cartData) {
                    hideCheckoutLoading();
                    hideCheckoutModal();
                    return;
                  }

                  const { breakdown } = calculateBundlePricing(cartData.cartItems);

                  const lineItemsToSend = [];
                  const rawCart = extractCartDataFromIframe();

                  const payload = {
                    line_items: lineItemsToSend,
                    raw_cart: rawCart, // unprocessed cart object
                    additional_items: additionalItemsAdded // include additional items
                  };

                  const referralId = localStorage.getItem('referral_id');
                  if (referralId) {
                    payload.referral_id = referralId;
                  }

                  for (const color in breakdown) {
                    const bundles = breakdown[color];
                    if (bundles[12] > 0) {
                      lineItemsToSend.push({
                        name: `12-Pair Bundle - ${color}`,
                        quantity: bundles[12],
                        unit_price: 68999
                      });
                    }
                    if (bundles[7] > 0) {
                      lineItemsToSend.push({
                        name: `7-Pair Bundle - ${color}`,
                        quantity: bundles[7],
                        unit_price: 39999
                      });
                    }
                    if (bundles[3] > 0) {
                      lineItemsToSend.push({
                        name: `3-Pair Bundle - ${color}`,
                        quantity: bundles[3],
                        unit_price: 17599
                      });
                    }
                    if (bundles[1] > 0) {
                      lineItemsToSend.push({
                        name: `Single Pair - ${color}`,
                        quantity: bundles[1],
                        unit_price: 5999
                      });
                    }
                  }

                  // Add additional items to lineItemsToSend
                  console.log('Adding additional items to lineItemsToSend:', additionalItemsAdded);
                  additionalItemsAdded.forEach(item => {
                    const lineItem = {
                      name: item.name,
                      quantity: item.quantity,
                      unit_price: Math.round(item.price * 100) // Convert to cents
                    };
                    lineItemsToSend.push(lineItem);
                    console.log('Added line item:', lineItem);
                  });

                  console.log('Final lineItemsToSend:', lineItemsToSend);

                  const response = await fetch("https://rxid.co.uk/order-received", {
                    method: "POST",
                    headers: {
                      "Content-Type": "application/json"
                    },
                    body: JSON.stringify(payload)
                  });

                  const data = await response.json();
                  if (data.success && data.data.checkout_url) {
                    // Hide loading and modal before redirecting
                    hideCheckoutLoading();
                    hideCheckoutModal();

                    setTimeout(() => {
                      clearCartInIframe();
                      // Reset additional items after successful checkout
                      additionalItemsAdded = [];
                      // then redirect to the checkout page
                      window.location.href = data.data.checkout_url;
                    }, 500); // 500ms delay (adjust as needed)
                  } else {
                    console.error("Checkout failed:", data);
                    hideCheckoutLoading();
                    alert("Error starting checkout. Please try again.");
                  }
                } catch (error) {
                  console.error("Checkout request failed:", error);
                  hideCheckoutLoading();
                  alert("Failed to connect to checkout server.");
                }
              }

              function clearCartInIframe() {
                const iframe = document.getElementById("cartIframe");
                if (!iframe) {
                  console.error("Cart iframe not found.");
                  return;
                }
                const doc = iframe.contentDocument || iframe.contentWindow.document;
                if (!doc) {
                  console.error("Could not access the iframe document.");
                  return;
                }
                const clearButton = doc.querySelector(".clear-products");
                if (clearButton) {
                  clearButton.click();
                } else {
                  console.error("Clear Products button not found in the iframe.");
                }
              }


            </script>




            <script>

              const originalHeight = "65px";
              const expandedHeight = "calc(100vh - 20px)";

              document.getElementById('cartIconBtn').addEventListener('click', function (e) {
                e.stopPropagation();
                const overlayInfoBox = document.getElementById('overlayInfoBox');
                if (!overlayInfoBox) return;

                // Use a data attribute to track expanded state
                if (overlayInfoBox.dataset.expanded === "true") {
                  overlayInfoBox.style.height = originalHeight;
                  overlayInfoBox.dataset.expanded = "false";
                } else {
                  overlayInfoBox.style.height = expandedHeight;
                  overlayInfoBox.dataset.expanded = "true";
                }
              });




            </script>

            <style>
              #cartIframe {
                display: none;
              }
            </style>


            <div class="row">
              <div class="col-lg-5 col-sm-12">
                <div class="heading_class">
                  <p class="footer_heading footer_brand">BYFORCE</p>

                </div>
              </div>
              <div class="col-lg-3">
                <div class="heading_class">
                  <p class="footer_heading footer_link">info@byforce.uk</p>
                </div>
              </div>
              <div class="col-lg-4 col-sm-12">

                <div class="heading_class">
                  <p class="footer_heading footer_phone">+44 7500 324 868</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

  </div>
  <style>
    /* All navbar CSS moved to Gaming-UI.css */

    /* Tutorial Helper Styles */
    #tutorialHelper {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #36c1f5 0%, #08aae7 100%);
      border: 3px solid #034057;
      border-radius: 50%;
      z-index: 10000;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      font-weight: bold;
      color: white;
      box-shadow:
        0 0 20px rgba(54, 193, 245, 0.6),
        0 0 40px rgba(54, 193, 245, 0.4),
        0 4px 15px rgba(0, 0, 0, 0.3),
        inset 0 2px 10px rgba(255, 255, 255, 0.3);
      transition: all 0.3s ease;
      animation: gamingAlive 3s ease-in-out infinite;
      overflow: visible;
    }

    #tutorialHelper::before {
      content: '';
      position: absolute;
      top: -5px;
      left: -5px;
      right: -5px;
      bottom: -5px;
      border-radius: 50%;
      background: linear-gradient(45deg, rgba(2, 62, 83, 0.5), rgba(4, 106, 143, 0.5), rgba(8, 158, 212, 0.5));
      background-size: 200% 200%;
      z-index: -1;
      animation: rotateGlow 7s linear infinite;
      opacity: 0.8;
    }

    #tutorialHelper::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
      animation: innerGlow 1s ease-in-out infinite;
      pointer-events: none;
    }

    @keyframes gamingAlive {

      0%,
      100% {
        transform: translateY(0) scale(1) rotate(0deg);
        box-shadow:
          0 0 20px rgba(54, 193, 245, 0.6),
          0 0 40px rgba(54, 193, 245, 0.4),
          0 4px 15px rgba(0, 0, 0, 0.3),
          inset 0 2px 10px rgba(255, 255, 255, 0.3);
      }

      25% {
        transform: translateY(-5px) scale(1.05) rotate(5deg);
        box-shadow:
          0 0 30px rgba(54, 193, 245, 0.8),
          0 0 60px rgba(54, 193, 245, 0.6),
          0 6px 20px rgba(0, 0, 0, 0.4),
          inset 0 2px 10px rgba(255, 255, 255, 0.4);
      }

      50% {
        transform: translateY(-8px) scale(1.1) rotate(0deg);
        box-shadow:
          0 0 40px rgba(54, 193, 245, 1),
          0 0 80px rgba(54, 193, 245, 0.8),
          0 8px 25px rgba(0, 0, 0, 0.5),
          inset 0 2px 10px rgba(255, 255, 255, 0.5);
      }

      75% {
        transform: translateY(-5px) scale(1.05) rotate(-5deg);
        box-shadow:
          0 0 30px rgba(54, 193, 245, 0.8),
          0 0 60px rgba(54, 193, 245, 0.6),
          0 6px 20px rgba(0, 0, 0, 0.4),
          inset 0 2px 10px rgba(255, 255, 255, 0.4);
      }
    }

    @keyframes rotateGlow {
      0% {
        background-position: 0% 50%;
        transform: rotate(0deg);
      }

      100% {
        background-position: 200% 50%;
        transform: rotate(360deg);
      }
    }

    @keyframes innerGlow {

      0%,
      100% {
        opacity: 0.3;
        transform: translate(-50%, -50%) scale(0.8);
      }

      50% {
        opacity: 0.6;
        transform: translate(-50%, -50%) scale(1.2);
      }
    }













    #tutorialHelper:hover {
      transform: scale(1.15) rotate(360deg);
      box-shadow:
        0 0 50px rgba(54, 193, 245, 1),
        0 0 100px rgba(54, 193, 245, 0.8),
        0 0 150px rgba(54, 193, 245, 0.6),
        0 10px 30px rgba(0, 0, 0, 0.5),
        inset 0 2px 15px rgba(255, 255, 255, 0.5);
      animation: hoverPulse 0.5s ease-in-out infinite;
    }

    @keyframes hoverPulse {

      0%,
      100% {
        transform: scale(1.15) rotate(360deg);
      }

      50% {
        transform: scale(1.2) rotate(360deg);
      }
    }

    #tutorialHelper:hover::before {
      animation: rotateGlow 1s linear infinite;
      opacity: 1;
    }

    #tutorialHelper:hover::after {
      animation: innerGlow 0.5s ease-in-out infinite;
      opacity: 0.8;
    }

    .tutorial-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.3);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      animation: modalFadeIn 0.4s ease;
      backdrop-filter: blur(1px);
    }

    .tutorial-modal {
      position: relative;
      background: linear-gradient(180deg, #5BC8C8, #80DDB8);
      padding: 40px 50px;
      border-radius: 25px;
      text-align: center;
      font-family: 'Press Start 2P', system-ui, sans-serif;
      color: #fff;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4), 0 0 100px rgba(91, 200, 200, 0.3);
      border: 5px solid rgba(255, 255, 255, 0.4);
      animation: modalPop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      max-width: 700px;
      width: 90%;
      overflow: hidden;
    }

    .tutorial-modal::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent 40%, rgba(255, 255, 255, 0.2) 50%, transparent 60%);
      animation: sparkleMove 3s linear infinite;
      pointer-events: none;
    }

    .tutorial-modal h3 {
      font-size: 18px;
      margin-bottom: 25px;
      text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.2);
      position: relative;
      z-index: 1;
      animation: headingBounce 2s ease-in-out infinite;
      display: inline-block;
    }

    @keyframes headingBounce {

      0%,
      100% {
        transform: translateY(0) scale(1);
      }

      10% {
        transform: translateY(-8px) scale(1.05);
      }

      20% {
        transform: translateY(0) scale(1);
      }

      30% {
        transform: translateY(-5px) scale(1.03);
      }

      40% {
        transform: translateY(0) scale(1);
      }

      50% {
        transform: translateY(-3px) scale(1.02);
      }

      60% {
        transform: translateY(0) scale(1);
      }
    }

    .tutorial-modal p {
      font-size: 10px;
      margin-bottom: 12px;
      line-height: 2;
      position: relative;
      z-index: 1;
    }

    .tutorial-buttons {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-top: 20px;
      position: relative;
      z-index: 1;
      flex-wrap: nowrap;
    }

    .tutorial-btn {
      font-family: 'Press Start 2P', system-ui, sans-serif;
      font-size: 11px;
      padding: 15px 40px;
      background: linear-gradient(180deg, #fff, #f0f0f0);
      color: #333;
      border: 3px solid #ddd;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      box-shadow:
        0 6px 0 #bbb,
        0 10px 25px rgba(0, 0, 0, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 1);
      position: relative;
      overflow: hidden;
      flex: 1 1 auto;
      min-width: 0;
      white-space: nowrap;
      animation: tutorialBtnPulse 2s ease-in-out infinite;
    }

    @keyframes tutorialBtnPulse {

      0%,
      100% {
        box-shadow: 0 6px 0 #bbb, 0 10px 25px rgba(0, 0, 0, 0.2), 0 0 0 0 rgba(91, 200, 200, 0);
      }

      50% {
        box-shadow: 0 6px 0 #bbb, 0 10px 25px rgba(0, 0, 0, 0.2), 0 0 0 15px rgba(91, 200, 200, 0.2);
      }
    }

    .tutorial-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(91, 200, 200, 0.3), transparent);
      transition: left 0.5s ease;
    }

    .tutorial-btn:hover::before {
      left: 100%;
    }

    .tutorial-btn:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow:
        0 12px 0 #bbb,
        0 18px 35px rgba(0, 0, 0, 0.25),
        0 0 30px rgba(91, 200, 200, 0.4);
      color: #222;
      background: linear-gradient(180deg, #fff 0%, #fff 50%, #f0f0f0 100%);
    }

    .tutorial-btn:active {
      transform: translateY(4px) scale(0.98);
      box-shadow: 0 2px 0 #bbb;
    }

    .tutorial-btn:disabled {
      background: linear-gradient(180deg, #ccc, #bbb);
      color: #666;
      cursor: not-allowed;
      transform: none;
      box-shadow: 0 2px 0 #999;
    }

    .tutorial-btn:disabled:hover {
      transform: none;
      box-shadow: 0 2px 0 #999;
    }

    @keyframes modalFadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes modalFadeOut {
      from {
        opacity: 1;
      }

      to {
        opacity: 0;
      }
    }

    @keyframes modalPop {
      0% {
        transform: scale(0.5);
        opacity: 0;
      }

      50% {
        transform: scale(1.05);
      }

      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    @keyframes sparkleMove {
      0% {
        transform: translateX(-100%) rotate(45deg);
      }

      100% {
        transform: translateX(100%) rotate(45deg);
      }
    }

    .tutorial-highlight {
      position: absolute;
      border: 3px solid #FFD700;
      border-radius: 10px;
      z-index: 9998;
      animation: highlightPulse 1.5s infinite;
      pointer-events: none;
    }

    @keyframes highlightPulse {

      0%,
      100% {
        border-color: #FFD700;
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
      }

      50% {
        border-color: #FFA500;
        box-shadow: 0 0 25px rgba(255, 165, 0, 0.9);
      }
    }

    .tutorial-arrow {
      position: absolute;
      width: 0;
      height: 0;
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-bottom: 20px solid #FFD700;
      z-index: 9998;
      animation: bounce 1s infinite;
    }

    @keyframes bounce {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-10px);
      }
    }

    /* Responsive styles for tutorial modal */
    @media screen and (max-width: 768px) {
      .tutorial-modal {
        max-width: 95%;
        width: 95%;
        padding: 30px 20px;
        border-radius: 20px;
      }

      .tutorial-modal h3 {
        font-size: 14px;
        margin-bottom: 20px;
      }

      .tutorial-modal p {
        font-size: 8px;
        margin-bottom: 15px;
        line-height: 1.8;
      }

      .tutorial-buttons {
        flex-direction: row;
        gap: 8px;
        margin-top: 15px;
      }

      .tutorial-btn {
        font-size: 8px;
        padding: 12px 15px;
        border-radius: 8px;
        flex: 1 1 auto;
        min-width: 0;
      }
    }

    @media screen and (max-width: 480px) {
      .tutorial-modal {
        max-width: 95%;
        width: 95%;
        padding: 25px 15px;
        border-radius: 15px;
      }

      .tutorial-modal h3 {
        font-size: 12px;
        margin-bottom: 15px;
      }

      .tutorial-modal p {
        font-size: 7px;
        margin-bottom: 12px;
        line-height: 1.6;
      }

      .tutorial-buttons {
        flex-direction: row;
        gap: 6px;
        margin-top: 12px;
      }

      .tutorial-btn {
        font-size: 7px;
        padding: 10px 10px;
        border-radius: 6px;
        border-width: 2px;
        flex: 1 1 auto;
        min-width: 0;
      }
    }
  </style>
  </div>
  <script src="script.js"></script>

  <!-- Button Bubble Effect Script with Ripple and Burst Particles -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const button = document.getElementById('buyNowBtn');
      if (!button) return;

      let bubbleCount = 0;
      const maxBubbles = 20;

      // Bubble effect on mousemove
      button.addEventListener('mousemove', function (e) {
        if (bubbleCount >= maxBubbles) return;

        const rect = button.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        // Create bubble
        const bubble = document.createElement('div');
        bubble.className = 'button-bubble';
        bubble.style.left = x + 'px';
        bubble.style.top = y + 'px';

        const size = Math.random() * 8 + 4;
        bubble.style.width = size + 'px';
        bubble.style.height = size + 'px';

        button.appendChild(bubble);
        bubbleCount++;

        // Animate bubble
        const angle = Math.random() * Math.PI * 2;
        const distance = Math.random() * 30 + 20;
        const endX = x + Math.cos(angle) * distance;
        const endY = y + Math.sin(angle) * distance;

        bubble.animate([
          {
            opacity: 1,
            transform: 'translate(0, 0) scale(1)'
          },
          {
            opacity: 0.8,
            transform: `translate(${endX - x}px, ${endY - y}px) scale(1.5)`
          },
          {
            opacity: 0,
            transform: `translate(${endX - x}px, ${endY - y}px) scale(0)`
          }
        ], {
          duration: 600,
          easing: 'ease-out'
        }).onfinish = () => {
          bubble.remove();
          bubbleCount--;
        };
      });

      // Ripple effect on click
      button.addEventListener('click', function (e) {
        const ripple = document.createElement('span');
        ripple.style.cssText = `
              position: absolute;
              background: rgba(255, 255, 255, 0.5);
              border-radius: 50%;
              transform: scale(0);
              animation: ripple 0.6s linear;
              pointer-events: none;
            `;

        const rect = button.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        ripple.style.width = ripple.style.height = size + 'px';
        ripple.style.left = (e.clientX - rect.left - size / 2) + 'px';
        ripple.style.top = (e.clientY - rect.top - size / 2) + 'px';

        button.appendChild(ripple);
        setTimeout(() => ripple.remove(), 600);

        // Burst particles (sparks) on click
        for (let i = 0; i < 12; i++) {
          createBurstParticle(e.clientX, e.clientY);
        }
      });

      // Function to create burst particles (sparks)
      function createBurstParticle(x, y) {
        const particle = document.createElement('div');
        const angle = Math.random() * Math.PI * 2;
        const velocity = Math.random() * 100 + 50;
        const size = Math.random() * 10 + 5;

        particle.style.cssText = `
              position: fixed;
              width: ${size}px;
              height: ${size}px;
              background: linear-gradient(135deg, #5BC8C8, #f1c40f);
              border-radius: 50%;
              left: ${x}px;
              top: ${y}px;
              pointer-events: none;
              z-index: 9999;
              animation: burst 0.8s ease-out forwards;
              --tx: ${Math.cos(angle) * velocity}px;
              --ty: ${Math.sin(angle) * velocity}px;
            `;

        document.body.appendChild(particle);
        setTimeout(() => particle.remove(), 800);
      }

      // Add CSS for bubbles, ripple, and burst animations
      const style = document.createElement('style');
      style.textContent = `
            .button-bubble {
              position: absolute;
              border-radius: 50%;
              background: radial-gradient(circle, rgba(54, 193, 245, 0.9) 0%, rgba(54, 193, 245, 0.5) 50%, transparent 100%);
              pointer-events: none;
              z-index: 10;
              box-shadow: 
                0 0 10px rgba(54, 193, 245, 0.8),
                0 0 20px rgba(54, 193, 245, 0.6),
                0 0 30px rgba(54, 193, 245, 0.4);
            }
            
            @keyframes ripple {
              to {
                transform: scale(4);
                opacity: 0;
              }
            }
            
            @keyframes burst {
              0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
              }
              100% {
                transform: translate(var(--tx), var(--ty)) scale(0);
                opacity: 0;
              }
            }
          `;
      document.head.appendChild(style);
    });
  </script>

  <!-- Tutorial Buttons Bubble Effect Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const tutorialButtons = document.querySelectorAll('.tutorial-btn');
      const captureButtons = document.querySelectorAll('.capture-btn');
      const buynowButtons = document.querySelectorAll('.buynow');
      const allButtons = [...tutorialButtons, ...captureButtons, ...buynowButtons];

      allButtons.forEach(button => {
        let bubbleCount = 0;
        const maxBubbles = 20;

        // Bubble effect on mousemove
        button.addEventListener('mousemove', function (e) {
          if (bubbleCount >= maxBubbles) return;

          const rect = button.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;

          // Create bubble
          const bubble = document.createElement('div');
          bubble.className = 'tutorial-button-bubble';
          bubble.style.left = x + 'px';
          bubble.style.top = y + 'px';

          const size = Math.random() * 8 + 4;
          bubble.style.width = size + 'px';
          bubble.style.height = size + 'px';

          button.appendChild(bubble);
          bubbleCount++;

          // Animate bubble
          const angle = Math.random() * Math.PI * 2;
          const distance = Math.random() * 30 + 20;
          const endX = x + Math.cos(angle) * distance;
          const endY = y + Math.sin(angle) * distance;

          bubble.animate([
            {
              opacity: 1,
              transform: 'translate(0, 0) scale(1)'
            },
            {
              opacity: 0.8,
              transform: `translate(${endX - x}px, ${endY - y}px) scale(1.5)`
            },
            {
              opacity: 0,
              transform: `translate(${endX - x}px, ${endY - y}px) scale(0)`
            }
          ], {
            duration: 600,
            easing: 'ease-out'
          }).onfinish = () => {
            bubble.remove();
            bubbleCount--;
          };
        });

        // Ripple effect on click
        button.addEventListener('click', function (e) {
          if (button.disabled) return;

          const ripple = document.createElement('span');
          ripple.style.cssText = `
            position: absolute;
            background: rgba(91, 200, 200, 0.5);
            border-radius: 50%;
            transform: scale(0);
            animation: tutorialRipple 0.6s linear;
            pointer-events: none;
          `;

          const rect = button.getBoundingClientRect();
          const size = Math.max(rect.width, rect.height);
          ripple.style.width = ripple.style.height = size + 'px';
          ripple.style.left = (e.clientX - rect.left - size / 2) + 'px';
          ripple.style.top = (e.clientY - rect.top - size / 2) + 'px';

          button.appendChild(ripple);
          setTimeout(() => ripple.remove(), 600);

          // Burst particles (sparks) on click
          for (let i = 0; i < 12; i++) {
            createTutorialBurstParticle(e.clientX, e.clientY);
          }
        });
      });

      // Function to create burst particles (sparks) for tutorial buttons
      function createTutorialBurstParticle(x, y) {
        const particle = document.createElement('div');
        const angle = Math.random() * Math.PI * 2;
        const velocity = Math.random() * 100 + 50;
        const size = Math.random() * 10 + 5;

        particle.style.cssText = `
          position: fixed;
          width: ${size}px;
          height: ${size}px;
          background: linear-gradient(135deg, #5BC8C8, #80DDB8);
          border-radius: 50%;
          left: ${x}px;
          top: ${y}px;
          pointer-events: none;
          z-index: 10000;
          animation: tutorialBurst 0.8s ease-out forwards;
          --tx: ${Math.cos(angle) * velocity}px;
          --ty: ${Math.sin(angle) * velocity}px;
        `;

        document.body.appendChild(particle);
        setTimeout(() => particle.remove(), 800);
      }


      // Add CSS for tutorial button bubbles, ripple, and burst animations
      const tutorialStyle = document.createElement('style');
      tutorialStyle.textContent = `
        .tutorial-button-bubble {
          position: absolute;
          border-radius: 50%;
          background: radial-gradient(circle, rgba(91, 200, 200, 0.9) 0%, rgba(91, 200, 200, 0.5) 50%, transparent 100%);
          pointer-events: none;
          z-index: 10;
          box-shadow: 
            0 0 10px rgba(91, 200, 200, 0.8),
            0 0 20px rgba(91, 200, 200, 0.6),
            0 0 30px rgba(91, 200, 200, 0.4);
        }
        
        @keyframes tutorialRipple {
          to {
            transform: scale(4);
            opacity: 0;
          }
        }
        
        @keyframes tutorialBurst {
          0% {
            transform: translate(0, 0) scale(1);
            opacity: 1;
          }
          100% {
            transform: translate(var(--tx), var(--ty)) scale(0);
            opacity: 0;
          }
        }
      `;
      document.head.appendChild(tutorialStyle);
    });
  </script>

 

  <!-- Banner Image Star/Bubble Effect Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const bannerImage = document.querySelector('.responsive-image');
      if (!bannerImage) return;

      let bubbleCount = 0;
      const maxBubbles = 25;

      bannerImage.addEventListener('mousemove', function (e) {
        if (bubbleCount >= maxBubbles) return;

        const rect = bannerImage.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        // Create bubble/star
        const bubble = document.createElement('div');
        bubble.className = 'banner-bubble';
        bubble.style.left = x + 'px';
        bubble.style.top = y + 'px';

        const size = Math.random() * 10 + 5;
        bubble.style.width = size + 'px';
        bubble.style.height = size + 'px';

        // Make some bubbles star-shaped
        const isStar = Math.random() > 0.6;
        if (isStar) {
          bubble.style.clipPath = 'polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)';
        }

        // Ensure parent has position relative
        if (getComputedStyle(bannerImage).position === 'static') {
          bannerImage.style.position = 'relative';
        }

        bannerImage.appendChild(bubble);
        bubbleCount++;

        // Animate bubble
        const angle = Math.random() * Math.PI * 2;
        const distance = Math.random() * 50 + 30;
        const endX = x + Math.cos(angle) * distance;
        const endY = y + Math.sin(angle) * distance;
        const rotation = Math.random() * 360;

        bubble.animate([
          {
            opacity: 1,
            transform: 'translate(0, 0) scale(1) rotate(0deg)'
          },
          {
            opacity: 0.9,
            transform: `translate(${endX - x}px, ${endY - y}px) scale(1.8) rotate(${rotation}deg)`
          },
          {
            opacity: 0,
            transform: `translate(${endX - x}px, ${endY - y}px) scale(0) rotate(${rotation * 2}deg)`
          }
        ], {
          duration: 800,
          easing: 'ease-out'
        }).onfinish = () => {
          bubble.remove();
          bubbleCount--;
        };
      });

      // Add CSS for banner bubbles
      const bannerStyle = document.createElement('style');
      bannerStyle.textContent = `
            .banner-bubble {
              position: absolute;
              border-radius: 50%;
              background: radial-gradient(circle, rgba(54, 193, 245, 0.9) 0%, rgba(54, 193, 245, 0.6) 40%, rgba(8, 170, 231, 0.4) 70%, transparent 100%);
              pointer-events: none;
              z-index: 100;
              box-shadow: 
                0 0 12px rgba(54, 193, 245, 0.9),
                0 0 24px rgba(54, 193, 245, 0.7),
                0 0 36px rgba(54, 193, 245, 0.5),
                0 0 48px rgba(32, 178, 170, 0.3);
            }
          `;
      document.head.appendChild(bannerStyle);
    });
  </script>


  <!--- Optional JavaScript; choose one of the two! --->

  <!-- Option 1: Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
    </script>






  <meta charset="UTF-8">
  <title>Pruebas</title>
  <meta name="viewport" content="width=device-width; initial-scale=1.0;">
  <!-- <link rel="stylesheet" href="styleslocation/style.css"> -->



  <style>
    /* All navbar CSS moved to Gaming-UI.css */

    /* Gaming Style Main Headings */
    .gaming-headings-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 30px auto 40px auto;
      padding: 0 20px;
      max-width: 1200px;
      position: relative;
      z-index: 10;
    }

    .gaming-main-heading {
      font-family: "Press Start 2P", system-ui !important;
      font-size: 18px !important;
      color: #FFFFFF !important;
      margin: 0 0 25px 0 !important;
      padding: 25px 50px !important;
      text-shadow:
        /* Gaming 3D Effect */
        3px 3px 0px rgba(4, 112, 152, 1),
        2px 2px 0px rgba(0, 0, 0, 0.9),
        1px 1px 0px rgba(0, 0, 0, 0.7),
        /* Neon Glow */
        0 0 15px rgba(54, 193, 245, 0.8),
        0 0 30px rgba(54, 193, 245, 0.6),
        0 0 45px rgba(54, 193, 245, 0.4),
        0 0 60px rgba(54, 193, 245, 0.3) !important;
      background: linear-gradient(135deg,
          rgba(4, 112, 152, 0.95) 0%,
          rgba(10, 123, 168, 0.95) 50%,
          rgba(4, 112, 152, 0.95) 100%) !important;
      border: 3px solid rgba(54, 193, 245, 0.6) !important;
      border-radius: 12px !important;
      box-shadow:
        /* 3D Gaming Button Effect */
        0 6px 0 rgba(4, 112, 152, 0.9),
        0 10px 30px rgba(0, 0, 0, 0.4),
        inset 0 2px 0 rgba(255, 255, 255, 0.3),
        inset 0 -2px 0 rgba(0, 0, 0, 0.3),
        /* Neon Glow */
        0 0 40px rgba(54, 193, 245, 0.5),
        0 0 80px rgba(54, 193, 245, 0.3) !important;
      position: relative;
      display: inline-block;
      animation: gamingAlive 2.5s ease-in-out infinite, gamingPulse 3s ease-in-out infinite !important;
      letter-spacing: 1px !important;
      line-height: 1.8 !important;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
      overflow: visible;
      cursor: default;
    }

    .gaming-main-heading::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
      z-index: 1;
      animation: gamingShine 4s ease-in-out infinite;
      border-radius: 12px;
      pointer-events: none;
    }

    .gaming-main-heading::after {
      content: '';
      position: absolute;
      top: -4px;
      left: -4px;
      right: -4px;
      bottom: -4px;
      background: linear-gradient(45deg,
          rgba(54, 193, 245, 0.5),
          rgba(4, 112, 152, 0.5),
          rgba(54, 193, 245, 0.5));
      background-size: 200% 200%;
      border-radius: 14px;
      z-index: -1;
      animation: gamingBorderGlow 4s ease-in-out infinite;
      opacity: 0.7;
      pointer-events: none;
    }

    .gaming-main-heading:hover {
      transform: translateY(-4px) scale(1.03) !important;
      text-shadow:
        4px 4px 0px rgba(4, 112, 152, 1),
        3px 3px 0px rgba(0, 0, 0, 0.9),
        2px 2px 0px rgba(0, 0, 0, 0.7),
        0 0 25px rgba(54, 193, 245, 1),
        0 0 50px rgba(54, 193, 245, 0.8),
        0 0 75px rgba(54, 193, 245, 0.6),
        0 0 100px rgba(54, 193, 245, 0.4) !important;
      box-shadow:
        0 8px 0 rgba(4, 112, 152, 1),
        0 15px 40px rgba(0, 0, 0, 0.5),
        inset 0 2px 0 rgba(255, 255, 255, 0.4),
        inset 0 -2px 0 rgba(0, 0, 0, 0.4),
        0 0 60px rgba(54, 193, 245, 0.8),
        0 0 120px rgba(54, 193, 245, 0.5) !important;
      border-color: rgba(54, 193, 245, 0.9) !important;
      animation: gamingAlive 1.5s ease-in-out infinite, gamingPulse 2s ease-in-out infinite !important;
    }

    .gaming-main-heading:hover::before {
      animation-duration: 2s;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
    }

    .gaming-trust-reminder {
      margin: 0 !important;
      padding: 20px 40px !important;
      background: linear-gradient(135deg,
          rgba(4, 112, 152, 0.9) 0%,
          rgba(10, 123, 168, 0.9) 50%,
          rgba(4, 112, 152, 0.9) 100%) !important;
      border: 2px solid rgba(54, 193, 245, 0.5) !important;
      border-radius: 10px !important;
      box-shadow:
        0 4px 0 rgba(4, 112, 152, 0.85),
        0 8px 25px rgba(0, 0, 0, 0.35),
        inset 0 1px 0 rgba(255, 255, 255, 0.25),
        inset 0 -1px 0 rgba(0, 0, 0, 0.25),
        0 0 30px rgba(54, 193, 245, 0.4) !important;
      position: relative;
      overflow: hidden;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
      animation: gamingTrustFloat 3s ease-in-out infinite !important;
    }

    .gaming-trust-reminder::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      z-index: 1;
      animation: gamingTrustShine 5s ease-in-out infinite;
      border-radius: 10px;
      pointer-events: none;
    }

    .gaming-trust-heading {
      font-family: "Press Start 2P", system-ui !important;
      font-size: 10px !important;
      color: #FFFFFF !important;
      margin: 0 !important;
      text-align: center !important;
      padding: 0 !important;
      text-shadow:
        /* Gaming 3D Effect */
        2px 2px 0px rgba(4, 112, 152, 0.95),
        1px 1px 0px rgba(0, 0, 0, 0.85),
        /* Neon Glow */
        0 0 10px rgba(54, 193, 245, 0.7),
        0 0 20px rgba(54, 193, 245, 0.5),
        0 0 30px rgba(54, 193, 245, 0.3) !important;
      position: relative;
      z-index: 2;
      letter-spacing: 0.5px !important;
      line-height: 1.7 !important;
      animation: gamingTrustPulse 2.5s ease-in-out infinite !important;
    }

    .gaming-trust-reminder:hover {
      transform: translateY(-3px) !important;
      box-shadow:
        0 6px 0 rgba(4, 112, 152, 0.95),
        0 12px 35px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.3),
        inset 0 -1px 0 rgba(0, 0, 0, 0.3),
        0 0 45px rgba(54, 193, 245, 0.6),
        0 0 90px rgba(54, 193, 245, 0.4) !important;
      border-color: rgba(54, 193, 245, 0.8) !important;
      animation: gamingTrustFloat 2s ease-in-out infinite !important;
    }

    .gaming-trust-reminder:hover::before {
      animation-duration: 2.5s;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    }

    .gaming-trust-heading:hover {
      text-shadow:
        2px 2px 0px rgba(4, 112, 152, 1),
        1px 1px 0px rgba(0, 0, 0, 0.9),
        0 0 15px rgba(54, 193, 245, 0.9),
        0 0 30px rgba(54, 193, 245, 0.7),
        0 0 45px rgba(54, 193, 245, 0.5) !important;
      animation: gamingTrustPulse 1.5s ease-in-out infinite !important;
    }

    @keyframes gamingAlive {

      0%,
      100% {
        transform: translateY(0) scale(1);
      }

      25% {
        transform: translateY(-3px) scale(1.01);
      }

      50% {
        transform: translateY(0) scale(1);
      }

      75% {
        transform: translateY(-2px) scale(1.005);
      }
    }

    @keyframes gamingPulse {

      0%,
      100% {
        box-shadow:
          0 6px 0 rgba(4, 112, 152, 0.9),
          0 10px 30px rgba(0, 0, 0, 0.4),
          inset 0 2px 0 rgba(255, 255, 255, 0.3),
          inset 0 -2px 0 rgba(0, 0, 0, 0.3),
          0 0 40px rgba(54, 193, 245, 0.5),
          0 0 80px rgba(54, 193, 245, 0.3);
      }

      50% {
        box-shadow:
          0 6px 0 rgba(4, 112, 152, 0.9),
          0 10px 30px rgba(0, 0, 0, 0.4),
          inset 0 2px 0 rgba(255, 255, 255, 0.3),
          inset 0 -2px 0 rgba(0, 0, 0, 0.3),
          0 0 60px rgba(54, 193, 245, 0.8),
          0 0 120px rgba(54, 193, 245, 0.6),
          0 0 180px rgba(54, 193, 245, 0.4);
      }
    }

    @keyframes gamingShine {
      0% {
        left: -100%;
      }

      50% {
        left: 100%;
      }

      100% {
        left: 100%;
      }
    }

    @keyframes gamingBorderGlow {

      0%,
      100% {
        background-position: 0% 50%;
        opacity: 0.7;
      }

      50% {
        background-position: 100% 50%;
        opacity: 1;
      }
    }

    @keyframes gamingTrustFloat {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-2px);
      }
    }

    @keyframes gamingTrustShine {
      0% {
        left: -100%;
      }

      50% {
        left: 100%;
      }

      100% {
        left: 100%;
      }
    }

    @keyframes gamingTrustPulse {

      0%,
      100% {
        text-shadow:
          2px 2px 0px rgba(4, 112, 152, 0.95),
          1px 1px 0px rgba(0, 0, 0, 0.85),
          0 0 10px rgba(54, 193, 245, 0.7),
          0 0 20px rgba(54, 193, 245, 0.5),
          0 0 30px rgba(54, 193, 245, 0.3);
      }

      50% {
        text-shadow:
          2px 2px 0px rgba(4, 112, 152, 0.95),
          1px 1px 0px rgba(0, 0, 0, 0.85),
          0 0 15px rgba(54, 193, 245, 0.9),
          0 0 30px rgba(54, 193, 245, 0.7),
          0 0 45px rgba(54, 193, 245, 0.5);
      }
    }

    /* All background and navbar CSS moved to Gaming-UI.css */

    /* Tiny Shiny Particles for Whole Background */
    .container-fluid::after {
      content: '';
      position: fixed;
      width: 5px;
      height: 5px;
      background: radial-gradient(circle, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.9) 50%, transparent 80%);
      border-radius: 50%;
      box-shadow:
        0 0 10px rgba(255, 255, 255, 1),
        0 0 20px rgba(255, 255, 255, 0.8),
        0 0 30px rgba(255, 255, 255, 0.6),
        0 0 40px rgba(255, 255, 255, 0.4);
      pointer-events: none;
      z-index: 0;
      top: 15%;
      left: 15%;
      animation: tinyParticle1 18s ease-in-out infinite;
    }

    .container::before {
      content: '';
      position: fixed;
      width: 5px;
      height: 5px;
      background: radial-gradient(circle, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.9) 50%, transparent 80%);
      border-radius: 50%;
      box-shadow:
        0 0 10px rgba(255, 255, 255, 1),
        0 0 20px rgba(255, 255, 255, 0.8),
        0 0 30px rgba(255, 255, 255, 0.6),
        0 0 40px rgba(255, 255, 255, 0.4);
      pointer-events: none;
      z-index: 0;
      top: 40%;
      right: 20%;
      animation: tinyParticle2 20s ease-in-out infinite 2s;
    }

    .container::after {
      content: '';
      position: fixed;
      width: 5px;
      height: 5px;
      background: radial-gradient(circle, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.9) 50%, transparent 80%);
      border-radius: 50%;
      box-shadow:
        0 0 10px rgba(255, 255, 255, 1),
        0 0 20px rgba(255, 255, 255, 0.8),
        0 0 30px rgba(255, 255, 255, 0.6),
        0 0 40px rgba(255, 255, 255, 0.4);
      pointer-events: none;
      z-index: 0;
      bottom: 30%;
      left: 25%;
      animation: tinyParticle3 16s ease-in-out infinite 4s;
    }

    @keyframes tinyParticle1 {

      0%,
      100% {
        transform: translate(0, 0) scale(0.5);
        opacity: 0.3;
      }

      20% {
        transform: translate(150px, -100px) scale(1.8);
        opacity: 1;
      }

      40% {
        transform: translate(300px, -50px) scale(1.2);
        opacity: 0.6;
      }

      60% {
        transform: translate(250px, 80px) scale(1.5);
        opacity: 0.9;
      }

      80% {
        transform: translate(100px, 150px) scale(0.9);
        opacity: 0.5;
      }
    }

    @keyframes tinyParticle2 {

      0%,
      100% {
        transform: translate(0, 0) scale(0.5);
        opacity: 0.3;
      }

      25% {
        transform: translate(-120px, 90px) scale(1.6);
        opacity: 1;
      }

      50% {
        transform: translate(-250px, 40px) scale(1.1);
        opacity: 0.7;
      }

      75% {
        transform: translate(-180px, -70px) scale(1.4);
        opacity: 0.9;
      }
    }

    @keyframes tinyParticle3 {

      0%,
      100% {
        transform: translate(0, 0) scale(0.5);
        opacity: 0.3;
      }

      30% {
        transform: translate(80px, -120px) scale(1.7);
        opacity: 1;
      }

      60% {
        transform: translate(200px, -60px) scale(1.3);
        opacity: 0.8;
      }

      90% {
        transform: translate(120px, 100px) scale(1.1);
        opacity: 0.6;
      }
    }

    /* Shiny Particles Animation */
    .tab-content::before,
    .tab-content::after {
      content: '';
      position: absolute;
      width: 5px;
      height: 5px;
      background: radial-gradient(circle, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.8) 40%, transparent 70%);
      border-radius: 50%;
      box-shadow:
        0 0 10px rgba(255, 255, 255, 1),
        0 0 20px rgba(255, 255, 255, 0.8),
        0 0 30px rgba(255, 255, 255, 0.6),
        0 0 40px rgba(255, 255, 255, 0.4);
      pointer-events: none;
      z-index: 0;
    }

    .tab-content::before {
      top: 10%;
      left: 15%;
      animation: particleFloat1 8s ease-in-out infinite;
    }

    .tab-content::after {
      top: 70%;
      right: 20%;
      animation: particleFloat2 10s ease-in-out infinite 2s;
    }

    @keyframes particleFloat1 {

      0%,
      100% {
        transform: translate(0, 0) scale(0.8);
        opacity: 0.4;
      }

      25% {
        transform: translate(30px, -40px) scale(1.2);
        opacity: 1;
      }

      50% {
        transform: translate(60px, -20px) scale(1);
        opacity: 0.8;
      }

      75% {
        transform: translate(30px, 20px) scale(1.1);
        opacity: 0.9;
      }
    }

    @keyframes particleFloat2 {

      0%,
      100% {
        transform: translate(0, 0) scale(0.8);
        opacity: 0.4;
      }

      25% {
        transform: translate(-40px, 30px) scale(1.2);
        opacity: 1;
      }

      50% {
        transform: translate(-60px, 10px) scale(1);
        opacity: 0.8;
      }

      75% {
        transform: translate(-30px, -30px) scale(1.1);
        opacity: 0.9;
      }
    }


    /* Professional Deals Heading Styling - Clean Design */
    .deals-heading {
      font-size: 16px !important;
      color: #047098 !important;
      text-align: center !important;
      margin: 0 !important;
      padding: 20px 15px !important;
      background: transparent !important;
      border: none !important;
      border-radius: 0 !important;
      box-shadow: none !important;
      position: relative;
      display: block !important;
      letter-spacing: 1px !important;
      line-height: 1.5 !important;
      text-shadow: none !important;
      text-transform: uppercase !important;
      overflow: visible !important;
      width: 100% !important;
      animation: textBounceSmooth 2.5s ease-in-out infinite !important;
    }

    @keyframes textBounceSmooth {

      0%,
      100% {
        transform: translateY(0);
      }

      25% {
        transform: translateY(-4px);
      }

      50% {
        transform: translateY(0);
      }

      75% {
        transform: translateY(-2px);
      }
    }

    /* Container background for deals section - No Background */
    .deals-section-container {
      background: transparent !important;
      padding: 0 !important;
      margin: 20px 0 !important;
      width: 100% !important;
      position: relative;
    }

    .deals-section-container::after {
      content: '';
      position: absolute;
      bottom: -15px;
      left: 5%;
      width: 90%;
      height: 4px;
      background: linear-gradient(90deg,
          transparent 0%,
          rgba(149, 222, 167, 0.5) 10%,
          rgba(149, 222, 167, 0.9) 25%,
          rgba(149, 222, 167, 1) 50%,
          rgba(149, 222, 167, 0.9) 75%,
          rgba(149, 222, 167, 0.5) 90%,
          transparent 100%);
      background-size: 200% 100%;
      border-radius: 10px;
      z-index: 1;
      animation: shinyGradientMove 3s linear infinite, shinyGradientGlow 2s ease-in-out infinite !important;
      box-shadow:
        0 0 15px rgba(149, 222, 167, 0.8),
        0 0 30px rgba(149, 222, 167, 0.6),
        0 0 45px rgba(149, 222, 167, 0.4) !important;
      pointer-events: none;
    }

    /* Professional Trust Box Styling - No Background */
    .professional-trust-box {
      margin: 0 !important;
      padding: 15px 20px !important;
      background: transparent !important;
      border: none !important;
      border-radius: 0 !important;
      box-shadow: none !important;
      position: relative;
      overflow: visible !important;
      width: 100% !important;
    }

    /* Trust Heading Text Styling - With Bounce Animation */
    .trust-heading-text {
      margin: 0 !important;
      text-align: center !important;
      font-size: 10px !important;
      line-height: 1.6 !important;
      color: #047098 !important;
      text-shadow: none !important;
      letter-spacing: 0.5px !important;
      position: relative;
      z-index: 2;
      text-transform: none !important;
      animation: textBounceSmooth 2.8s ease-in-out infinite !important;
    }

    @keyframes shinyGradientMove {
      0% {
        background-position: 0% 50%;
      }

      100% {
        background-position: 200% 50%;
      }
    }

    @keyframes shinyGradientGlow {

      0%,
      100% {
        box-shadow:
          0 0 15px rgba(149, 222, 167, 0.8),
          0 0 30px rgba(149, 222, 167, 0.6),
          0 0 45px rgba(149, 222, 167, 0.4);
      }

      50% {
        box-shadow:
          0 0 25px rgba(149, 222, 167, 1),
          0 0 50px rgba(149, 222, 167, 0.9),
          0 0 75px rgba(149, 222, 167, 0.7),
          0 0 100px rgba(149, 222, 167, 0.5);
      }
    }

    /* Card animations removed for better performance */

    .footer_main {
      border: 0px solid #047098;
      margin-top: 50px;
      background: transparent;
      border-radius: 15px;
      width: 100%;
      max-width: 100%;
      padding: 1rem 2rem !important;
      display: flex;
      flex-direction: column;
      position: relative;
      overflow: hidden;
      animation: footerGlow 4s ease-in-out infinite;
    }

    .footer_main::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      animation: footerShimmer 6s ease-in-out infinite;
    }

    .footer_main::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.05) 50%, transparent 70%);
      animation: footerRotate 8s linear infinite;
      pointer-events: none;
    }

    @keyframes footerShimmer {

      0%,
      100% {
        opacity: 0.15;
      }

      50% {
        opacity: 0.25;
      }
    }

    @keyframes footerRotate {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }






    .social_icons {
      display: flex;
      justify-content: center;
      /* justify-content: flex-end; */
    }

    .footer_image {
      margin-top: 10px;
      height: 18px;
      margin-right: 15px !important;
    }

    .bottom_heading {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      align-items: center;

    }

    .bottom_heading_p {
      font-family: "Press Start 2P", system-ui !important;
      color: #FFFFFF !important;
      font-size: 9px !important;
    }

    .dropdown {
      .dropdown_btn {
        background-color: #FFFFFF !important;
        border-radius: none;
        color: #08aae7 !important;
        width: 100%;
      }
    }


    .page2_heading1 {
      font-family: "Press Start 2P", system-ui !important;
      color: #FFFFFF !important;
    }

    .page2_heading2 {
      font-family: "Press Start 2P", system-ui !important;
      color: #FFFFFF !important;
    }

    .box {
      border: 2px solid #047098;
      width: 100%;
      max-height: 100%;
      border-radius: 7px;
      position: relative;
      overflow: hidden;
      margin: 10px;
      box-shadow: 0 0 15px grey;
      background: #36c1f5;
      transition: 0.2s;
    }

    .box:hover {
      box-shadow: 0 0 25px #4d4d4d;
    }

    .top {
      height: 70px;
      background: #36c1f5;
      border-radius: 7px;
      opacity: 0.7;
      left: 0;
      top: 0;
      width: 100%;
      line-height: 70px;
      z-index: 1;
      text-align: center;
      transform: translate3d(0, 0, 0);
      text-transform: uppercase;
      letter-spacing: .4em;
      font-size: 24px;
      text-shadow: 0 1px 0 rgba(black, .1);
      text-indent: .3em;
      font-family: 'Playfair Display', serif;
    }

    .btm_heading {
      font-family: "Press Start 2P", system-ui !important;
      color: #FFFFFF;
      font-size: 20px;
      font-weight: normal;
    }

    .box_class {
      background-color: #36c1f5;
      padding: 10px;
      margin-bottom: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;

      img {
        width: 230px;
        height: 20px;
        margin-bottom: 10px;
      }
    }

    .card {
      box-shadow: 5.15px 6.3px 0.58px 0px rgba(0, 0, 0, 0.25);
      border: 2px solid transparent;
      margin-top: 20px;
      background-color: unset;
      background-image: linear-gradient(to bottom, rgb(0 185 255 / 15%) 24%, rgb(115 241 190 / 24%) 39%, rgb(5 149 255 / 14%) 64%);
      background-clip: padding-box;
      border-radius: 10px;
      overflow: hidden !important;
      position: relative;
      isolation: isolate;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    /* Simplified card hover effect */
    .card:hover {
      transform: translateY(-5px);
      box-shadow:
        0 20px 40px rgba(0, 0, 0, 0.3),
        0 0 30px rgba(54, 193, 245, 0.4),
        0 0 60px rgba(149, 222, 167, 0.3),
        5.15px 6.3px 0.58px 0px rgba(0, 0, 0, 0.25);
      animation: cardHoverPulse 2s ease-in-out infinite;
    }

    /* Card content animation on hover */
    .card:hover>* {
      transform: translateZ(0);
      transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    /* Animated borders removed for performance */

    /* Simplified hover effect without animations */
    .card:hover {
      box-shadow:
        0 10px 30px rgba(0, 0, 0, 0.3),
        5.15px 6.3px 0.58px 0px rgba(0, 0, 0, 0.25);
    }

    .card-body {
      position: relative;
    }

    /* White shine sweep effect - using col-md-6 wrapper */
    .col-md-6 {
      position: relative;
    }

    /* Shine effects removed for better performance */

    @keyframes cardGradientShine {

      0%,
      100% {
        box-shadow:
          0 0 10px rgba(54, 193, 245, 0.6),
          0 0 20px rgba(54, 193, 245, 0.4),
          0 0 30px rgba(255, 255, 255, 0.3);
      }

      50% {
        box-shadow:
          0 0 20px rgba(54, 193, 245, 0.9),
          0 0 40px rgba(54, 193, 245, 0.7),
          0 0 60px rgba(255, 255, 255, 0.6),
          0 0 80px rgba(54, 193, 245, 0.5);
      }
    }

    @keyframes cardGradientMove {
      0% {
        background-position: 0% 50%;
      }

      100% {
        background-position: 200% 50%;
      }
    }

    @keyframes cardShinySweep {
      0% {
        background-position: -100% 0;
        opacity: 0;
      }

      50% {
        background-position: 100% 0;
        opacity: 1;
      }

      100% {
        background-position: 100% 0;
        opacity: 0;
      }
    }

    @keyframes cardWhiteShineBorder {
      0% {
        background-position: 0% 0, 0% 50%;
      }

      100% {
        background-position: 0% 0, 200% 50%;
      }
    }

    /* Ensure card background and content are above the border */
    .card>* {
      position: relative;
      z-index: 2;
    }

    /* Sparkle effect removed for better performance */

    .card_images {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .card_image_class {
      height: 109.51px;
      padding: 10px;
      object-fit: contain;
      position: relative;
      z-index: 2;
      transition: transform 0.3s ease;
    }

    /* Simplified card image hover effect */
    .card:hover .card_image_class {
      transform: scale(1.05);
    }

    .cardimage_heading {
      font-family: "Press Start 2P", system-ui !important;
      color: #FFFFFF !important;
      font-size: 12px !important;
      /* margin-top: 20px; */
      margin-right: 15px;
      position: relative;
      z-index: 5;
      transition: transform 0.3s ease,
        text-shadow 0.3s ease,
        color 0.3s ease;
    }

    /* Simplified card heading hover effect */
    .card:hover .cardimage_heading {
      transform: translateY(-2px);
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      color: #ffffff !important;
    }

    .card-body {
      border-radius: 0px 0px 10px 10px;
      background-color: #45ccf652;
      backdrop-filter: blur(0.99px);
      -webkit-backdrop-filter: blur(0.99px);
      display: flex;
      justify-content: flex-end;
      align-items: center;
      padding: 5px 18px;
      position: relative;
      z-index: 2;
    }

    .card-title {
      font-family: "Press Start 2P", system-ui !important;
      color: #FFFFFF !important;
      font-size: 12px;
      font-weight: 400;
      padding-top: 0px;
      padding-right: 10px;
      position: relative;
      z-index: 5;
      transition: transform 0.3s ease,
        text-shadow 0.3s ease;
    }

    /* Simplified card title hover effect */
    .card:hover .card-title {
      transform: scale(1.03);
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    .col-md-6 {
      position: relative;
    }

    .price {
      position: relative;
      z-index: 5;
    }

    /* Style for the additional content panel */
    .additionalContent {
      transform: translateY(-465px);
      /* start hidden above the card */
      transition: transform 0.2s cubic-bezier(0.86, 0.31, 0.07, 0.89);
    }

    /* When the panel is “open”, drop it into place */
    .additionalContent.open {
      transform: translateY(0);
    }

    .additionalContent {
      position: absolute;
      /* display: none;
          /* Hidden by default */
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      margin-top: 0px;
      padding: 15px;
      background: #36c1f57a;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 10px;
      /* background-color: #f8f9fa; */
      z-index: 10;
    }

    .additionalContenth5 {
      font-family: "Press Start 2P", system-ui !important;
      color: #FFFFFF !important;
      font-size: 13px;
      padding-bottom: 5px;

    }

    .additionalContentp {
      font-family: "Press Start 2P", system-ui !important;
      color: #FFFFFF !important;
      font-size: 10px;
      line-height: 16px;

    }

    /* --- For WebKit-based browsers (Chrome, Safari, Edge) --- */
    .size-selection select::-webkit-scrollbar {
      width: 12px;
      /* width of the vertical scroll bar */
    }

    .size-selection select::-webkit-scrollbar-track {
      background: #f1f1f1;
      /* color of the scroll bar track */
      border-radius: 6px;
    }

    .size-selection select::-webkit-scrollbar-thumb {
      background: #888;
      /* color of the scroll bar thumb (the draggable part) */
      border-radius: 6px;
    }

    .size-selection select::-webkit-scrollbar-thumb:hover {
      background: #555;
      /* color when hovering over the thumb */
    }



    .custom-button-container {
      width: 100%;
      /* Set a fixed width for the image and button */
      text-align: center;
      /* Center the content */
      /* Center the container on the page */
      border-radius: 5px 0px 0px 5px;
    }

    .custom-button-image {
      background-color: #45ccf6;
      padding: 20px;
    }

    /* Checkout Modal Styles */
    .checkout-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 10002;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.3s ease-in-out;
    }

    .checkout-modal-content {
      background: linear-gradient(135deg, #36c1f5 0%, #10aae6 100%);
      border: 3px solid #047098;
      border-radius: 15px;
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
      animation: slideUp 0.4s ease-out;
    }

    .checkout-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 25px 30px 20px;
      border-bottom: 2px solid rgba(255, 255, 255, 0.2);
    }

    .checkout-modal-header h2 {
      color: white;
      font-family: "Press Start 2P", system-ui;
      font-size: 18px;
      margin: 0;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .checkout-modal-close {
      background: none;
      border: none;
      color: white;
      font-size: 28px;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .checkout-modal-close:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.1);
    }

    .checkout-modal-body {
      padding: 30px;
    }

    .order-summary {
      margin-bottom: 30px;
    }

    .order-summary h3 {
      color: white;
      font-family: "Press Start 2P", system-ui;
      font-size: 14px;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .modal-order-items {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
      max-height: 200px;
      overflow-y: auto;
    }

    .modal-order-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      color: white;
      font-family: "Press Start 2P", system-ui;
      font-size: 10px;
    }

    .modal-order-item:last-child {
      border-bottom: none;
    }

    .modal-order-item-name {
      flex: 1;
    }

    .modal-order-item-quantity {
      margin: 0 15px;
      color: #FFD700;
    }

    .modal-order-item-price {
      color: #FFD700;
      font-weight: bold;
    }

    /* Additional item styling */
    .modal-order-item.additional-item {
      border-left: 3px solid #FFD700;
      background: rgba(255, 215, 0, 0.1);
      padding-left: 15px;
    }

    .modal-order-item.additional-item .modal-order-item-name {
      color: #FFD700;
      font-weight: bold;
    }

    /* Additional product row styling in cart */
    .additional-product-row {
      background: rgba(255, 215, 0, 0.1) !important;
      border-left: 3px solid #FFD700 !important;
      border-radius: 8px;
      margin: 5px 0;
      padding: 10px;
    }

    .additional-product-row .cart-row-title {
      color: #FFD700 !important;
      font-weight: bold;
    }

    .remove-product-btn {
      background: #ff4757;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .remove-product-btn:hover {
      background: #ff3742;
      transform: scale(1.05);
    }

    .order-total {
      text-align: right;
      color: white;
      font-family: "Press Start 2P", system-ui;
      font-size: 14px;
      padding: 15px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .checkout-actions {
      text-align: center;
    }

    .checkout-actions p {
      color: white;
      font-family: "Press Start 2P", system-ui;
      font-size: 12px;
      margin-bottom: 25px;
      opacity: 0.9;
    }

    .proceed-btn {
      background: linear-gradient(135deg, #2ed573 0%, #1e90ff 100%);
      color: white;
      border: none;
      padding: 18px 35px;
      border-radius: 10px;
      font-family: "Press Start 2P", system-ui;
      font-size: 12px;
      cursor: pointer;
      margin: 0 10px 15px;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .proceed-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
      border-color: rgba(255, 255, 255, 0.6);
    }

    .proceed-btn:active {
      transform: translateY(-1px);
    }

    .cancel-btn {
      background: transparent;
      color: white;
      border: 2px solid rgba(255, 255, 255, 0.6);
      padding: 15px 30px;
      border-radius: 10px;
      font-family: "Press Start 2P", system-ui;
      font-size: 11px;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 0 10px;
    }

    .cancel-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.8);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .checkout-modal-content {
        width: 95%;
        max-height: 90vh;
      }

      .checkout-modal-header {
        padding: 20px 25px 15px;
      }

      .checkout-modal-body {
        padding: 25px;
      }

      .proceed-btn,
      .cancel-btn {
        padding: 15px 25px;
        font-size: 11px;
        margin: 5px;
      }
    }

    @media (max-width: 480px) {
      .checkout-modal-header h2 {
        font-size: 16px;
      }

      .checkout-modal-body {
        padding: 20px;
      }

      .modal-order-items {
        padding: 15px;
      }

      .modal-order-item {
        font-size: 9px;
      }
    }

    /* Checkout Loading Styles */
    .checkout-loading {
      text-align: center;
      padding: 20px;
      color: white;
    }

    .checkout-loading .loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top: 4px solid white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 15px;
    }

    .checkout-loading p {
      font-family: "Press Start 2P", system-ui;
      font-size: 11px;
      margin: 0;
      opacity: 0.9;
    }

    .proceed-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none !important;
    }

    /* Additional Products Section Styles */
    .additional-products-section {
      margin: 30px 0;
      padding: 25px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      border: 2px solid rgba(255, 255, 255, 0.2);
    }

    .additional-products-section h3 {
      color: white;
      font-family: "Press Start 2P", system-ui;
      font-size: 14px;
      text-align: center;
      margin-bottom: 15px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .section-subtitle {
      color: rgba(255, 255, 255, 0.8);
      font-family: "Press Start 2P", system-ui;
      font-size: 9px;
      text-align: center;
      margin-bottom: 25px;
      line-height: 14px;
    }

    .additional-products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .additional-product-card {
      background: rgba(255, 255, 255, 0.15);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 12px;
      padding: 15px;
      text-align: center;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .additional-product-card:hover {
      transform: translateY(-5px);
      border-color: rgba(255, 255, 255, 0.6);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    }

    .product-image {
      margin-bottom: 12px;
    }

    .product-image img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 8px;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .product-info h4 {
      color: white;
      font-family: "Press Start 2P", system-ui;
      font-size: 10px;
      margin: 0 0 8px 0;
      line-height: 14px;
    }

    .product-description {
      color: rgba(255, 255, 255, 0.8);
      font-family: "Press Start 2P", system-ui;
      font-size: 8px;
      margin: 0 0 12px 0;
      line-height: 12px;
      min-height: 24px;
    }

    .product-price {
      color: #FFD700;
      font-family: "Press Start 2P", system-ui;
      font-size: 12px;
      font-weight: bold;
      margin-bottom: 12px;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    }

    .add-to-cart-btn {
      background: linear-gradient(135deg, #2ed573 0%, #1e90ff 100%);
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 8px;
      font-family: "Press Start 2P", system-ui;
      font-size: 9px;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .add-to-cart-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      border-color: rgba(255, 255, 255, 0.6);
    }

    .add-to-cart-btn:active {
      transform: translateY(0);
    }

    .add-to-cart-btn.added {
      background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
      cursor: default;
    }

    .add-to-cart-btn.added::after {
      content: " ✓ Added";
    }

    /* Responsive Design for Additional Products */
    @media (max-width: 768px) {
      .additional-products-grid {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
      }

      .additional-product-card {
        padding: 12px;
      }

      .product-image img {
        width: 50px;
        height: 50px;
      }

      .product-info h4 {
        font-size: 9px;
      }

      .product-description {
        font-size: 7px;
      }

      .add-to-cart-btn {
        padding: 8px 12px;
        font-size: 8px;
      }
    }

    @media (max-width: 480px) {
      .additional-products-section {
        padding: 20px;
      }

      .additional-products-grid {
        grid-template-columns: 1fr;
        gap: 15px;
      }

      .additional-product-card {
        padding: 15px;
      }
    }
  </style>


</body>

</html>

</div>

<script>
  // Remove preloader after page and CSS are fully loaded
  document.addEventListener("DOMContentLoaded", () => {
    window.addEventListener("load", () => {
      document.body.classList.remove("loading");
    });
  });
</script>

<!-- Tutorial System JavaScript -->
<script>
  class TutorialGuide {
    constructor() {
      this.currentStep = 0;
      this.isActive = false;
      this.steps = [
        {
          title: "Welcome to ByForce!",
          content: "I'll guide you through our website to help you find and purchase the perfect AF1s at unbeatable prices!",
          target: null,
          action: null
        },
        {
          title: "Your Home Base",
          content: "This is our HOME page where you can learn about our amazing deals. You can see we offer AF1s at 50% less than retail!",
          target: "#home",
          action: () => this.switchToTab('home-tab')
        },
        {
          title: "Ready to Shop?",
          content: "Now let's head to the SHOP page where you can browse and select your AF1s. Click on the SHOP tab to continue!",
          target: "#services-tab",
          action: () => this.switchToTab('services-tab')
        },
        {
          title: "Product Selection",
          content: "Here you can see our bundles! We offer ALL-WHITE and ALL-BLACK AF1s in different bundle sizes. Bigger bundles = bigger savings!",
          target: "#services",
          action: null
        },
        {
          title: "Choose Your Bundle",
          content: "Pick a bundle that suits you! You can get 1 pair, 3 pairs (BALLER), 7 pairs (BIG BALLER), or 12 pairs (BIG BALLER DELUXE).",
          target: ".all-white.cards .card:first-child",
          action: null
        },
        {
          title: "Product Details",
          content: "Click on any product card to see details, select sizes, and add items to your cart. Try clicking on the first card!",
          target: ".all-white.cards .card:first-child",
          action: () => {
            const firstCard = document.querySelector('.all-white.cards .card:first-child');
            if (firstCard) firstCard.click();
          }
        },
        {
          title: "Size Selection",
          content: "When you click a product, you can select sizes from the dropdown. Choose the sizes you want and add them to your cart!",
          target: ".additionalContent:first-of-type",
          action: null
        },
        {
          title: "Your Cart",
          content: "After adding items, you'll see the cart icon and overlay appear at the bottom. This shows your items and total savings!",
          target: "#overlayInfoBox",
          action: null
        },
        {
          title: "Cart Management",
          content: "Click the cart icon 🛒 to expand/collapse your cart view. You can manage quantities and see your bundle pricing breakdown.",
          target: "#cartIconBtn",
          action: null
        },
        {
          title: "Checkout Time!",
          content: "When you're ready to purchase, click the 'Checkout' button to proceed to secure payment. Your bundle savings are automatically applied!",
          target: "#testSendCartBtn",
          action: null
        },
        {
          title: "Tutorial Complete!",
          content: "That's it! You're now ready to shop with confidence. Remember: bigger bundles = bigger savings. Happy shopping! 🛒",
          target: null,
          action: null
        }
      ];

      this.init();
    }

    init() {
      const helper = document.getElementById('tutorialHelper');
      const overlay = document.getElementById('tutorialOverlay');
      const prevBtn = document.getElementById('tutorialPrev');
      const nextBtn = document.getElementById('tutorialNext');
      const skipBtn = document.getElementById('tutorialSkip');

      helper.addEventListener('click', () => this.startTutorial());
      prevBtn.addEventListener('click', () => this.previousStep());
      nextBtn.addEventListener('click', () => this.nextStep());
      skipBtn.addEventListener('click', () => this.endTutorial());

      // Close modal when clicking outside (on overlay)
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
          this.endTutorial();
        }
      });

      // Auto-start tutorial for first-time visitors
      if (!localStorage.getItem('tutorialCompleted')) {
        setTimeout(() => this.startTutorial(), 2000);
      }
    }

    startTutorial() {
      this.isActive = true;
      this.currentStep = 0;
      this.showOverlay();
      this.updateStep();
    }

    endTutorial() {
      this.isActive = false;
      this.hideOverlay();
      this.removeHighlight();
      localStorage.setItem('tutorialCompleted', 'true');
    }

    nextStep() {
      if (this.currentStep < this.steps.length - 1) {
        this.currentStep++;
        this.updateStep();
      } else {
        this.endTutorial();
      }
    }

    previousStep() {
      if (this.currentStep > 0) {
        this.currentStep--;
        this.updateStep();
      }
    }

    updateStep() {
      const step = this.steps[this.currentStep];
      const titleEl = document.getElementById('tutorialTitle');
      const contentEl = document.getElementById('tutorialContent');
      const prevBtn = document.getElementById('tutorialPrev');
      const nextBtn = document.getElementById('tutorialNext');

      titleEl.textContent = step.title;
      contentEl.textContent = step.content;

      // Update button states
      prevBtn.disabled = this.currentStep === 0;
      nextBtn.textContent = this.currentStep === this.steps.length - 1 ? 'Finish' : 'Next';

      // Execute step action
      if (step.action) {
        setTimeout(() => step.action(), 500);
      }

      // Highlight target element
      this.highlightElement(step.target);
    }

    highlightElement(selector) {
      this.removeHighlight();

      if (!selector) return;

      setTimeout(() => {
        const element = document.querySelector(selector);
        if (element) {
          const highlight = document.getElementById('tutorialHighlight');
          const rect = element.getBoundingClientRect();

          highlight.style.display = 'block';
          highlight.style.left = (rect.left - 5) + 'px';
          highlight.style.top = (rect.top - 5) + 'px';
          highlight.style.width = (rect.width + 10) + 'px';
          highlight.style.height = (rect.height + 10) + 'px';

          // Scroll element into view
          element.scrollIntoView({
            behavior: 'smooth',
            block: 'center'
          });
        }
      }, 100);
    }

    removeHighlight() {
      const highlight = document.getElementById('tutorialHighlight');
      highlight.style.display = 'none';
    }

    showOverlay() {
      const overlay = document.getElementById('tutorialOverlay');
      const modal = overlay.querySelector('.tutorial-modal');

      // Reset animation
      overlay.style.animation = 'none';
      if (modal) modal.style.animation = 'none';

      // Force reflow
      void overlay.offsetWidth;

      // Show overlay with fade in
      overlay.style.display = 'flex';
      overlay.style.animation = 'modalFadeIn 0.4s ease';

      // Animate modal pop
      if (modal) {
        setTimeout(() => {
          modal.style.animation = 'modalPop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
        }, 10);
      }
    }

    hideOverlay() {
      const overlay = document.getElementById('tutorialOverlay');
      const modal = overlay.querySelector('.tutorial-modal');

      // Fade out animation
      overlay.style.animation = 'modalFadeOut 0.3s ease forwards';

      // Remove after animation completes
      setTimeout(() => {
        overlay.style.display = 'none';
        // Reset animations for next time
        overlay.style.animation = '';
        if (modal) modal.style.animation = '';
      }, 300);
    }

    switchToTab(tabId) {
      const tab = document.getElementById(tabId);
      if (tab) {
        const bootstrapTab = new bootstrap.Tab(tab);
        bootstrapTab.show();
      }
    }
  }

  // Initialize tutorial when page loads
  document.addEventListener('DOMContentLoaded', () => {
    new TutorialGuide();
  });
</script>

<!-- Email Capture Overlay - Positioned at document root for full screen coverage -->
<div id="emailCaptureOverlay" class="email-capture-overlay" style="
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    width: 100% !important;
    height: 100vh !important;
    margin: 0 !important;
    padding: 0 !important;
    background: none !important;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    z-index: 10001 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    animation: modalFadeIn 0.4s ease;
    overflow: hidden;
  ">
  <!-- Animated cursor elements -->
  <div class="overlay-cursor overlay-cursor-1"></div>
  <div class="overlay-cursor overlay-cursor-2"></div>
  <div class="overlay-cursor overlay-cursor-3"></div>
  <div class="overlay-cursor overlay-cursor-4"></div>
  <div class="overlay-cursor overlay-cursor-5"></div>

  <div class="email-capture-modal">
    <!-- Close Button -->
    <button id="closeEmailCaptureBtn" class="email-capture-close-btn" title="Close">×</button>

    <div class="padlock-container">
      <div class="padlock-icon">🔒</div>
      <div class="email-icon">📧</div>
    </div>

    <h2 class="capture-title">This is a sign up only offer</h2>
    <p class="capture-subtitle" style="margin-bottom: 10px;">Enter your email to access our exclusive deals</p>

    <!-- Email Input Stage -->
    <div id="emailStage" class="capture-stage">
      <div class="email-input-container">
        <input type="email" id="captureEmailInput" placeholder="Enter your email address" required>
        <button id="sendCodeBtn" class="capture-btn">Access Offer</button>
      </div>
    </div>

    <!-- Code Input Stage -->
    <div id="codeStage" class="capture-stage" style="display: none;">
      <p class="capture-subtitle">We've sent a 6-digit code to your email</p>
      <div class="code-input-container">
        <input type="text" maxlength="1" class="code-digit" data-index="0">
        <input type="text" maxlength="1" class="code-digit" data-index="1">
        <input type="text" maxlength="1" class="code-digit" data-index="2">
        <input type="text" maxlength="1" class="code-digit" data-index="3">
        <input type="text" maxlength="1" class="code-digit" data-index="4">
        <input type="text" maxlength="1" class="code-digit" data-index="5">
      </div>
      <button id="verifyCodeBtn" class="capture-btn" style="margin-bottom: 15px;">Verify & Shop</button>
      <button id="resendCodeBtn" class="capture-btn">Resend Code</button>
    </div>

    <!-- Loading State -->
    <div id="loadingStage" class="capture-stage" style="display: none;">
      <div class="loading-spinner"></div>
      <p class="loading-text">Verifying your code...</p>
    </div>
  </div>
</div>

</body>

</html>